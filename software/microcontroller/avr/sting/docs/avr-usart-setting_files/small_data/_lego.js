document.documentElement.id="js";window.YaMoney=window.YaMoney||{};YaMoney.getSuggests=function(i){var g={};g[""]="</i>";var j;var f=$(i.input).attr("autocomplete","off");i.select=0;i["38"]=-1;i["40"]=1;var e="false";var k=$(i.input).closest("form");var d=$(i.input).closest("form").attr("name");var h=[];var b;var a;$('<div class="suggest-wrap"><div id="target"/></div>').find("#target").hide().end().insertAfter(f.closest(".b-form-input__box"));$("#target").click(function(l){l.stopPropagation();return false});$("body").click(function(){$("#target").css("display")=="block"?$("#target").hide():null});$(".suggest-wrap #target i").live("mouseover",function(){$(this).addClass("b-suggest__item-hover")});$(".suggest-wrap #target i").live("mouseout",function(){$(this).removeClass("b-suggest__item-hover")});function c(m){var l=m;$("#target").html(l).find("i.sgt").bind("click",function(){f.val($(this).text());if(i.counter!=""){r(null,i.counter)}$("#target").css({display:"none"});k.find("input[name=from]:not(#isug-id)").attr("disabled","disabled").end().find("#isug-id").removeAttr("disabled").end().submit()}).end().find("i.linksgt").bind("click",function(){f.val($(this).text());if(i.ads_counter!=""){r(this,i.ads_counter)}document.location=$(this).find("a").attr("href")}).end().css({display:""})}f.keydown(function(m){if(m.keyCode==13){var l="#isug-id";if(b=="linksgt"){if(i.ads_counter!=""){r($("i.linksgt a")[0],i.ads_counter)}}if(b=="sgt"){if(i.counter!=""){r(null,i.counter)}}if(e=="true"){k.find("input[name=from]:not(#isug-id)").attr("disabled","disabled").end().find("#isug-id").removeAttr("disabled").end()}return false}});f.keypress(function(l){if(l.keyCode==27){$("#target").css({display:"none"});e="false";if(window.event){f.val(j)}return false}});k.find("input[type=button]").click(function(l){if(i.b_counter!=""){r(null,i.b_counter)}$(this).closest("form").submit()});f.keyup(function(m){var l=$(this).val();clearTimeout(a);a=setTimeout((function(o,n){return function(){if(o.keyCode!=38&&o.keyCode!=40&&o.keyCode!=37&&o.keyCode!=39&&o.keyCode!=13&&o.keyCode!=27){l=$(n).val();if(!g[l]){$.getJSON(i.url,{string:l},function(q){var s=$('<div class="container"/>');$.each(q.suggests,function(t,v){var u;if(t!="ads"){u=$('<i class="sgt"/>').text(v).bind("click",function(){f.val($(this).text());if(i.counter!=""){r(null,i.counter)}$("#target").css({display:"none"});k.find("input[name=from]:not(#isug-id)").attr("disabled","disabled").end().find("#isug-id").removeAttr("disabled").end().submit()});s.append(u)}else{u=$('<i class="linksgt"/>');u.append("<a/>").find("a").text(v.linktext).attr("href",v.href.replace(/&amp;/gi,"&")).end().bind("click",function(){if(i.ads_counter!=""){r(this,i.ads_counter)}document.location=$(this).find("a").attr("href");o.stopPropagation()});u.append("<span> &#8212; "+v.descr+"</span>");s.append(u)}});if($(s).html()){$("#target").html(s).css({display:""});g[l]=s;i.select=0}else{$("#target").empty().css({display:"none"})}},"text")}else{$(n).val()==""?$("#target").empty().css({display:"none"}):c(g[$(n).val()])}e="false";b=""}if(o.keyCode==13){if(b=="linksgt"){document.location=$("i.linksgt a").attr("href");try{o.preventDefault()}catch(p){o.returnValue=false}}else{k.submit()}}}})(m,this),100);if(m.keyCode==38||m.keyCode==40){i.total=0;if($("#target").html()){$("#target i").each(function(p,o){i.total+=1;h[p]=o});if((m.keyCode==38&&i.select>0)||(m.keyCode==40&&i.select<i.total)){i.select+=i[m.keyCode]}$("#target i").removeClass("select_hover");if(i.select<h.length+1){b=$(h[i.select-1]).attr("class");$("#target i:eq("+(i.select-1)+")").addClass("select_hover");if(i.select!=0){if($(h[i.select-1]).hasClass("sgt")){$(this).val($(h[i.select-1]).text())}else{$(this).val(l)}}else{$(this).val(l);b=""}}$("#target").css({display:""})}e="true"}if(m.keyCode==37||m.keyCode==39||m.keyCode==27){e="false";m.keyCode==27?$("#target").css({display:"none"}):null}})};$(function(){var c=window.sessionStorage,b=$(".b-head-search #search-input");if(b.val()==""&&c&&c.text){b.val(c.text);c.clear()}var a=$(".b-head-search  form.b-search");if($.browser.msie){a.attr("autocomplete","off")}a.submit(function(){var d=window.sessionStorage;if(d){d.text=b.val()}return true})});(function(b,a){b.ajaxSetup({scriptCharset:"utf-8"})})(jQuery,window.Lego);