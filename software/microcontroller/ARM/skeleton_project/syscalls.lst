   1              		.code	16
   2              		.file	"syscalls.c"
  10              	.Ltext0:
  11              		.section	.text._read_r,"ax",%progbits
  12              		.align	2
  13              		.global	_read_r
  14              		.code 16
  15              		.thumb_func
  17              	_read_r:
  18              	.LFB290:
  19              		.file 1 "syscalls.c"
   1:syscalls.c    **** /***********************************************************************/
   2:syscalls.c    **** /*                                                                     */
   3:syscalls.c    **** /*  SYSCALLS.C:  System Calls for the newlib                                      */
   4:syscalls.c    **** /*  most of this is from newlib-lpc and a Keil-demo                    */
   5:syscalls.c    **** /*                                                                     */
   6:syscalls.c    **** /*  These are "reentrant functions" as needed by                       */
   7:syscalls.c    **** /*  the WinARM-newlib-config, see newlib-manual.                       */
   8:syscalls.c    **** /*  Collected and modified by Martin Thomas                            */
   9:syscalls.c    **** /*                                                                     */
  10:syscalls.c    **** /***********************************************************************/
  11:syscalls.c    **** 
  12:syscalls.c    **** /* adapted for the SAM7 at91_lib DBGU - mthomas 4/2006 */
  13:syscalls.c    **** 
  14:syscalls.c    **** #include <stdlib.h>
  15:syscalls.c    **** #include <reent.h>
  16:syscalls.c    **** #include <sys/stat.h>
  17:syscalls.c    **** 
  18:syscalls.c    **** #include "Board.h"
  19:syscalls.c    **** 
  20:syscalls.c    **** 
  21:syscalls.c    **** _ssize_t _read_r(
  22:syscalls.c    ****     struct _reent *r, 
  23:syscalls.c    ****     int file, 
  24:syscalls.c    ****     void *ptr, 
  25:syscalls.c    ****     size_t len)
  26:syscalls.c    **** {
  20              		.loc 1 26 0
  21              	.LVL0:
  22              		@ lr needed for prologue
  23              	.L3:
  24              	.LBB6:
  25              	.LBB7:
  26              		.file 2 "./common/lib_AT91SAM7S64.h"
   1:./common/lib_AT91SAM7S64.h **** //* ----------------------------------------------------------------------------
   2:./common/lib_AT91SAM7S64.h **** //*         ATMEL Microcontroller Software Support  -  ROUSSET  -
   3:./common/lib_AT91SAM7S64.h **** //* ----------------------------------------------------------------------------
   4:./common/lib_AT91SAM7S64.h **** //* DISCLAIMER:  THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR
   5:./common/lib_AT91SAM7S64.h **** //* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
   6:./common/lib_AT91SAM7S64.h **** //* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
   7:./common/lib_AT91SAM7S64.h **** //* DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,
   8:./common/lib_AT91SAM7S64.h **** //* INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
   9:./common/lib_AT91SAM7S64.h **** //* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
  10:./common/lib_AT91SAM7S64.h **** //* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  11:./common/lib_AT91SAM7S64.h **** //* LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  12:./common/lib_AT91SAM7S64.h **** //* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  13:./common/lib_AT91SAM7S64.h **** //* EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  14:./common/lib_AT91SAM7S64.h **** //* ----------------------------------------------------------------------------
  15:./common/lib_AT91SAM7S64.h **** //* File Name           : lib_AT91SAM7S64.h
  16:./common/lib_AT91SAM7S64.h **** //* Object              : AT91SAM7S64 inlined functions
  17:./common/lib_AT91SAM7S64.h **** //* Generated           : AT91 SW Application Group  08/18/2006 (15:29:16)
  18:./common/lib_AT91SAM7S64.h **** //*
  19:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_dbgu.h/1.1/Fri Jan 31 12:18:40 2003//
  20:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_pmc_SAM7S.h/1.5/Fri Nov  4 09:46:55 2005//
  21:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_VREG_6085B.h/1.1/Tue Feb  1 16:40:38 2005//
  22:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_rstc_6098A.h/1.1/Wed Oct  6 09:39:19 2004//
  23:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_ssc.h/1.4/Fri Jan 31 12:19:20 2003//
  24:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_wdtc_6080A.h/1.1/Wed Oct  6 09:38:30 2004//
  25:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_usart.h/1.5/Thu Nov 21 16:01:53 2002//
  26:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_spi2.h/1.2/Tue Aug 23 15:43:14 2005//
  27:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_pitc_6079A.h/1.2/Thu Nov  4 14:01:11 2004//
  28:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_aic_6075b.h/1.2/Mon Jul 18 11:06:01 2005//
  29:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_twi.h/1.5/Fri Aug  4 08:43:37 2006//
  30:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_adc.h/1.6/Fri Oct 17 08:12:38 2003//
  31:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_rttc_6081A.h/1.1/Wed Oct  6 09:39:38 2004//
  32:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_udp.h/1.5/Mon Aug 29 08:17:54 2005//
  33:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_tc_1753b.h/1.1/Fri Jan 31 12:20:02 2003//
  34:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_MC_SAM7S.h/1.1/Tue Feb  1 14:13:05 2005//
  35:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_pio.h/1.3/Fri Jan 31 12:18:56 2003//
  36:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_PWM_SAM.h/1.3/Wed Dec  3 10:23:10 2003//
  37:./common/lib_AT91SAM7S64.h **** //* CVS Reference       : /lib_pdc.h/1.2/Tue Jul  2 12:29:40 2002//
  38:./common/lib_AT91SAM7S64.h **** //* ----------------------------------------------------------------------------
  39:./common/lib_AT91SAM7S64.h **** 
  40:./common/lib_AT91SAM7S64.h **** #ifndef lib_AT91SAM7S64_H
  41:./common/lib_AT91SAM7S64.h **** #define lib_AT91SAM7S64_H
  42:./common/lib_AT91SAM7S64.h **** 
  43:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
  44:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR AIC
  45:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
  46:./common/lib_AT91SAM7S64.h **** #define AT91C_AIC_BRANCH_OPCODE ((void (*) ()) 0xE51FFF20) // ldr, pc, [pc, #-&F20]
  47:./common/lib_AT91SAM7S64.h **** 
  48:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
  49:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_ConfigureIt
  50:./common/lib_AT91SAM7S64.h **** //* \brief Interrupt Handler Initialization
  51:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
  52:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_AIC_ConfigureIt (
  53:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,  // \arg pointer to the AIC registers
  54:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id,     // \arg interrupt number to initialize
  55:./common/lib_AT91SAM7S64.h **** 	unsigned int priority,   // \arg priority to give to the interrupt
  56:./common/lib_AT91SAM7S64.h **** 	unsigned int src_type,   // \arg activation and sense of activation
  57:./common/lib_AT91SAM7S64.h **** 	void (*newHandler) () ) // \arg address of the interrupt handler
  58:./common/lib_AT91SAM7S64.h **** {
  59:./common/lib_AT91SAM7S64.h **** 	unsigned int oldHandler;
  60:./common/lib_AT91SAM7S64.h ****     unsigned int mask ;
  61:./common/lib_AT91SAM7S64.h **** 
  62:./common/lib_AT91SAM7S64.h ****     oldHandler = pAic->AIC_SVR[irq_id];
  63:./common/lib_AT91SAM7S64.h **** 
  64:./common/lib_AT91SAM7S64.h ****     mask = 0x1 << irq_id ;
  65:./common/lib_AT91SAM7S64.h ****     //* Disable the interrupt on the interrupt controller
  66:./common/lib_AT91SAM7S64.h ****     pAic->AIC_IDCR = mask ;
  67:./common/lib_AT91SAM7S64.h ****     //* Save the interrupt handler routine pointer and the interrupt priority
  68:./common/lib_AT91SAM7S64.h ****     pAic->AIC_SVR[irq_id] = (unsigned int) newHandler ;
  69:./common/lib_AT91SAM7S64.h ****     //* Store the Source Mode Register
  70:./common/lib_AT91SAM7S64.h ****     pAic->AIC_SMR[irq_id] = src_type | priority  ;
  71:./common/lib_AT91SAM7S64.h ****     //* Clear the interrupt on the interrupt controller
  72:./common/lib_AT91SAM7S64.h ****     pAic->AIC_ICCR = mask ;
  73:./common/lib_AT91SAM7S64.h **** 
  74:./common/lib_AT91SAM7S64.h **** 	return oldHandler;
  75:./common/lib_AT91SAM7S64.h **** }
  76:./common/lib_AT91SAM7S64.h **** 
  77:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
  78:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_EnableIt
  79:./common/lib_AT91SAM7S64.h **** //* \brief Enable corresponding IT number
  80:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
  81:./common/lib_AT91SAM7S64.h **** __inline void AT91F_AIC_EnableIt (
  82:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,      // \arg pointer to the AIC registers
  83:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id ) // \arg interrupt number to initialize
  84:./common/lib_AT91SAM7S64.h **** {
  85:./common/lib_AT91SAM7S64.h ****     //* Enable the interrupt on the interrupt controller
  86:./common/lib_AT91SAM7S64.h ****     pAic->AIC_IECR = 0x1 << irq_id ;
  87:./common/lib_AT91SAM7S64.h **** }
  88:./common/lib_AT91SAM7S64.h **** 
  89:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
  90:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_DisableIt
  91:./common/lib_AT91SAM7S64.h **** //* \brief Disable corresponding IT number
  92:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
  93:./common/lib_AT91SAM7S64.h **** __inline void AT91F_AIC_DisableIt (
  94:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,      // \arg pointer to the AIC registers
  95:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id ) // \arg interrupt number to initialize
  96:./common/lib_AT91SAM7S64.h **** {
  97:./common/lib_AT91SAM7S64.h ****     unsigned int mask = 0x1 << irq_id;
  98:./common/lib_AT91SAM7S64.h ****     //* Disable the interrupt on the interrupt controller
  99:./common/lib_AT91SAM7S64.h ****     pAic->AIC_IDCR = mask ;
 100:./common/lib_AT91SAM7S64.h ****     //* Clear the interrupt on the Interrupt Controller ( if one is pending )
 101:./common/lib_AT91SAM7S64.h ****     pAic->AIC_ICCR = mask ;
 102:./common/lib_AT91SAM7S64.h **** }
 103:./common/lib_AT91SAM7S64.h **** 
 104:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 105:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_ClearIt
 106:./common/lib_AT91SAM7S64.h **** //* \brief Clear corresponding IT number
 107:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 108:./common/lib_AT91SAM7S64.h **** __inline void AT91F_AIC_ClearIt (
 109:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 110:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id) // \arg interrupt number to initialize
 111:./common/lib_AT91SAM7S64.h **** {
 112:./common/lib_AT91SAM7S64.h ****     //* Clear the interrupt on the Interrupt Controller ( if one is pending )
 113:./common/lib_AT91SAM7S64.h ****     pAic->AIC_ICCR = (0x1 << irq_id);
 114:./common/lib_AT91SAM7S64.h **** }
 115:./common/lib_AT91SAM7S64.h **** 
 116:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 117:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_AcknowledgeIt
 118:./common/lib_AT91SAM7S64.h **** //* \brief Acknowledge corresponding IT number
 119:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 120:./common/lib_AT91SAM7S64.h **** __inline void AT91F_AIC_AcknowledgeIt (
 121:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic)     // \arg pointer to the AIC registers
 122:./common/lib_AT91SAM7S64.h **** {
 123:./common/lib_AT91SAM7S64.h ****     pAic->AIC_EOICR = pAic->AIC_EOICR;
 124:./common/lib_AT91SAM7S64.h **** }
 125:./common/lib_AT91SAM7S64.h **** 
 126:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 127:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_SetExceptionVector
 128:./common/lib_AT91SAM7S64.h **** //* \brief Configure vector handler
 129:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 130:./common/lib_AT91SAM7S64.h **** __inline unsigned int  AT91F_AIC_SetExceptionVector (
 131:./common/lib_AT91SAM7S64.h **** 	unsigned int *pVector, // \arg pointer to the AIC registers
 132:./common/lib_AT91SAM7S64.h **** 	void (*Handler) () )   // \arg Interrupt Handler
 133:./common/lib_AT91SAM7S64.h **** {
 134:./common/lib_AT91SAM7S64.h **** 	unsigned int oldVector = *pVector;
 135:./common/lib_AT91SAM7S64.h **** 
 136:./common/lib_AT91SAM7S64.h **** 	if ((unsigned int) Handler == (unsigned int) AT91C_AIC_BRANCH_OPCODE)
 137:./common/lib_AT91SAM7S64.h **** 		*pVector = (unsigned int) AT91C_AIC_BRANCH_OPCODE;
 138:./common/lib_AT91SAM7S64.h **** 	else
 139:./common/lib_AT91SAM7S64.h **** 		*pVector = (((((unsigned int) Handler) - ((unsigned int) pVector) - 0x8) >> 2) & 0x00FFFFFF) | 0x
 140:./common/lib_AT91SAM7S64.h **** 
 141:./common/lib_AT91SAM7S64.h **** 	return oldVector;
 142:./common/lib_AT91SAM7S64.h **** }
 143:./common/lib_AT91SAM7S64.h **** 
 144:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 145:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_Trig
 146:./common/lib_AT91SAM7S64.h **** //* \brief Trig an IT
 147:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 148:./common/lib_AT91SAM7S64.h **** __inline void  AT91F_AIC_Trig (
 149:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 150:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id) // \arg interrupt number
 151:./common/lib_AT91SAM7S64.h **** {
 152:./common/lib_AT91SAM7S64.h **** 	pAic->AIC_ISCR = (0x1 << irq_id) ;
 153:./common/lib_AT91SAM7S64.h **** }
 154:./common/lib_AT91SAM7S64.h **** 
 155:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 156:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_IsActive
 157:./common/lib_AT91SAM7S64.h **** //* \brief Test if an IT is active
 158:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 159:./common/lib_AT91SAM7S64.h **** __inline unsigned int  AT91F_AIC_IsActive (
 160:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 161:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id) // \arg Interrupt Number
 162:./common/lib_AT91SAM7S64.h **** {
 163:./common/lib_AT91SAM7S64.h **** 	return (pAic->AIC_ISR & (0x1 << irq_id));
 164:./common/lib_AT91SAM7S64.h **** }
 165:./common/lib_AT91SAM7S64.h **** 
 166:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 167:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_IsPending
 168:./common/lib_AT91SAM7S64.h **** //* \brief Test if an IT is pending
 169:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 170:./common/lib_AT91SAM7S64.h **** __inline unsigned int  AT91F_AIC_IsPending (
 171:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 172:./common/lib_AT91SAM7S64.h **** 	unsigned int irq_id) // \arg Interrupt Number
 173:./common/lib_AT91SAM7S64.h **** {
 174:./common/lib_AT91SAM7S64.h **** 	return (pAic->AIC_IPR & (0x1 << irq_id));
 175:./common/lib_AT91SAM7S64.h **** }
 176:./common/lib_AT91SAM7S64.h **** 
 177:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 178:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_AIC_Open
 179:./common/lib_AT91SAM7S64.h **** //* \brief Set exception vectors and AIC registers to default values
 180:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 181:./common/lib_AT91SAM7S64.h **** __inline void AT91F_AIC_Open(
 182:./common/lib_AT91SAM7S64.h **** 	AT91PS_AIC pAic,        // \arg pointer to the AIC registers
 183:./common/lib_AT91SAM7S64.h **** 	void (*IrqHandler) (),  // \arg Default IRQ vector exception
 184:./common/lib_AT91SAM7S64.h **** 	void (*FiqHandler) (),  // \arg Default FIQ vector exception
 185:./common/lib_AT91SAM7S64.h **** 	void (*DefaultHandler)  (), // \arg Default Handler set in ISR
 186:./common/lib_AT91SAM7S64.h **** 	void (*SpuriousHandler) (), // \arg Default Spurious Handler
 187:./common/lib_AT91SAM7S64.h **** 	unsigned int protectMode)   // \arg Debug Control Register
 188:./common/lib_AT91SAM7S64.h **** {
 189:./common/lib_AT91SAM7S64.h **** 	int i;
 190:./common/lib_AT91SAM7S64.h **** 
 191:./common/lib_AT91SAM7S64.h **** 	// Disable all interrupts and set IVR to the default handler
 192:./common/lib_AT91SAM7S64.h **** 	for (i = 0; i < 32; ++i) {
 193:./common/lib_AT91SAM7S64.h **** 		AT91F_AIC_DisableIt(pAic, i);
 194:./common/lib_AT91SAM7S64.h **** 		AT91F_AIC_ConfigureIt(pAic, i, AT91C_AIC_PRIOR_LOWEST, AT91C_AIC_SRCTYPE_HIGH_LEVEL, DefaultHandl
 195:./common/lib_AT91SAM7S64.h **** 	}
 196:./common/lib_AT91SAM7S64.h **** 
 197:./common/lib_AT91SAM7S64.h **** 	// Set the IRQ exception vector
 198:./common/lib_AT91SAM7S64.h **** 	AT91F_AIC_SetExceptionVector((unsigned int *) 0x18, IrqHandler);
 199:./common/lib_AT91SAM7S64.h **** 	// Set the Fast Interrupt exception vector
 200:./common/lib_AT91SAM7S64.h **** 	AT91F_AIC_SetExceptionVector((unsigned int *) 0x1C, FiqHandler);
 201:./common/lib_AT91SAM7S64.h **** 
 202:./common/lib_AT91SAM7S64.h **** 	pAic->AIC_SPU = (unsigned int) SpuriousHandler;
 203:./common/lib_AT91SAM7S64.h **** 	pAic->AIC_DCR = protectMode;
 204:./common/lib_AT91SAM7S64.h **** }
 205:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
 206:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR PDC
 207:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
 208:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 209:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_SetNextRx
 210:./common/lib_AT91SAM7S64.h **** //* \brief Set the next receive transfer descriptor
 211:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 212:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_SetNextRx (
 213:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC,     // \arg pointer to a PDC controller
 214:./common/lib_AT91SAM7S64.h **** 	char *address,       // \arg address to the next bloc to be received
 215:./common/lib_AT91SAM7S64.h **** 	unsigned int bytes)  // \arg number of bytes to be received
 216:./common/lib_AT91SAM7S64.h **** {
 217:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_RNPR = (unsigned int) address;
 218:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_RNCR = bytes;
 219:./common/lib_AT91SAM7S64.h **** }
 220:./common/lib_AT91SAM7S64.h **** 
 221:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 222:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_SetNextTx
 223:./common/lib_AT91SAM7S64.h **** //* \brief Set the next transmit transfer descriptor
 224:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 225:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_SetNextTx (
 226:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC,       // \arg pointer to a PDC controller
 227:./common/lib_AT91SAM7S64.h **** 	char *address,         // \arg address to the next bloc to be transmitted
 228:./common/lib_AT91SAM7S64.h **** 	unsigned int bytes)    // \arg number of bytes to be transmitted
 229:./common/lib_AT91SAM7S64.h **** {
 230:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_TNPR = (unsigned int) address;
 231:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_TNCR = bytes;
 232:./common/lib_AT91SAM7S64.h **** }
 233:./common/lib_AT91SAM7S64.h **** 
 234:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 235:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_SetRx
 236:./common/lib_AT91SAM7S64.h **** //* \brief Set the receive transfer descriptor
 237:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 238:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_SetRx (
 239:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC,       // \arg pointer to a PDC controller
 240:./common/lib_AT91SAM7S64.h **** 	char *address,         // \arg address to the next bloc to be received
 241:./common/lib_AT91SAM7S64.h **** 	unsigned int bytes)    // \arg number of bytes to be received
 242:./common/lib_AT91SAM7S64.h **** {
 243:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_RPR = (unsigned int) address;
 244:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_RCR = bytes;
 245:./common/lib_AT91SAM7S64.h **** }
 246:./common/lib_AT91SAM7S64.h **** 
 247:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 248:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_SetTx
 249:./common/lib_AT91SAM7S64.h **** //* \brief Set the transmit transfer descriptor
 250:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 251:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_SetTx (
 252:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC,       // \arg pointer to a PDC controller
 253:./common/lib_AT91SAM7S64.h **** 	char *address,         // \arg address to the next bloc to be transmitted
 254:./common/lib_AT91SAM7S64.h **** 	unsigned int bytes)    // \arg number of bytes to be transmitted
 255:./common/lib_AT91SAM7S64.h **** {
 256:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_TPR = (unsigned int) address;
 257:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_TCR = bytes;
 258:./common/lib_AT91SAM7S64.h **** }
 259:./common/lib_AT91SAM7S64.h **** 
 260:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 261:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_EnableTx
 262:./common/lib_AT91SAM7S64.h **** //* \brief Enable transmit
 263:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 264:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_EnableTx (
 265:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 266:./common/lib_AT91SAM7S64.h **** {
 267:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_PTCR = AT91C_PDC_TXTEN;
 268:./common/lib_AT91SAM7S64.h **** }
 269:./common/lib_AT91SAM7S64.h **** 
 270:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 271:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_EnableRx
 272:./common/lib_AT91SAM7S64.h **** //* \brief Enable receive
 273:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 274:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_EnableRx (
 275:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 276:./common/lib_AT91SAM7S64.h **** {
 277:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_PTCR = AT91C_PDC_RXTEN;
 278:./common/lib_AT91SAM7S64.h **** }
 279:./common/lib_AT91SAM7S64.h **** 
 280:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 281:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_DisableTx
 282:./common/lib_AT91SAM7S64.h **** //* \brief Disable transmit
 283:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 284:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_DisableTx (
 285:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 286:./common/lib_AT91SAM7S64.h **** {
 287:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_PTCR = AT91C_PDC_TXTDIS;
 288:./common/lib_AT91SAM7S64.h **** }
 289:./common/lib_AT91SAM7S64.h **** 
 290:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 291:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_DisableRx
 292:./common/lib_AT91SAM7S64.h **** //* \brief Disable receive
 293:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 294:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_DisableRx (
 295:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 296:./common/lib_AT91SAM7S64.h **** {
 297:./common/lib_AT91SAM7S64.h **** 	pPDC->PDC_PTCR = AT91C_PDC_RXTDIS;
 298:./common/lib_AT91SAM7S64.h **** }
 299:./common/lib_AT91SAM7S64.h **** 
 300:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 301:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_IsTxEmpty
 302:./common/lib_AT91SAM7S64.h **** //* \brief Test if the current transfer descriptor has been sent
 303:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 304:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PDC_IsTxEmpty ( // \return return 1 if transfer is complete
 305:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 306:./common/lib_AT91SAM7S64.h **** {
 307:./common/lib_AT91SAM7S64.h **** 	return !(pPDC->PDC_TCR);
 308:./common/lib_AT91SAM7S64.h **** }
 309:./common/lib_AT91SAM7S64.h **** 
 310:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 311:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_IsNextTxEmpty
 312:./common/lib_AT91SAM7S64.h **** //* \brief Test if the next transfer descriptor has been moved to the current td
 313:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 314:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PDC_IsNextTxEmpty ( // \return return 1 if transfer is complete
 315:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 316:./common/lib_AT91SAM7S64.h **** {
 317:./common/lib_AT91SAM7S64.h **** 	return !(pPDC->PDC_TNCR);
 318:./common/lib_AT91SAM7S64.h **** }
 319:./common/lib_AT91SAM7S64.h **** 
 320:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 321:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_IsRxEmpty
 322:./common/lib_AT91SAM7S64.h **** //* \brief Test if the current transfer descriptor has been filled
 323:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 324:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PDC_IsRxEmpty ( // \return return 1 if transfer is complete
 325:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 326:./common/lib_AT91SAM7S64.h **** {
 327:./common/lib_AT91SAM7S64.h **** 	return !(pPDC->PDC_RCR);
 328:./common/lib_AT91SAM7S64.h **** }
 329:./common/lib_AT91SAM7S64.h **** 
 330:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 331:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_IsNextRxEmpty
 332:./common/lib_AT91SAM7S64.h **** //* \brief Test if the next transfer descriptor has been moved to the current td
 333:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 334:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PDC_IsNextRxEmpty ( // \return return 1 if transfer is complete
 335:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 336:./common/lib_AT91SAM7S64.h **** {
 337:./common/lib_AT91SAM7S64.h **** 	return !(pPDC->PDC_RNCR);
 338:./common/lib_AT91SAM7S64.h **** }
 339:./common/lib_AT91SAM7S64.h **** 
 340:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 341:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_Open
 342:./common/lib_AT91SAM7S64.h **** //* \brief Open PDC: disable TX and RX reset transfer descriptors, re-enable RX and TX
 343:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 344:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_Open (
 345:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC)       // \arg pointer to a PDC controller
 346:./common/lib_AT91SAM7S64.h **** {
 347:./common/lib_AT91SAM7S64.h ****     //* Disable the RX and TX PDC transfer requests
 348:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_DisableRx(pPDC);
 349:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_DisableTx(pPDC);
 350:./common/lib_AT91SAM7S64.h **** 
 351:./common/lib_AT91SAM7S64.h **** 	//* Reset all Counter register Next buffer first
 352:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetNextTx(pPDC, (char *) 0, 0);
 353:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetNextRx(pPDC, (char *) 0, 0);
 354:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetTx(pPDC, (char *) 0, 0);
 355:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetRx(pPDC, (char *) 0, 0);
 356:./common/lib_AT91SAM7S64.h **** 
 357:./common/lib_AT91SAM7S64.h ****     //* Enable the RX and TX PDC transfer requests
 358:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_EnableRx(pPDC);
 359:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_EnableTx(pPDC);
 360:./common/lib_AT91SAM7S64.h **** }
 361:./common/lib_AT91SAM7S64.h **** 
 362:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 363:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_Close
 364:./common/lib_AT91SAM7S64.h **** //* \brief Close PDC: disable TX and RX reset transfer descriptors
 365:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 366:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PDC_Close (
 367:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC)       // \arg pointer to a PDC controller
 368:./common/lib_AT91SAM7S64.h **** {
 369:./common/lib_AT91SAM7S64.h ****     //* Disable the RX and TX PDC transfer requests
 370:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_DisableRx(pPDC);
 371:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_DisableTx(pPDC);
 372:./common/lib_AT91SAM7S64.h **** 
 373:./common/lib_AT91SAM7S64.h **** 	//* Reset all Counter register Next buffer first
 374:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetNextTx(pPDC, (char *) 0, 0);
 375:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetNextRx(pPDC, (char *) 0, 0);
 376:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetTx(pPDC, (char *) 0, 0);
 377:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_SetRx(pPDC, (char *) 0, 0);
 378:./common/lib_AT91SAM7S64.h **** 
 379:./common/lib_AT91SAM7S64.h **** }
 380:./common/lib_AT91SAM7S64.h **** 
 381:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 382:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_SendFrame
 383:./common/lib_AT91SAM7S64.h **** //* \brief Close PDC: disable TX and RX reset transfer descriptors
 384:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 385:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PDC_SendFrame(
 386:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC,
 387:./common/lib_AT91SAM7S64.h **** 	char *pBuffer,
 388:./common/lib_AT91SAM7S64.h **** 	unsigned int szBuffer,
 389:./common/lib_AT91SAM7S64.h **** 	char *pNextBuffer,
 390:./common/lib_AT91SAM7S64.h **** 	unsigned int szNextBuffer )
 391:./common/lib_AT91SAM7S64.h **** {
 392:./common/lib_AT91SAM7S64.h **** 	if (AT91F_PDC_IsTxEmpty(pPDC)) {
 393:./common/lib_AT91SAM7S64.h **** 		//* Buffer and next buffer can be initialized
 394:./common/lib_AT91SAM7S64.h **** 		AT91F_PDC_SetTx(pPDC, pBuffer, szBuffer);
 395:./common/lib_AT91SAM7S64.h **** 		AT91F_PDC_SetNextTx(pPDC, pNextBuffer, szNextBuffer);
 396:./common/lib_AT91SAM7S64.h **** 		return 2;
 397:./common/lib_AT91SAM7S64.h **** 	}
 398:./common/lib_AT91SAM7S64.h **** 	else if (AT91F_PDC_IsNextTxEmpty(pPDC)) {
 399:./common/lib_AT91SAM7S64.h **** 		//* Only one buffer can be initialized
 400:./common/lib_AT91SAM7S64.h **** 		AT91F_PDC_SetNextTx(pPDC, pBuffer, szBuffer);
 401:./common/lib_AT91SAM7S64.h **** 		return 1;
 402:./common/lib_AT91SAM7S64.h **** 	}
 403:./common/lib_AT91SAM7S64.h **** 	else {
 404:./common/lib_AT91SAM7S64.h **** 		//* All buffer are in use...
 405:./common/lib_AT91SAM7S64.h **** 		return 0;
 406:./common/lib_AT91SAM7S64.h **** 	}
 407:./common/lib_AT91SAM7S64.h **** }
 408:./common/lib_AT91SAM7S64.h **** 
 409:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 410:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PDC_ReceiveFrame
 411:./common/lib_AT91SAM7S64.h **** //* \brief Close PDC: disable TX and RX reset transfer descriptors
 412:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 413:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PDC_ReceiveFrame (
 414:./common/lib_AT91SAM7S64.h **** 	AT91PS_PDC pPDC,
 415:./common/lib_AT91SAM7S64.h **** 	char *pBuffer,
 416:./common/lib_AT91SAM7S64.h **** 	unsigned int szBuffer,
 417:./common/lib_AT91SAM7S64.h **** 	char *pNextBuffer,
 418:./common/lib_AT91SAM7S64.h **** 	unsigned int szNextBuffer )
 419:./common/lib_AT91SAM7S64.h **** {
 420:./common/lib_AT91SAM7S64.h **** 	if (AT91F_PDC_IsRxEmpty(pPDC)) {
 421:./common/lib_AT91SAM7S64.h **** 		//* Buffer and next buffer can be initialized
 422:./common/lib_AT91SAM7S64.h **** 		AT91F_PDC_SetRx(pPDC, pBuffer, szBuffer);
 423:./common/lib_AT91SAM7S64.h **** 		AT91F_PDC_SetNextRx(pPDC, pNextBuffer, szNextBuffer);
 424:./common/lib_AT91SAM7S64.h **** 		return 2;
 425:./common/lib_AT91SAM7S64.h **** 	}
 426:./common/lib_AT91SAM7S64.h **** 	else if (AT91F_PDC_IsNextRxEmpty(pPDC)) {
 427:./common/lib_AT91SAM7S64.h **** 		//* Only one buffer can be initialized
 428:./common/lib_AT91SAM7S64.h **** 		AT91F_PDC_SetNextRx(pPDC, pBuffer, szBuffer);
 429:./common/lib_AT91SAM7S64.h **** 		return 1;
 430:./common/lib_AT91SAM7S64.h **** 	}
 431:./common/lib_AT91SAM7S64.h **** 	else {
 432:./common/lib_AT91SAM7S64.h **** 		//* All buffer are in use...
 433:./common/lib_AT91SAM7S64.h **** 		return 0;
 434:./common/lib_AT91SAM7S64.h **** 	}
 435:./common/lib_AT91SAM7S64.h **** }
 436:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
 437:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR DBGU
 438:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
 439:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 440:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_DBGU_InterruptEnable
 441:./common/lib_AT91SAM7S64.h **** //* \brief Enable DBGU Interrupt
 442:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 443:./common/lib_AT91SAM7S64.h **** __inline void AT91F_DBGU_InterruptEnable(
 444:./common/lib_AT91SAM7S64.h ****         AT91PS_DBGU pDbgu,   // \arg  pointer to a DBGU controller
 445:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  dbgu interrupt to be enabled
 446:./common/lib_AT91SAM7S64.h **** {
 447:./common/lib_AT91SAM7S64.h ****         pDbgu->DBGU_IER = flag;
 448:./common/lib_AT91SAM7S64.h **** }
 449:./common/lib_AT91SAM7S64.h **** 
 450:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 451:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_DBGU_InterruptDisable
 452:./common/lib_AT91SAM7S64.h **** //* \brief Disable DBGU Interrupt
 453:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 454:./common/lib_AT91SAM7S64.h **** __inline void AT91F_DBGU_InterruptDisable(
 455:./common/lib_AT91SAM7S64.h ****         AT91PS_DBGU pDbgu,   // \arg  pointer to a DBGU controller
 456:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  dbgu interrupt to be disabled
 457:./common/lib_AT91SAM7S64.h **** {
 458:./common/lib_AT91SAM7S64.h ****         pDbgu->DBGU_IDR = flag;
 459:./common/lib_AT91SAM7S64.h **** }
 460:./common/lib_AT91SAM7S64.h **** 
 461:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 462:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_DBGU_GetInterruptMaskStatus
 463:./common/lib_AT91SAM7S64.h **** //* \brief Return DBGU Interrupt Mask Status
 464:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 465:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_DBGU_GetInterruptMaskStatus( // \return DBGU Interrupt Mask Status
 466:./common/lib_AT91SAM7S64.h ****         AT91PS_DBGU pDbgu) // \arg  pointer to a DBGU controller
 467:./common/lib_AT91SAM7S64.h **** {
 468:./common/lib_AT91SAM7S64.h ****         return pDbgu->DBGU_IMR;
 469:./common/lib_AT91SAM7S64.h **** }
 470:./common/lib_AT91SAM7S64.h **** 
 471:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 472:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_DBGU_IsInterruptMasked
 473:./common/lib_AT91SAM7S64.h **** //* \brief Test if DBGU Interrupt is Masked 
 474:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 475:./common/lib_AT91SAM7S64.h **** __inline int AT91F_DBGU_IsInterruptMasked(
 476:./common/lib_AT91SAM7S64.h ****         AT91PS_DBGU pDbgu,   // \arg  pointer to a DBGU controller
 477:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 478:./common/lib_AT91SAM7S64.h **** {
 479:./common/lib_AT91SAM7S64.h ****         return (AT91F_DBGU_GetInterruptMaskStatus(pDbgu) & flag);
 480:./common/lib_AT91SAM7S64.h **** }
 481:./common/lib_AT91SAM7S64.h **** 
 482:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
 483:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR PIO
 484:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
 485:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 486:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgPeriph
 487:./common/lib_AT91SAM7S64.h **** //* \brief Enable pins to be drived by peripheral
 488:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 489:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgPeriph(
 490:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 491:./common/lib_AT91SAM7S64.h **** 	unsigned int periphAEnable,  // \arg PERIPH A to enable
 492:./common/lib_AT91SAM7S64.h **** 	unsigned int periphBEnable)  // \arg PERIPH B to enable
 493:./common/lib_AT91SAM7S64.h **** 
 494:./common/lib_AT91SAM7S64.h **** {
 495:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_ASR = periphAEnable;
 496:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_BSR = periphBEnable;
 497:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_PDR = (periphAEnable | periphBEnable); // Set in Periph mode
 498:./common/lib_AT91SAM7S64.h **** }
 499:./common/lib_AT91SAM7S64.h **** 
 500:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 501:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgOutput
 502:./common/lib_AT91SAM7S64.h **** //* \brief Enable PIO in output mode
 503:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 504:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgOutput(
 505:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 506:./common/lib_AT91SAM7S64.h **** 	unsigned int pioEnable)      // \arg PIO to be enabled
 507:./common/lib_AT91SAM7S64.h **** {
 508:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_PER = pioEnable; // Set in PIO mode
 509:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_OER = pioEnable; // Configure in Output
 510:./common/lib_AT91SAM7S64.h **** }
 511:./common/lib_AT91SAM7S64.h **** 
 512:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 513:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgInput
 514:./common/lib_AT91SAM7S64.h **** //* \brief Enable PIO in input mode
 515:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 516:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgInput(
 517:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 518:./common/lib_AT91SAM7S64.h **** 	unsigned int inputEnable)      // \arg PIO to be enabled
 519:./common/lib_AT91SAM7S64.h **** {
 520:./common/lib_AT91SAM7S64.h **** 	// Disable output
 521:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_ODR  = inputEnable;
 522:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_PER  = inputEnable;
 523:./common/lib_AT91SAM7S64.h **** }
 524:./common/lib_AT91SAM7S64.h **** 
 525:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 526:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgOpendrain
 527:./common/lib_AT91SAM7S64.h **** //* \brief Configure PIO in open drain
 528:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 529:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgOpendrain(
 530:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 531:./common/lib_AT91SAM7S64.h **** 	unsigned int multiDrvEnable) // \arg pio to be configured in open drain
 532:./common/lib_AT91SAM7S64.h **** {
 533:./common/lib_AT91SAM7S64.h **** 	// Configure the multi-drive option
 534:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_MDDR = ~multiDrvEnable;
 535:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_MDER = multiDrvEnable;
 536:./common/lib_AT91SAM7S64.h **** }
 537:./common/lib_AT91SAM7S64.h **** 
 538:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 539:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgPullup
 540:./common/lib_AT91SAM7S64.h **** //* \brief Enable pullup on PIO
 541:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 542:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgPullup(
 543:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 544:./common/lib_AT91SAM7S64.h **** 	unsigned int pullupEnable)   // \arg enable pullup on PIO
 545:./common/lib_AT91SAM7S64.h **** {
 546:./common/lib_AT91SAM7S64.h **** 		// Connect or not Pullup
 547:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_PPUDR = ~pullupEnable;
 548:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_PPUER = pullupEnable;
 549:./common/lib_AT91SAM7S64.h **** }
 550:./common/lib_AT91SAM7S64.h **** 
 551:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 552:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgDirectDrive
 553:./common/lib_AT91SAM7S64.h **** //* \brief Enable direct drive on PIO
 554:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 555:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgDirectDrive(
 556:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 557:./common/lib_AT91SAM7S64.h **** 	unsigned int directDrive)    // \arg PIO to be configured with direct drive
 558:./common/lib_AT91SAM7S64.h **** 
 559:./common/lib_AT91SAM7S64.h **** {
 560:./common/lib_AT91SAM7S64.h **** 	// Configure the Direct Drive
 561:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_OWDR  = ~directDrive;
 562:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_OWER  = directDrive;
 563:./common/lib_AT91SAM7S64.h **** }
 564:./common/lib_AT91SAM7S64.h **** 
 565:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 566:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_CfgInputFilter
 567:./common/lib_AT91SAM7S64.h **** //* \brief Enable input filter on input PIO
 568:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 569:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_CfgInputFilter(
 570:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 571:./common/lib_AT91SAM7S64.h **** 	unsigned int inputFilter)    // \arg PIO to be configured with input filter
 572:./common/lib_AT91SAM7S64.h **** 
 573:./common/lib_AT91SAM7S64.h **** {
 574:./common/lib_AT91SAM7S64.h **** 	// Configure the Direct Drive
 575:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_IFDR  = ~inputFilter;
 576:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_IFER  = inputFilter;
 577:./common/lib_AT91SAM7S64.h **** }
 578:./common/lib_AT91SAM7S64.h **** 
 579:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 580:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetInput
 581:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO input value
 582:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 583:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetInput( // \return PIO input
 584:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 585:./common/lib_AT91SAM7S64.h **** {
 586:./common/lib_AT91SAM7S64.h **** 	return pPio->PIO_PDSR;
 587:./common/lib_AT91SAM7S64.h **** }
 588:./common/lib_AT91SAM7S64.h **** 
 589:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 590:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsInputSet
 591:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO is input flag is active
 592:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 593:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsInputSet(
 594:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 595:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // \arg  flag to be tested
 596:./common/lib_AT91SAM7S64.h **** {
 597:./common/lib_AT91SAM7S64.h **** 	return (AT91F_PIO_GetInput(pPio) & flag);
 598:./common/lib_AT91SAM7S64.h **** }
 599:./common/lib_AT91SAM7S64.h **** 
 600:./common/lib_AT91SAM7S64.h **** 
 601:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 602:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_SetOutput
 603:./common/lib_AT91SAM7S64.h **** //* \brief Set to 1 output PIO
 604:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 605:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_SetOutput(
 606:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 607:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // \arg  output to be set
 608:./common/lib_AT91SAM7S64.h **** {
 609:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_SODR = flag;
 610:./common/lib_AT91SAM7S64.h **** }
 611:./common/lib_AT91SAM7S64.h **** 
 612:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 613:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_ClearOutput
 614:./common/lib_AT91SAM7S64.h **** //* \brief Set to 0 output PIO
 615:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 616:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_ClearOutput(
 617:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 618:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // \arg  output to be cleared
 619:./common/lib_AT91SAM7S64.h **** {
 620:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_CODR = flag;
 621:./common/lib_AT91SAM7S64.h **** }
 622:./common/lib_AT91SAM7S64.h **** 
 623:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 624:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_ForceOutput
 625:./common/lib_AT91SAM7S64.h **** //* \brief Force output when Direct drive option is enabled
 626:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 627:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_ForceOutput(
 628:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 629:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // \arg  output to be forced
 630:./common/lib_AT91SAM7S64.h **** {
 631:./common/lib_AT91SAM7S64.h **** 	pPio->PIO_ODSR = flag;
 632:./common/lib_AT91SAM7S64.h **** }
 633:./common/lib_AT91SAM7S64.h **** 
 634:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 635:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_Enable
 636:./common/lib_AT91SAM7S64.h **** //* \brief Enable PIO
 637:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 638:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_Enable(
 639:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 640:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio to be enabled 
 641:./common/lib_AT91SAM7S64.h **** {
 642:./common/lib_AT91SAM7S64.h ****         pPio->PIO_PER = flag;
 643:./common/lib_AT91SAM7S64.h **** }
 644:./common/lib_AT91SAM7S64.h **** 
 645:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 646:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_Disable
 647:./common/lib_AT91SAM7S64.h **** //* \brief Disable PIO
 648:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 649:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_Disable(
 650:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 651:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio to be disabled 
 652:./common/lib_AT91SAM7S64.h **** {
 653:./common/lib_AT91SAM7S64.h ****         pPio->PIO_PDR = flag;
 654:./common/lib_AT91SAM7S64.h **** }
 655:./common/lib_AT91SAM7S64.h **** 
 656:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 657:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetStatus
 658:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Status
 659:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 660:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetStatus( // \return PIO Status
 661:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 662:./common/lib_AT91SAM7S64.h **** {
 663:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_PSR;
 664:./common/lib_AT91SAM7S64.h **** }
 665:./common/lib_AT91SAM7S64.h **** 
 666:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 667:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsSet
 668:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO is Set
 669:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 670:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsSet(
 671:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 672:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 673:./common/lib_AT91SAM7S64.h **** {
 674:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetStatus(pPio) & flag);
 675:./common/lib_AT91SAM7S64.h **** }
 676:./common/lib_AT91SAM7S64.h **** 
 677:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 678:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_OutputEnable
 679:./common/lib_AT91SAM7S64.h **** //* \brief Output Enable PIO
 680:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 681:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_OutputEnable(
 682:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 683:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio output to be enabled
 684:./common/lib_AT91SAM7S64.h **** {
 685:./common/lib_AT91SAM7S64.h ****         pPio->PIO_OER = flag;
 686:./common/lib_AT91SAM7S64.h **** }
 687:./common/lib_AT91SAM7S64.h **** 
 688:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 689:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_OutputDisable
 690:./common/lib_AT91SAM7S64.h **** //* \brief Output Enable PIO
 691:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 692:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_OutputDisable(
 693:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 694:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio output to be disabled
 695:./common/lib_AT91SAM7S64.h **** {
 696:./common/lib_AT91SAM7S64.h ****         pPio->PIO_ODR = flag;
 697:./common/lib_AT91SAM7S64.h **** }
 698:./common/lib_AT91SAM7S64.h **** 
 699:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 700:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetOutputStatus
 701:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Output Status
 702:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 703:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetOutputStatus( // \return PIO Output Status
 704:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 705:./common/lib_AT91SAM7S64.h **** {
 706:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_OSR;
 707:./common/lib_AT91SAM7S64.h **** }
 708:./common/lib_AT91SAM7S64.h **** 
 709:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 710:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsOuputSet
 711:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO Output is Set
 712:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 713:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsOutputSet(
 714:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 715:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 716:./common/lib_AT91SAM7S64.h **** {
 717:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetOutputStatus(pPio) & flag);
 718:./common/lib_AT91SAM7S64.h **** }
 719:./common/lib_AT91SAM7S64.h **** 
 720:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 721:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_InputFilterEnable
 722:./common/lib_AT91SAM7S64.h **** //* \brief Input Filter Enable PIO
 723:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 724:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_InputFilterEnable(
 725:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 726:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio input filter to be enabled
 727:./common/lib_AT91SAM7S64.h **** {
 728:./common/lib_AT91SAM7S64.h ****         pPio->PIO_IFER = flag;
 729:./common/lib_AT91SAM7S64.h **** }
 730:./common/lib_AT91SAM7S64.h **** 
 731:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 732:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_InputFilterDisable
 733:./common/lib_AT91SAM7S64.h **** //* \brief Input Filter Disable PIO
 734:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 735:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_InputFilterDisable(
 736:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 737:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio input filter to be disabled
 738:./common/lib_AT91SAM7S64.h **** {
 739:./common/lib_AT91SAM7S64.h ****         pPio->PIO_IFDR = flag;
 740:./common/lib_AT91SAM7S64.h **** }
 741:./common/lib_AT91SAM7S64.h **** 
 742:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 743:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetInputFilterStatus
 744:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Input Filter Status
 745:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 746:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetInputFilterStatus( // \return PIO Input Filter Status
 747:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 748:./common/lib_AT91SAM7S64.h **** {
 749:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_IFSR;
 750:./common/lib_AT91SAM7S64.h **** }
 751:./common/lib_AT91SAM7S64.h **** 
 752:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 753:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsInputFilterSet
 754:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO Input filter is Set
 755:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 756:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsInputFilterSet(
 757:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 758:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 759:./common/lib_AT91SAM7S64.h **** {
 760:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetInputFilterStatus(pPio) & flag);
 761:./common/lib_AT91SAM7S64.h **** }
 762:./common/lib_AT91SAM7S64.h **** 
 763:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 764:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetOutputDataStatus
 765:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Output Data Status 
 766:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 767:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetOutputDataStatus( // \return PIO Output Data Status 
 768:./common/lib_AT91SAM7S64.h **** 	AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 769:./common/lib_AT91SAM7S64.h **** {
 770:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_ODSR;
 771:./common/lib_AT91SAM7S64.h **** }
 772:./common/lib_AT91SAM7S64.h **** 
 773:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 774:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_InterruptEnable
 775:./common/lib_AT91SAM7S64.h **** //* \brief Enable PIO Interrupt
 776:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 777:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_InterruptEnable(
 778:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 779:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio interrupt to be enabled
 780:./common/lib_AT91SAM7S64.h **** {
 781:./common/lib_AT91SAM7S64.h ****         pPio->PIO_IER = flag;
 782:./common/lib_AT91SAM7S64.h **** }
 783:./common/lib_AT91SAM7S64.h **** 
 784:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 785:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_InterruptDisable
 786:./common/lib_AT91SAM7S64.h **** //* \brief Disable PIO Interrupt
 787:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 788:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_InterruptDisable(
 789:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 790:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio interrupt to be disabled
 791:./common/lib_AT91SAM7S64.h **** {
 792:./common/lib_AT91SAM7S64.h ****         pPio->PIO_IDR = flag;
 793:./common/lib_AT91SAM7S64.h **** }
 794:./common/lib_AT91SAM7S64.h **** 
 795:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 796:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetInterruptMaskStatus
 797:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Interrupt Mask Status
 798:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 799:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetInterruptMaskStatus( // \return PIO Interrupt Mask Status
 800:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 801:./common/lib_AT91SAM7S64.h **** {
 802:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_IMR;
 803:./common/lib_AT91SAM7S64.h **** }
 804:./common/lib_AT91SAM7S64.h **** 
 805:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 806:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetInterruptStatus
 807:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Interrupt Status
 808:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 809:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetInterruptStatus( // \return PIO Interrupt Status
 810:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 811:./common/lib_AT91SAM7S64.h **** {
 812:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_ISR;
 813:./common/lib_AT91SAM7S64.h **** }
 814:./common/lib_AT91SAM7S64.h **** 
 815:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 816:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsInterruptMasked
 817:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO Interrupt is Masked 
 818:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 819:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsInterruptMasked(
 820:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 821:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 822:./common/lib_AT91SAM7S64.h **** {
 823:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetInterruptMaskStatus(pPio) & flag);
 824:./common/lib_AT91SAM7S64.h **** }
 825:./common/lib_AT91SAM7S64.h **** 
 826:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 827:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsInterruptSet
 828:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO Interrupt is Set
 829:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 830:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsInterruptSet(
 831:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 832:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 833:./common/lib_AT91SAM7S64.h **** {
 834:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetInterruptStatus(pPio) & flag);
 835:./common/lib_AT91SAM7S64.h **** }
 836:./common/lib_AT91SAM7S64.h **** 
 837:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 838:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_MultiDriverEnable
 839:./common/lib_AT91SAM7S64.h **** //* \brief Multi Driver Enable PIO
 840:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 841:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_MultiDriverEnable(
 842:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 843:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio to be enabled
 844:./common/lib_AT91SAM7S64.h **** {
 845:./common/lib_AT91SAM7S64.h ****         pPio->PIO_MDER = flag;
 846:./common/lib_AT91SAM7S64.h **** }
 847:./common/lib_AT91SAM7S64.h **** 
 848:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 849:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_MultiDriverDisable
 850:./common/lib_AT91SAM7S64.h **** //* \brief Multi Driver Disable PIO
 851:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 852:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_MultiDriverDisable(
 853:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 854:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio to be disabled
 855:./common/lib_AT91SAM7S64.h **** {
 856:./common/lib_AT91SAM7S64.h ****         pPio->PIO_MDDR = flag;
 857:./common/lib_AT91SAM7S64.h **** }
 858:./common/lib_AT91SAM7S64.h **** 
 859:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 860:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetMultiDriverStatus
 861:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Multi Driver Status
 862:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 863:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetMultiDriverStatus( // \return PIO Multi Driver Status
 864:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 865:./common/lib_AT91SAM7S64.h **** {
 866:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_MDSR;
 867:./common/lib_AT91SAM7S64.h **** }
 868:./common/lib_AT91SAM7S64.h **** 
 869:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 870:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsMultiDriverSet
 871:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO MultiDriver is Set
 872:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 873:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsMultiDriverSet(
 874:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 875:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 876:./common/lib_AT91SAM7S64.h **** {
 877:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetMultiDriverStatus(pPio) & flag);
 878:./common/lib_AT91SAM7S64.h **** }
 879:./common/lib_AT91SAM7S64.h **** 
 880:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 881:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_A_RegisterSelection
 882:./common/lib_AT91SAM7S64.h **** //* \brief PIO A Register Selection 
 883:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 884:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_A_RegisterSelection(
 885:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 886:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio A register selection
 887:./common/lib_AT91SAM7S64.h **** {
 888:./common/lib_AT91SAM7S64.h ****         pPio->PIO_ASR = flag;
 889:./common/lib_AT91SAM7S64.h **** }
 890:./common/lib_AT91SAM7S64.h **** 
 891:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 892:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_B_RegisterSelection
 893:./common/lib_AT91SAM7S64.h **** //* \brief PIO B Register Selection 
 894:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 895:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_B_RegisterSelection(
 896:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 897:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio B register selection 
 898:./common/lib_AT91SAM7S64.h **** {
 899:./common/lib_AT91SAM7S64.h ****         pPio->PIO_BSR = flag;
 900:./common/lib_AT91SAM7S64.h **** }
 901:./common/lib_AT91SAM7S64.h **** 
 902:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 903:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_Get_AB_RegisterStatus
 904:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Interrupt Status
 905:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 906:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_Get_AB_RegisterStatus( // \return PIO AB Register Status
 907:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 908:./common/lib_AT91SAM7S64.h **** {
 909:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_ABSR;
 910:./common/lib_AT91SAM7S64.h **** }
 911:./common/lib_AT91SAM7S64.h **** 
 912:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 913:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsAB_RegisterSet
 914:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO AB Register is Set
 915:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 916:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsAB_RegisterSet(
 917:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 918:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 919:./common/lib_AT91SAM7S64.h **** {
 920:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_Get_AB_RegisterStatus(pPio) & flag);
 921:./common/lib_AT91SAM7S64.h **** }
 922:./common/lib_AT91SAM7S64.h **** 
 923:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 924:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_OutputWriteEnable
 925:./common/lib_AT91SAM7S64.h **** //* \brief Output Write Enable PIO
 926:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 927:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_OutputWriteEnable(
 928:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 929:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio output write to be enabled
 930:./common/lib_AT91SAM7S64.h **** {
 931:./common/lib_AT91SAM7S64.h ****         pPio->PIO_OWER = flag;
 932:./common/lib_AT91SAM7S64.h **** }
 933:./common/lib_AT91SAM7S64.h **** 
 934:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 935:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_OutputWriteDisable
 936:./common/lib_AT91SAM7S64.h **** //* \brief Output Write Disable PIO
 937:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 938:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PIO_OutputWriteDisable(
 939:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 940:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  pio output write to be disabled
 941:./common/lib_AT91SAM7S64.h **** {
 942:./common/lib_AT91SAM7S64.h ****         pPio->PIO_OWDR = flag;
 943:./common/lib_AT91SAM7S64.h **** }
 944:./common/lib_AT91SAM7S64.h **** 
 945:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 946:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetOutputWriteStatus
 947:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Output Write Status
 948:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 949:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetOutputWriteStatus( // \return PIO Output Write Status
 950:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 951:./common/lib_AT91SAM7S64.h **** {
 952:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_OWSR;
 953:./common/lib_AT91SAM7S64.h **** }
 954:./common/lib_AT91SAM7S64.h **** 
 955:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 956:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsOutputWriteSet
 957:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO OutputWrite is Set
 958:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 959:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsOutputWriteSet(
 960:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 961:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 962:./common/lib_AT91SAM7S64.h **** {
 963:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetOutputWriteStatus(pPio) & flag);
 964:./common/lib_AT91SAM7S64.h **** }
 965:./common/lib_AT91SAM7S64.h **** 
 966:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 967:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_GetCfgPullup
 968:./common/lib_AT91SAM7S64.h **** //* \brief Return PIO Configuration Pullup
 969:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 970:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PIO_GetCfgPullup( // \return PIO Configuration Pullup 
 971:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 972:./common/lib_AT91SAM7S64.h **** {
 973:./common/lib_AT91SAM7S64.h ****         return pPio->PIO_PPUSR;
 974:./common/lib_AT91SAM7S64.h **** }
 975:./common/lib_AT91SAM7S64.h **** 
 976:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 977:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsOutputDataStatusSet
 978:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO Output Data Status is Set 
 979:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 980:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsOutputDataStatusSet(
 981:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 982:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 983:./common/lib_AT91SAM7S64.h **** {
 984:./common/lib_AT91SAM7S64.h ****         return (AT91F_PIO_GetOutputDataStatus(pPio) & flag);
 985:./common/lib_AT91SAM7S64.h **** }
 986:./common/lib_AT91SAM7S64.h **** 
 987:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 988:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PIO_IsCfgPullupStatusSet
 989:./common/lib_AT91SAM7S64.h **** //* \brief Test if PIO Configuration Pullup Status is Set
 990:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
 991:./common/lib_AT91SAM7S64.h **** __inline int AT91F_PIO_IsCfgPullupStatusSet(
 992:./common/lib_AT91SAM7S64.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 993:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
 994:./common/lib_AT91SAM7S64.h **** {
 995:./common/lib_AT91SAM7S64.h ****         return (~AT91F_PIO_GetCfgPullup(pPio) & flag);
 996:./common/lib_AT91SAM7S64.h **** }
 997:./common/lib_AT91SAM7S64.h **** 
 998:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
 999:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR PMC
1000:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1001:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1002:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_CfgSysClkEnableReg
1003:./common/lib_AT91SAM7S64.h **** //* \brief Configure the System Clock Enable Register of the PMC controller
1004:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1005:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_CfgSysClkEnableReg (
1006:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1007:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)
1008:./common/lib_AT91SAM7S64.h **** {
1009:./common/lib_AT91SAM7S64.h **** 	//* Write to the SCER register
1010:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_SCER = mode;
1011:./common/lib_AT91SAM7S64.h **** }
1012:./common/lib_AT91SAM7S64.h **** 
1013:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1014:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_CfgSysClkDisableReg
1015:./common/lib_AT91SAM7S64.h **** //* \brief Configure the System Clock Disable Register of the PMC controller
1016:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1017:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_CfgSysClkDisableReg (
1018:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1019:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)
1020:./common/lib_AT91SAM7S64.h **** {
1021:./common/lib_AT91SAM7S64.h **** 	//* Write to the SCDR register
1022:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_SCDR = mode;
1023:./common/lib_AT91SAM7S64.h **** }
1024:./common/lib_AT91SAM7S64.h **** 
1025:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1026:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_GetSysClkStatusReg
1027:./common/lib_AT91SAM7S64.h **** //* \brief Return the System Clock Status Register of the PMC controller
1028:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1029:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_GetSysClkStatusReg (
1030:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC // pointer to a CAN controller
1031:./common/lib_AT91SAM7S64.h **** 	)
1032:./common/lib_AT91SAM7S64.h **** {
1033:./common/lib_AT91SAM7S64.h **** 	return pPMC->PMC_SCSR;
1034:./common/lib_AT91SAM7S64.h **** }
1035:./common/lib_AT91SAM7S64.h **** 
1036:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1037:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_EnablePeriphClock
1038:./common/lib_AT91SAM7S64.h **** //* \brief Enable peripheral clock
1039:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1040:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_EnablePeriphClock (
1041:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1042:./common/lib_AT91SAM7S64.h **** 	unsigned int periphIds)  // \arg IDs of peripherals
1043:./common/lib_AT91SAM7S64.h **** {
1044:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_PCER = periphIds;
1045:./common/lib_AT91SAM7S64.h **** }
1046:./common/lib_AT91SAM7S64.h **** 
1047:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1048:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_DisablePeriphClock
1049:./common/lib_AT91SAM7S64.h **** //* \brief Disable peripheral clock
1050:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1051:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_DisablePeriphClock (
1052:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1053:./common/lib_AT91SAM7S64.h **** 	unsigned int periphIds)  // \arg IDs of peripherals
1054:./common/lib_AT91SAM7S64.h **** {
1055:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_PCDR = periphIds;
1056:./common/lib_AT91SAM7S64.h **** }
1057:./common/lib_AT91SAM7S64.h **** 
1058:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1059:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_GetPeriphClock
1060:./common/lib_AT91SAM7S64.h **** //* \brief Get peripheral clock status
1061:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1062:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_GetPeriphClock (
1063:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC) // \arg pointer to PMC controller
1064:./common/lib_AT91SAM7S64.h **** {
1065:./common/lib_AT91SAM7S64.h **** 	return pPMC->PMC_PCSR;
1066:./common/lib_AT91SAM7S64.h **** }
1067:./common/lib_AT91SAM7S64.h **** 
1068:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1069:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_CfgMainOscillatorReg
1070:./common/lib_AT91SAM7S64.h **** //* \brief Cfg the main oscillator
1071:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1072:./common/lib_AT91SAM7S64.h **** __inline void AT91F_CKGR_CfgMainOscillatorReg (
1073:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1074:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)
1075:./common/lib_AT91SAM7S64.h **** {
1076:./common/lib_AT91SAM7S64.h **** 	pCKGR->CKGR_MOR = mode;
1077:./common/lib_AT91SAM7S64.h **** }
1078:./common/lib_AT91SAM7S64.h **** 
1079:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1080:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_GetMainOscillatorReg
1081:./common/lib_AT91SAM7S64.h **** //* \brief Cfg the main oscillator
1082:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1083:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_CKGR_GetMainOscillatorReg (
1084:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1085:./common/lib_AT91SAM7S64.h **** {
1086:./common/lib_AT91SAM7S64.h **** 	return pCKGR->CKGR_MOR;
1087:./common/lib_AT91SAM7S64.h **** }
1088:./common/lib_AT91SAM7S64.h **** 
1089:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1090:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_EnableMainOscillator
1091:./common/lib_AT91SAM7S64.h **** //* \brief Enable the main oscillator
1092:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1093:./common/lib_AT91SAM7S64.h **** __inline void AT91F_CKGR_EnableMainOscillator(
1094:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1095:./common/lib_AT91SAM7S64.h **** {
1096:./common/lib_AT91SAM7S64.h **** 	pCKGR->CKGR_MOR |= AT91C_CKGR_MOSCEN;
1097:./common/lib_AT91SAM7S64.h **** }
1098:./common/lib_AT91SAM7S64.h **** 
1099:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1100:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_DisableMainOscillator
1101:./common/lib_AT91SAM7S64.h **** //* \brief Disable the main oscillator
1102:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1103:./common/lib_AT91SAM7S64.h **** __inline void AT91F_CKGR_DisableMainOscillator (
1104:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1105:./common/lib_AT91SAM7S64.h **** {
1106:./common/lib_AT91SAM7S64.h **** 	pCKGR->CKGR_MOR &= ~AT91C_CKGR_MOSCEN;
1107:./common/lib_AT91SAM7S64.h **** }
1108:./common/lib_AT91SAM7S64.h **** 
1109:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1110:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_CfgMainOscStartUpTime
1111:./common/lib_AT91SAM7S64.h **** //* \brief Cfg MOR Register according to the main osc startup time
1112:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1113:./common/lib_AT91SAM7S64.h **** __inline void AT91F_CKGR_CfgMainOscStartUpTime (
1114:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1115:./common/lib_AT91SAM7S64.h **** 	unsigned int startup_time,  // \arg main osc startup time in microsecond (us)
1116:./common/lib_AT91SAM7S64.h **** 	unsigned int slowClock)  // \arg slowClock in Hz
1117:./common/lib_AT91SAM7S64.h **** {
1118:./common/lib_AT91SAM7S64.h **** 	pCKGR->CKGR_MOR &= ~AT91C_CKGR_OSCOUNT;
1119:./common/lib_AT91SAM7S64.h **** 	pCKGR->CKGR_MOR |= ((slowClock * startup_time)/(8*1000000)) << 8;
1120:./common/lib_AT91SAM7S64.h **** }
1121:./common/lib_AT91SAM7S64.h **** 
1122:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1123:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_GetMainClockFreqReg
1124:./common/lib_AT91SAM7S64.h **** //* \brief Cfg the main oscillator
1125:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1126:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_CKGR_GetMainClockFreqReg (
1127:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1128:./common/lib_AT91SAM7S64.h **** {
1129:./common/lib_AT91SAM7S64.h **** 	return pCKGR->CKGR_MCFR;
1130:./common/lib_AT91SAM7S64.h **** }
1131:./common/lib_AT91SAM7S64.h **** 
1132:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1133:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_CKGR_GetMainClock
1134:./common/lib_AT91SAM7S64.h **** //* \brief Return Main clock in Hz
1135:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1136:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_CKGR_GetMainClock (
1137:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1138:./common/lib_AT91SAM7S64.h **** 	unsigned int slowClock)  // \arg slowClock in Hz
1139:./common/lib_AT91SAM7S64.h **** {
1140:./common/lib_AT91SAM7S64.h **** 	return ((pCKGR->CKGR_MCFR  & AT91C_CKGR_MAINF) * slowClock) >> 4;
1141:./common/lib_AT91SAM7S64.h **** }
1142:./common/lib_AT91SAM7S64.h **** 
1143:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1144:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_CfgMCKReg
1145:./common/lib_AT91SAM7S64.h **** //* \brief Cfg Master Clock Register
1146:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1147:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_CfgMCKReg (
1148:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1149:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)
1150:./common/lib_AT91SAM7S64.h **** {
1151:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_MCKR = mode;
1152:./common/lib_AT91SAM7S64.h **** }
1153:./common/lib_AT91SAM7S64.h **** 
1154:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1155:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_GetMCKReg
1156:./common/lib_AT91SAM7S64.h **** //* \brief Return Master Clock Register
1157:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1158:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_GetMCKReg(
1159:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC) // \arg pointer to PMC controller
1160:./common/lib_AT91SAM7S64.h **** {
1161:./common/lib_AT91SAM7S64.h **** 	return pPMC->PMC_MCKR;
1162:./common/lib_AT91SAM7S64.h **** }
1163:./common/lib_AT91SAM7S64.h **** 
1164:./common/lib_AT91SAM7S64.h **** //*------------------------------------------------------------------------------
1165:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_GetMasterClock
1166:./common/lib_AT91SAM7S64.h **** //* \brief Return master clock in Hz which correponds to processor clock for ARM7
1167:./common/lib_AT91SAM7S64.h **** //*------------------------------------------------------------------------------
1168:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_GetMasterClock (
1169:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1170:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1171:./common/lib_AT91SAM7S64.h **** 	unsigned int slowClock)  // \arg slowClock in Hz
1172:./common/lib_AT91SAM7S64.h **** {
1173:./common/lib_AT91SAM7S64.h **** 	unsigned int reg = pPMC->PMC_MCKR;
1174:./common/lib_AT91SAM7S64.h **** 	unsigned int prescaler = (1 << ((reg & AT91C_PMC_PRES) >> 2));
1175:./common/lib_AT91SAM7S64.h **** 	unsigned int pllDivider, pllMultiplier;
1176:./common/lib_AT91SAM7S64.h **** 
1177:./common/lib_AT91SAM7S64.h **** 	switch (reg & AT91C_PMC_CSS) {
1178:./common/lib_AT91SAM7S64.h **** 		case AT91C_PMC_CSS_SLOW_CLK: // Slow clock selected
1179:./common/lib_AT91SAM7S64.h **** 			return slowClock / prescaler;
1180:./common/lib_AT91SAM7S64.h **** 		case AT91C_PMC_CSS_MAIN_CLK: // Main clock is selected
1181:./common/lib_AT91SAM7S64.h **** 			return AT91F_CKGR_GetMainClock(pCKGR, slowClock) / prescaler;
1182:./common/lib_AT91SAM7S64.h **** 		case AT91C_PMC_CSS_PLL_CLK: // PLLB clock is selected
1183:./common/lib_AT91SAM7S64.h **** 			reg = pCKGR->CKGR_PLLR;
1184:./common/lib_AT91SAM7S64.h **** 			pllDivider    = (reg  & AT91C_CKGR_DIV);
1185:./common/lib_AT91SAM7S64.h **** 			pllMultiplier = ((reg  & AT91C_CKGR_MUL) >> 16) + 1;
1186:./common/lib_AT91SAM7S64.h **** 			return AT91F_CKGR_GetMainClock(pCKGR, slowClock) / pllDivider * pllMultiplier / prescaler;
1187:./common/lib_AT91SAM7S64.h **** 	}
1188:./common/lib_AT91SAM7S64.h **** 	return 0;
1189:./common/lib_AT91SAM7S64.h **** }
1190:./common/lib_AT91SAM7S64.h **** 
1191:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1192:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_EnablePCK
1193:./common/lib_AT91SAM7S64.h **** //* \brief Enable Programmable Clock x Output
1194:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1195:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_EnablePCK (
1196:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1197:./common/lib_AT91SAM7S64.h **** 	unsigned int pck,  // \arg Programmable Clock x Output
1198:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)
1199:./common/lib_AT91SAM7S64.h **** {
1200:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_PCKR[pck] = mode;
1201:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_SCER = (1 << pck) << 8;
1202:./common/lib_AT91SAM7S64.h **** }
1203:./common/lib_AT91SAM7S64.h **** 
1204:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1205:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_DisablePCK
1206:./common/lib_AT91SAM7S64.h **** //* \brief Disable Programmable Clock x Output
1207:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1208:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_DisablePCK (
1209:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1210:./common/lib_AT91SAM7S64.h **** 	unsigned int pck)  // \arg Programmable Clock x Output
1211:./common/lib_AT91SAM7S64.h **** {
1212:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_SCDR = (1 << pck) << 8;
1213:./common/lib_AT91SAM7S64.h **** }
1214:./common/lib_AT91SAM7S64.h **** 
1215:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1216:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_EnableIt
1217:./common/lib_AT91SAM7S64.h **** //* \brief Enable PMC interrupt
1218:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1219:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_EnableIt (
1220:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC,     // pointer to a PMC controller
1221:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // IT to be enabled
1222:./common/lib_AT91SAM7S64.h **** {
1223:./common/lib_AT91SAM7S64.h **** 	//* Write to the IER register
1224:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_IER = flag;
1225:./common/lib_AT91SAM7S64.h **** }
1226:./common/lib_AT91SAM7S64.h **** 
1227:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1228:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_DisableIt
1229:./common/lib_AT91SAM7S64.h **** //* \brief Disable PMC interrupt
1230:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1231:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PMC_DisableIt (
1232:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC, // pointer to a PMC controller
1233:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // IT to be disabled
1234:./common/lib_AT91SAM7S64.h **** {
1235:./common/lib_AT91SAM7S64.h **** 	//* Write to the IDR register
1236:./common/lib_AT91SAM7S64.h **** 	pPMC->PMC_IDR = flag;
1237:./common/lib_AT91SAM7S64.h **** }
1238:./common/lib_AT91SAM7S64.h **** 
1239:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1240:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_GetStatus
1241:./common/lib_AT91SAM7S64.h **** //* \brief Return PMC Interrupt Status
1242:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1243:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_GetStatus( // \return PMC Interrupt Status
1244:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC) // pointer to a PMC controller
1245:./common/lib_AT91SAM7S64.h **** {
1246:./common/lib_AT91SAM7S64.h **** 	return pPMC->PMC_SR;
1247:./common/lib_AT91SAM7S64.h **** }
1248:./common/lib_AT91SAM7S64.h **** 
1249:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1250:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_GetInterruptMaskStatus
1251:./common/lib_AT91SAM7S64.h **** //* \brief Return PMC Interrupt Mask Status
1252:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1253:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_GetInterruptMaskStatus( // \return PMC Interrupt Mask Status
1254:./common/lib_AT91SAM7S64.h **** 	AT91PS_PMC pPMC) // pointer to a PMC controller
1255:./common/lib_AT91SAM7S64.h **** {
1256:./common/lib_AT91SAM7S64.h **** 	return pPMC->PMC_IMR;
1257:./common/lib_AT91SAM7S64.h **** }
1258:./common/lib_AT91SAM7S64.h **** 
1259:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1260:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_IsInterruptMasked
1261:./common/lib_AT91SAM7S64.h **** //* \brief Test if PMC Interrupt is Masked
1262:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1263:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_IsInterruptMasked(
1264:./common/lib_AT91SAM7S64.h ****         AT91PS_PMC pPMC,   // \arg  pointer to a PMC controller
1265:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
1266:./common/lib_AT91SAM7S64.h **** {
1267:./common/lib_AT91SAM7S64.h **** 	return (AT91F_PMC_GetInterruptMaskStatus(pPMC) & flag);
1268:./common/lib_AT91SAM7S64.h **** }
1269:./common/lib_AT91SAM7S64.h **** 
1270:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1271:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PMC_IsStatusSet
1272:./common/lib_AT91SAM7S64.h **** //* \brief Test if PMC Status is Set
1273:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1274:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PMC_IsStatusSet(
1275:./common/lib_AT91SAM7S64.h ****         AT91PS_PMC pPMC,   // \arg  pointer to a PMC controller
1276:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
1277:./common/lib_AT91SAM7S64.h **** {
1278:./common/lib_AT91SAM7S64.h **** 	return (AT91F_PMC_GetStatus(pPMC) & flag);
1279:./common/lib_AT91SAM7S64.h **** }
1280:./common/lib_AT91SAM7S64.h **** 
1281:./common/lib_AT91SAM7S64.h **** // ----------------------------------------------------------------------------
1282:./common/lib_AT91SAM7S64.h **** //  \fn    AT91F_CKGR_CfgPLLReg
1283:./common/lib_AT91SAM7S64.h **** //  \brief Cfg the PLL Register
1284:./common/lib_AT91SAM7S64.h **** // ----------------------------------------------------------------------------
1285:./common/lib_AT91SAM7S64.h **** __inline void AT91F_CKGR_CfgPLLReg (
1286:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1287:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)
1288:./common/lib_AT91SAM7S64.h **** {
1289:./common/lib_AT91SAM7S64.h **** 	pCKGR->CKGR_PLLR = mode;
1290:./common/lib_AT91SAM7S64.h **** }
1291:./common/lib_AT91SAM7S64.h **** 
1292:./common/lib_AT91SAM7S64.h **** // ----------------------------------------------------------------------------
1293:./common/lib_AT91SAM7S64.h **** //  \fn    AT91F_CKGR_GetPLLReg
1294:./common/lib_AT91SAM7S64.h **** //  \brief Get the PLL Register
1295:./common/lib_AT91SAM7S64.h **** // ----------------------------------------------------------------------------
1296:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_CKGR_GetPLLReg (
1297:./common/lib_AT91SAM7S64.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1298:./common/lib_AT91SAM7S64.h **** {
1299:./common/lib_AT91SAM7S64.h **** 	return pCKGR->CKGR_PLLR;
1300:./common/lib_AT91SAM7S64.h **** }
1301:./common/lib_AT91SAM7S64.h **** 
1302:./common/lib_AT91SAM7S64.h **** 
1303:./common/lib_AT91SAM7S64.h **** 
1304:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1305:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR RSTC
1306:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1307:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1308:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_RSTSoftReset
1309:./common/lib_AT91SAM7S64.h **** //* \brief Start Software Reset
1310:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1311:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RSTSoftReset(
1312:./common/lib_AT91SAM7S64.h ****         AT91PS_RSTC pRSTC,
1313:./common/lib_AT91SAM7S64.h ****         unsigned int reset)
1314:./common/lib_AT91SAM7S64.h **** {
1315:./common/lib_AT91SAM7S64.h **** 	pRSTC->RSTC_RCR = (0xA5000000 | reset);
1316:./common/lib_AT91SAM7S64.h **** }
1317:./common/lib_AT91SAM7S64.h **** 
1318:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1319:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_RSTSetMode
1320:./common/lib_AT91SAM7S64.h **** //* \brief Set Reset Mode
1321:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1322:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RSTSetMode(
1323:./common/lib_AT91SAM7S64.h ****         AT91PS_RSTC pRSTC,
1324:./common/lib_AT91SAM7S64.h ****         unsigned int mode)
1325:./common/lib_AT91SAM7S64.h **** {
1326:./common/lib_AT91SAM7S64.h **** 	pRSTC->RSTC_RMR = (0xA5000000 | mode);
1327:./common/lib_AT91SAM7S64.h **** }
1328:./common/lib_AT91SAM7S64.h **** 
1329:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1330:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_RSTGetMode
1331:./common/lib_AT91SAM7S64.h **** //* \brief Get Reset Mode
1332:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1333:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RSTGetMode(
1334:./common/lib_AT91SAM7S64.h ****         AT91PS_RSTC pRSTC)
1335:./common/lib_AT91SAM7S64.h **** {
1336:./common/lib_AT91SAM7S64.h **** 	return (pRSTC->RSTC_RMR);
1337:./common/lib_AT91SAM7S64.h **** }
1338:./common/lib_AT91SAM7S64.h **** 
1339:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1340:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_RSTGetStatus
1341:./common/lib_AT91SAM7S64.h **** //* \brief Get Reset Status
1342:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1343:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RSTGetStatus(
1344:./common/lib_AT91SAM7S64.h ****         AT91PS_RSTC pRSTC)
1345:./common/lib_AT91SAM7S64.h **** {
1346:./common/lib_AT91SAM7S64.h **** 	return (pRSTC->RSTC_RSR);
1347:./common/lib_AT91SAM7S64.h **** }
1348:./common/lib_AT91SAM7S64.h **** 
1349:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1350:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_RSTIsSoftRstActive
1351:./common/lib_AT91SAM7S64.h **** //* \brief Return !=0 if software reset is still not completed
1352:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1353:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RSTIsSoftRstActive(
1354:./common/lib_AT91SAM7S64.h ****         AT91PS_RSTC pRSTC)
1355:./common/lib_AT91SAM7S64.h **** {
1356:./common/lib_AT91SAM7S64.h **** 	return ((pRSTC->RSTC_RSR) & AT91C_RSTC_SRCMP);
1357:./common/lib_AT91SAM7S64.h **** }
1358:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1359:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR RTTC
1360:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1361:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1362:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_SetRTT_TimeBase()
1363:./common/lib_AT91SAM7S64.h **** //* \brief  Set the RTT prescaler according to the TimeBase in ms
1364:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1365:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RTTSetTimeBase(
1366:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC, 
1367:./common/lib_AT91SAM7S64.h ****         unsigned int ms)
1368:./common/lib_AT91SAM7S64.h **** {
1369:./common/lib_AT91SAM7S64.h **** 	if (ms > 2000)
1370:./common/lib_AT91SAM7S64.h **** 		return 1;   // AT91C_TIME_OUT_OF_RANGE
1371:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR &= ~0xFFFF;	
1372:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR |= (((ms << 15) /1000) & 0xFFFF);	
1373:./common/lib_AT91SAM7S64.h **** 	return 0;
1374:./common/lib_AT91SAM7S64.h **** }
1375:./common/lib_AT91SAM7S64.h **** 
1376:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1377:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTTSetPrescaler()
1378:./common/lib_AT91SAM7S64.h **** //* \brief  Set the new prescaler value
1379:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1380:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RTTSetPrescaler(
1381:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC, 
1382:./common/lib_AT91SAM7S64.h ****         unsigned int rtpres)
1383:./common/lib_AT91SAM7S64.h **** {
1384:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR &= ~0xFFFF;	
1385:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR |= (rtpres & 0xFFFF);	
1386:./common/lib_AT91SAM7S64.h **** 	return (pRTTC->RTTC_RTMR);
1387:./common/lib_AT91SAM7S64.h **** }
1388:./common/lib_AT91SAM7S64.h **** 
1389:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1390:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTTRestart()
1391:./common/lib_AT91SAM7S64.h **** //* \brief  Restart the RTT prescaler
1392:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1393:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RTTRestart(
1394:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1395:./common/lib_AT91SAM7S64.h **** {
1396:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR |= AT91C_RTTC_RTTRST;	
1397:./common/lib_AT91SAM7S64.h **** }
1398:./common/lib_AT91SAM7S64.h **** 
1399:./common/lib_AT91SAM7S64.h **** 
1400:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1401:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_SetAlarmINT()
1402:./common/lib_AT91SAM7S64.h **** //* \brief  Enable RTT Alarm Interrupt
1403:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1404:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RTTSetAlarmINT(
1405:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1406:./common/lib_AT91SAM7S64.h **** {
1407:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR |= AT91C_RTTC_ALMIEN;
1408:./common/lib_AT91SAM7S64.h **** }
1409:./common/lib_AT91SAM7S64.h **** 
1410:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1411:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_ClearAlarmINT()
1412:./common/lib_AT91SAM7S64.h **** //* \brief  Disable RTT Alarm Interrupt
1413:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1414:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RTTClearAlarmINT(
1415:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1416:./common/lib_AT91SAM7S64.h **** {
1417:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR &= ~AT91C_RTTC_ALMIEN;
1418:./common/lib_AT91SAM7S64.h **** }
1419:./common/lib_AT91SAM7S64.h **** 
1420:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1421:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_SetRttIncINT()
1422:./common/lib_AT91SAM7S64.h **** //* \brief  Enable RTT INC Interrupt
1423:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1424:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RTTSetRttIncINT(
1425:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1426:./common/lib_AT91SAM7S64.h **** {
1427:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR |= AT91C_RTTC_RTTINCIEN;
1428:./common/lib_AT91SAM7S64.h **** }
1429:./common/lib_AT91SAM7S64.h **** 
1430:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1431:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_ClearRttIncINT()
1432:./common/lib_AT91SAM7S64.h **** //* \brief  Disable RTT INC Interrupt
1433:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1434:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RTTClearRttIncINT(
1435:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1436:./common/lib_AT91SAM7S64.h **** {
1437:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTMR &= ~AT91C_RTTC_RTTINCIEN;
1438:./common/lib_AT91SAM7S64.h **** }
1439:./common/lib_AT91SAM7S64.h **** 
1440:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1441:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_SetAlarmValue()
1442:./common/lib_AT91SAM7S64.h **** //* \brief  Set RTT Alarm Value
1443:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1444:./common/lib_AT91SAM7S64.h **** __inline void AT91F_RTTSetAlarmValue(
1445:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC, unsigned int alarm)
1446:./common/lib_AT91SAM7S64.h **** {
1447:./common/lib_AT91SAM7S64.h **** 	pRTTC->RTTC_RTAR = alarm;
1448:./common/lib_AT91SAM7S64.h **** }
1449:./common/lib_AT91SAM7S64.h **** 
1450:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1451:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_GetAlarmValue()
1452:./common/lib_AT91SAM7S64.h **** //* \brief  Get RTT Alarm Value
1453:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1454:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RTTGetAlarmValue(
1455:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1456:./common/lib_AT91SAM7S64.h **** {
1457:./common/lib_AT91SAM7S64.h **** 	return(pRTTC->RTTC_RTAR);
1458:./common/lib_AT91SAM7S64.h **** }
1459:./common/lib_AT91SAM7S64.h **** 
1460:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1461:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTTGetStatus()
1462:./common/lib_AT91SAM7S64.h **** //* \brief  Read the RTT status
1463:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1464:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RTTGetStatus(
1465:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1466:./common/lib_AT91SAM7S64.h **** {
1467:./common/lib_AT91SAM7S64.h **** 	return(pRTTC->RTTC_RTSR);
1468:./common/lib_AT91SAM7S64.h **** }
1469:./common/lib_AT91SAM7S64.h **** 
1470:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1471:./common/lib_AT91SAM7S64.h **** //* \fn     AT91F_RTT_ReadValue()
1472:./common/lib_AT91SAM7S64.h **** //* \brief  Read the RTT value
1473:./common/lib_AT91SAM7S64.h **** //*--------------------------------------------------------------------------------------
1474:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_RTTReadValue(
1475:./common/lib_AT91SAM7S64.h ****         AT91PS_RTTC pRTTC)
1476:./common/lib_AT91SAM7S64.h **** {
1477:./common/lib_AT91SAM7S64.h ****         register volatile unsigned int val1,val2;
1478:./common/lib_AT91SAM7S64.h **** 	do
1479:./common/lib_AT91SAM7S64.h **** 	{
1480:./common/lib_AT91SAM7S64.h **** 		val1 = pRTTC->RTTC_RTVR;
1481:./common/lib_AT91SAM7S64.h **** 		val2 = pRTTC->RTTC_RTVR;
1482:./common/lib_AT91SAM7S64.h **** 	}	
1483:./common/lib_AT91SAM7S64.h **** 	while(val1 != val2);
1484:./common/lib_AT91SAM7S64.h **** 	return(val1);
1485:./common/lib_AT91SAM7S64.h **** }
1486:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1487:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR PITC
1488:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1489:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1490:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITInit
1491:./common/lib_AT91SAM7S64.h **** //* \brief System timer init : period in second, system clock freq in MHz
1492:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1493:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PITInit(
1494:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC,
1495:./common/lib_AT91SAM7S64.h ****         unsigned int period,
1496:./common/lib_AT91SAM7S64.h ****         unsigned int pit_frequency)
1497:./common/lib_AT91SAM7S64.h **** {
1498:./common/lib_AT91SAM7S64.h **** 	pPITC->PITC_PIMR = period? (period * pit_frequency + 8) >> 4 : 0; // +8 to avoid %10 and /10
1499:./common/lib_AT91SAM7S64.h **** 	pPITC->PITC_PIMR |= AT91C_PITC_PITEN;	 
1500:./common/lib_AT91SAM7S64.h **** }
1501:./common/lib_AT91SAM7S64.h **** 
1502:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1503:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITSetPIV
1504:./common/lib_AT91SAM7S64.h **** //* \brief Set the PIT Periodic Interval Value 
1505:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1506:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PITSetPIV(
1507:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC,
1508:./common/lib_AT91SAM7S64.h ****         unsigned int piv)
1509:./common/lib_AT91SAM7S64.h **** {
1510:./common/lib_AT91SAM7S64.h **** 	pPITC->PITC_PIMR = piv | (pPITC->PITC_PIMR & (AT91C_PITC_PITEN | AT91C_PITC_PITIEN));
1511:./common/lib_AT91SAM7S64.h **** }
1512:./common/lib_AT91SAM7S64.h **** 
1513:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1514:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITEnableInt
1515:./common/lib_AT91SAM7S64.h **** //* \brief Enable PIT periodic interrupt
1516:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1517:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PITEnableInt(
1518:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC)
1519:./common/lib_AT91SAM7S64.h **** {
1520:./common/lib_AT91SAM7S64.h **** 	pPITC->PITC_PIMR |= AT91C_PITC_PITIEN;	 
1521:./common/lib_AT91SAM7S64.h **** }
1522:./common/lib_AT91SAM7S64.h **** 
1523:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1524:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITDisableInt
1525:./common/lib_AT91SAM7S64.h **** //* \brief Disable PIT periodic interrupt
1526:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1527:./common/lib_AT91SAM7S64.h **** __inline void AT91F_PITDisableInt(
1528:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC)
1529:./common/lib_AT91SAM7S64.h **** {
1530:./common/lib_AT91SAM7S64.h **** 	pPITC->PITC_PIMR &= ~AT91C_PITC_PITIEN;	 
1531:./common/lib_AT91SAM7S64.h **** }
1532:./common/lib_AT91SAM7S64.h **** 
1533:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1534:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITGetMode
1535:./common/lib_AT91SAM7S64.h **** //* \brief Read PIT mode register
1536:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1537:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PITGetMode(
1538:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC)
1539:./common/lib_AT91SAM7S64.h **** {
1540:./common/lib_AT91SAM7S64.h **** 	return(pPITC->PITC_PIMR);
1541:./common/lib_AT91SAM7S64.h **** }
1542:./common/lib_AT91SAM7S64.h **** 
1543:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1544:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITGetStatus
1545:./common/lib_AT91SAM7S64.h **** //* \brief Read PIT status register
1546:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1547:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PITGetStatus(
1548:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC)
1549:./common/lib_AT91SAM7S64.h **** {
1550:./common/lib_AT91SAM7S64.h **** 	return(pPITC->PITC_PISR);
1551:./common/lib_AT91SAM7S64.h **** }
1552:./common/lib_AT91SAM7S64.h **** 
1553:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1554:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITGetPIIR
1555:./common/lib_AT91SAM7S64.h **** //* \brief Read PIT CPIV and PICNT without ressetting the counters
1556:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1557:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PITGetPIIR(
1558:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC)
1559:./common/lib_AT91SAM7S64.h **** {
1560:./common/lib_AT91SAM7S64.h **** 	return(pPITC->PITC_PIIR);
1561:./common/lib_AT91SAM7S64.h **** }
1562:./common/lib_AT91SAM7S64.h **** 
1563:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1564:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_PITGetPIVR
1565:./common/lib_AT91SAM7S64.h **** //* \brief Read System timer CPIV and PICNT without ressetting the counters
1566:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1567:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_PITGetPIVR(
1568:./common/lib_AT91SAM7S64.h ****         AT91PS_PITC pPITC)
1569:./common/lib_AT91SAM7S64.h **** {
1570:./common/lib_AT91SAM7S64.h **** 	return(pPITC->PITC_PIVR);
1571:./common/lib_AT91SAM7S64.h **** }
1572:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1573:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR WDTC
1574:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1575:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1576:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_WDTSetMode
1577:./common/lib_AT91SAM7S64.h **** //* \brief Set Watchdog Mode Register
1578:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1579:./common/lib_AT91SAM7S64.h **** __inline void AT91F_WDTSetMode(
1580:./common/lib_AT91SAM7S64.h ****         AT91PS_WDTC pWDTC,
1581:./common/lib_AT91SAM7S64.h ****         unsigned int Mode)
1582:./common/lib_AT91SAM7S64.h **** {
1583:./common/lib_AT91SAM7S64.h **** 	pWDTC->WDTC_WDMR = Mode;
1584:./common/lib_AT91SAM7S64.h **** }
1585:./common/lib_AT91SAM7S64.h **** 
1586:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1587:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_WDTRestart
1588:./common/lib_AT91SAM7S64.h **** //* \brief Restart Watchdog
1589:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1590:./common/lib_AT91SAM7S64.h **** __inline void AT91F_WDTRestart(
1591:./common/lib_AT91SAM7S64.h ****         AT91PS_WDTC pWDTC)
1592:./common/lib_AT91SAM7S64.h **** {
1593:./common/lib_AT91SAM7S64.h **** 	pWDTC->WDTC_WDCR = 0xA5000001;
1594:./common/lib_AT91SAM7S64.h **** }
1595:./common/lib_AT91SAM7S64.h **** 
1596:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1597:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_WDTSGettatus
1598:./common/lib_AT91SAM7S64.h **** //* \brief Get Watchdog Status
1599:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1600:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_WDTSGettatus(
1601:./common/lib_AT91SAM7S64.h ****         AT91PS_WDTC pWDTC)
1602:./common/lib_AT91SAM7S64.h **** {
1603:./common/lib_AT91SAM7S64.h **** 	return(pWDTC->WDTC_WDSR & 0x3);
1604:./common/lib_AT91SAM7S64.h **** }
1605:./common/lib_AT91SAM7S64.h **** 
1606:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1607:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_WDTGetPeriod
1608:./common/lib_AT91SAM7S64.h **** //* \brief Translate ms into Watchdog Compatible value
1609:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1610:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_WDTGetPeriod(unsigned int ms)
1611:./common/lib_AT91SAM7S64.h **** {
1612:./common/lib_AT91SAM7S64.h **** 	if ((ms < 4) || (ms > 16000))
1613:./common/lib_AT91SAM7S64.h **** 		return 0;
1614:./common/lib_AT91SAM7S64.h **** 	return((ms << 8) / 1000);
1615:./common/lib_AT91SAM7S64.h **** }
1616:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1617:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR VREG
1618:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1619:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1620:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_VREG_Enable_LowPowerMode
1621:./common/lib_AT91SAM7S64.h **** //* \brief Enable VREG Low Power Mode
1622:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1623:./common/lib_AT91SAM7S64.h **** __inline void AT91F_VREG_Enable_LowPowerMode(
1624:./common/lib_AT91SAM7S64.h ****         AT91PS_VREG pVREG)
1625:./common/lib_AT91SAM7S64.h **** {
1626:./common/lib_AT91SAM7S64.h **** 	pVREG->VREG_MR |= AT91C_VREG_PSTDBY;	 
1627:./common/lib_AT91SAM7S64.h **** }
1628:./common/lib_AT91SAM7S64.h **** 
1629:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1630:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_VREG_Disable_LowPowerMode
1631:./common/lib_AT91SAM7S64.h **** //* \brief Disable VREG Low Power Mode
1632:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1633:./common/lib_AT91SAM7S64.h **** __inline void AT91F_VREG_Disable_LowPowerMode(
1634:./common/lib_AT91SAM7S64.h ****         AT91PS_VREG pVREG)
1635:./common/lib_AT91SAM7S64.h **** {
1636:./common/lib_AT91SAM7S64.h **** 	pVREG->VREG_MR &= ~AT91C_VREG_PSTDBY;	 
1637:./common/lib_AT91SAM7S64.h **** }/* *****************************************************************************
1638:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR MC
1639:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1640:./common/lib_AT91SAM7S64.h **** 
1641:./common/lib_AT91SAM7S64.h **** #define AT91C_MC_CORRECT_KEY  ((unsigned int) 0x5A << 24) // (MC) Correct Protect Key
1642:./common/lib_AT91SAM7S64.h **** 
1643:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1644:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_Remap
1645:./common/lib_AT91SAM7S64.h **** //* \brief Make Remap
1646:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1647:./common/lib_AT91SAM7S64.h **** __inline void AT91F_MC_Remap (void)     //  
1648:./common/lib_AT91SAM7S64.h **** {
1649:./common/lib_AT91SAM7S64.h ****     AT91PS_MC pMC = (AT91PS_MC) AT91C_BASE_MC;
1650:./common/lib_AT91SAM7S64.h ****     
1651:./common/lib_AT91SAM7S64.h ****     pMC->MC_RCR = AT91C_MC_RCB;
1652:./common/lib_AT91SAM7S64.h **** }
1653:./common/lib_AT91SAM7S64.h **** 
1654:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1655:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_CfgModeReg
1656:./common/lib_AT91SAM7S64.h **** //* \brief Configure the EFC Mode Register of the MC controller
1657:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1658:./common/lib_AT91SAM7S64.h **** __inline void AT91F_MC_EFC_CfgModeReg (
1659:./common/lib_AT91SAM7S64.h **** 	AT91PS_MC pMC, // pointer to a MC controller
1660:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)        // mode register 
1661:./common/lib_AT91SAM7S64.h **** {
1662:./common/lib_AT91SAM7S64.h **** 	// Write to the FMR register
1663:./common/lib_AT91SAM7S64.h **** 	pMC->MC_FMR = mode;
1664:./common/lib_AT91SAM7S64.h **** }
1665:./common/lib_AT91SAM7S64.h **** 
1666:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1667:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_GetModeReg
1668:./common/lib_AT91SAM7S64.h **** //* \brief Return MC EFC Mode Regsiter
1669:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1670:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_MC_EFC_GetModeReg(
1671:./common/lib_AT91SAM7S64.h **** 	AT91PS_MC pMC) // pointer to a MC controller
1672:./common/lib_AT91SAM7S64.h **** {
1673:./common/lib_AT91SAM7S64.h **** 	return pMC->MC_FMR;
1674:./common/lib_AT91SAM7S64.h **** }
1675:./common/lib_AT91SAM7S64.h **** 
1676:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1677:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_ComputeFMCN
1678:./common/lib_AT91SAM7S64.h **** //* \brief Return MC EFC Mode Regsiter
1679:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1680:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_MC_EFC_ComputeFMCN(
1681:./common/lib_AT91SAM7S64.h **** 	int master_clock) // master clock in Hz
1682:./common/lib_AT91SAM7S64.h **** {
1683:./common/lib_AT91SAM7S64.h **** 	return (master_clock/1000000 +2);
1684:./common/lib_AT91SAM7S64.h **** }
1685:./common/lib_AT91SAM7S64.h **** 
1686:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1687:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_PerformCmd
1688:./common/lib_AT91SAM7S64.h **** //* \brief Perform EFC Command
1689:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1690:./common/lib_AT91SAM7S64.h **** __inline void AT91F_MC_EFC_PerformCmd (
1691:./common/lib_AT91SAM7S64.h **** 	AT91PS_MC pMC, // pointer to a MC controller
1692:./common/lib_AT91SAM7S64.h ****     unsigned int transfer_cmd)
1693:./common/lib_AT91SAM7S64.h **** {
1694:./common/lib_AT91SAM7S64.h **** 	pMC->MC_FCR = transfer_cmd;	
1695:./common/lib_AT91SAM7S64.h **** }
1696:./common/lib_AT91SAM7S64.h **** 
1697:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1698:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_GetStatus
1699:./common/lib_AT91SAM7S64.h **** //* \brief Return MC EFC Status
1700:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1701:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_MC_EFC_GetStatus(
1702:./common/lib_AT91SAM7S64.h **** 	AT91PS_MC pMC) // pointer to a MC controller
1703:./common/lib_AT91SAM7S64.h **** {
1704:./common/lib_AT91SAM7S64.h **** 	return pMC->MC_FSR;
1705:./common/lib_AT91SAM7S64.h **** }
1706:./common/lib_AT91SAM7S64.h **** 
1707:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1708:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_IsInterruptMasked
1709:./common/lib_AT91SAM7S64.h **** //* \brief Test if EFC MC Interrupt is Masked 
1710:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1711:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_MC_EFC_IsInterruptMasked(
1712:./common/lib_AT91SAM7S64.h ****         AT91PS_MC pMC,   // \arg  pointer to a MC controller
1713:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
1714:./common/lib_AT91SAM7S64.h **** {
1715:./common/lib_AT91SAM7S64.h **** 	return (AT91F_MC_EFC_GetModeReg(pMC) & flag);
1716:./common/lib_AT91SAM7S64.h **** }
1717:./common/lib_AT91SAM7S64.h **** 
1718:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1719:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_MC_EFC_IsInterruptSet
1720:./common/lib_AT91SAM7S64.h **** //* \brief Test if EFC MC Interrupt is Set
1721:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1722:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_MC_EFC_IsInterruptSet(
1723:./common/lib_AT91SAM7S64.h ****         AT91PS_MC pMC,   // \arg  pointer to a MC controller
1724:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
1725:./common/lib_AT91SAM7S64.h **** {
1726:./common/lib_AT91SAM7S64.h **** 	return (AT91F_MC_EFC_GetStatus(pMC) & flag);
1727:./common/lib_AT91SAM7S64.h **** }
1728:./common/lib_AT91SAM7S64.h **** 
1729:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1730:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR SPI
1731:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1732:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1733:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_CfgCs
1734:./common/lib_AT91SAM7S64.h **** //* \brief Configure SPI chip select register
1735:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1736:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_CfgCs (
1737:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI,     // pointer to a SPI controller
1738:./common/lib_AT91SAM7S64.h **** 	int cs,     // SPI cs number (0 to 3)
1739:./common/lib_AT91SAM7S64.h ****  	int val)   //  chip select register
1740:./common/lib_AT91SAM7S64.h **** {
1741:./common/lib_AT91SAM7S64.h **** 	//* Write to the CSR register
1742:./common/lib_AT91SAM7S64.h **** 	*(pSPI->SPI_CSR + cs) = val;
1743:./common/lib_AT91SAM7S64.h **** }
1744:./common/lib_AT91SAM7S64.h **** 
1745:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1746:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_EnableIt
1747:./common/lib_AT91SAM7S64.h **** //* \brief Enable SPI interrupt
1748:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1749:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_EnableIt (
1750:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI,     // pointer to a SPI controller
1751:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // IT to be enabled
1752:./common/lib_AT91SAM7S64.h **** {
1753:./common/lib_AT91SAM7S64.h **** 	//* Write to the IER register
1754:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_IER = flag;
1755:./common/lib_AT91SAM7S64.h **** }
1756:./common/lib_AT91SAM7S64.h **** 
1757:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1758:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_DisableIt
1759:./common/lib_AT91SAM7S64.h **** //* \brief Disable SPI interrupt
1760:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1761:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_DisableIt (
1762:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI, // pointer to a SPI controller
1763:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // IT to be disabled
1764:./common/lib_AT91SAM7S64.h **** {
1765:./common/lib_AT91SAM7S64.h **** 	//* Write to the IDR register
1766:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_IDR = flag;
1767:./common/lib_AT91SAM7S64.h **** }
1768:./common/lib_AT91SAM7S64.h **** 
1769:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1770:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_Reset
1771:./common/lib_AT91SAM7S64.h **** //* \brief Reset the SPI controller
1772:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1773:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_Reset (
1774:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI // pointer to a SPI controller
1775:./common/lib_AT91SAM7S64.h **** 	)
1776:./common/lib_AT91SAM7S64.h **** {
1777:./common/lib_AT91SAM7S64.h **** 	//* Write to the CR register
1778:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_CR = AT91C_SPI_SWRST;
1779:./common/lib_AT91SAM7S64.h **** }
1780:./common/lib_AT91SAM7S64.h **** 
1781:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1782:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_Enable
1783:./common/lib_AT91SAM7S64.h **** //* \brief Enable the SPI controller
1784:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1785:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_Enable (
1786:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI // pointer to a SPI controller
1787:./common/lib_AT91SAM7S64.h **** 	)
1788:./common/lib_AT91SAM7S64.h **** {
1789:./common/lib_AT91SAM7S64.h **** 	//* Write to the CR register
1790:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_CR = AT91C_SPI_SPIEN;
1791:./common/lib_AT91SAM7S64.h **** }
1792:./common/lib_AT91SAM7S64.h **** 
1793:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1794:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_Disable
1795:./common/lib_AT91SAM7S64.h **** //* \brief Disable the SPI controller
1796:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1797:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_Disable (
1798:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI // pointer to a SPI controller
1799:./common/lib_AT91SAM7S64.h **** 	)
1800:./common/lib_AT91SAM7S64.h **** {
1801:./common/lib_AT91SAM7S64.h **** 	//* Write to the CR register
1802:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_CR = AT91C_SPI_SPIDIS;
1803:./common/lib_AT91SAM7S64.h **** }
1804:./common/lib_AT91SAM7S64.h **** 
1805:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1806:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_CfgMode
1807:./common/lib_AT91SAM7S64.h **** //* \brief Enable the SPI controller
1808:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1809:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_CfgMode (
1810:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI, // pointer to a SPI controller
1811:./common/lib_AT91SAM7S64.h **** 	int mode)        // mode register 
1812:./common/lib_AT91SAM7S64.h **** {
1813:./common/lib_AT91SAM7S64.h **** 	//* Write to the MR register
1814:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_MR = mode;
1815:./common/lib_AT91SAM7S64.h **** }
1816:./common/lib_AT91SAM7S64.h **** 
1817:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1818:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_CfgPCS
1819:./common/lib_AT91SAM7S64.h **** //* \brief Switch to the correct PCS of SPI Mode Register : Fixed Peripheral Selected
1820:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1821:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_CfgPCS (
1822:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI, // pointer to a SPI controller
1823:./common/lib_AT91SAM7S64.h **** 	char PCS_Device) // PCS of the Device
1824:./common/lib_AT91SAM7S64.h **** {	
1825:./common/lib_AT91SAM7S64.h ****  	//* Write to the MR register
1826:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_MR &= 0xFFF0FFFF;
1827:./common/lib_AT91SAM7S64.h **** 	pSPI->SPI_MR |= ( (PCS_Device<<16) & AT91C_SPI_PCS );
1828:./common/lib_AT91SAM7S64.h **** }
1829:./common/lib_AT91SAM7S64.h **** 
1830:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1831:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_ReceiveFrame
1832:./common/lib_AT91SAM7S64.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
1833:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1834:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_SPI_ReceiveFrame (
1835:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI,
1836:./common/lib_AT91SAM7S64.h **** 	char *pBuffer,
1837:./common/lib_AT91SAM7S64.h **** 	unsigned int szBuffer,
1838:./common/lib_AT91SAM7S64.h **** 	char *pNextBuffer,
1839:./common/lib_AT91SAM7S64.h **** 	unsigned int szNextBuffer )
1840:./common/lib_AT91SAM7S64.h **** {
1841:./common/lib_AT91SAM7S64.h **** 	return AT91F_PDC_ReceiveFrame(
1842:./common/lib_AT91SAM7S64.h **** 		(AT91PS_PDC) &(pSPI->SPI_RPR),
1843:./common/lib_AT91SAM7S64.h **** 		pBuffer,
1844:./common/lib_AT91SAM7S64.h **** 		szBuffer,
1845:./common/lib_AT91SAM7S64.h **** 		pNextBuffer,
1846:./common/lib_AT91SAM7S64.h **** 		szNextBuffer);
1847:./common/lib_AT91SAM7S64.h **** }
1848:./common/lib_AT91SAM7S64.h **** 
1849:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1850:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_SendFrame
1851:./common/lib_AT91SAM7S64.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
1852:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1853:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_SPI_SendFrame(
1854:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI,
1855:./common/lib_AT91SAM7S64.h **** 	char *pBuffer,
1856:./common/lib_AT91SAM7S64.h **** 	unsigned int szBuffer,
1857:./common/lib_AT91SAM7S64.h **** 	char *pNextBuffer,
1858:./common/lib_AT91SAM7S64.h **** 	unsigned int szNextBuffer )
1859:./common/lib_AT91SAM7S64.h **** {
1860:./common/lib_AT91SAM7S64.h **** 	return AT91F_PDC_SendFrame(
1861:./common/lib_AT91SAM7S64.h **** 		(AT91PS_PDC) &(pSPI->SPI_RPR),
1862:./common/lib_AT91SAM7S64.h **** 		pBuffer,
1863:./common/lib_AT91SAM7S64.h **** 		szBuffer,
1864:./common/lib_AT91SAM7S64.h **** 		pNextBuffer,
1865:./common/lib_AT91SAM7S64.h **** 		szNextBuffer);
1866:./common/lib_AT91SAM7S64.h **** }
1867:./common/lib_AT91SAM7S64.h **** 
1868:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1869:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_Close
1870:./common/lib_AT91SAM7S64.h **** //* \brief Close SPI: disable IT disable transfert, close PDC
1871:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1872:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_Close (
1873:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI)     // \arg pointer to a SPI controller
1874:./common/lib_AT91SAM7S64.h **** {
1875:./common/lib_AT91SAM7S64.h ****     //* Reset all the Chip Select register
1876:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_CSR[0] = 0 ;
1877:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_CSR[1] = 0 ;
1878:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_CSR[2] = 0 ;
1879:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_CSR[3] = 0 ;
1880:./common/lib_AT91SAM7S64.h **** 
1881:./common/lib_AT91SAM7S64.h ****     //* Reset the SPI mode
1882:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_MR = 0  ;
1883:./common/lib_AT91SAM7S64.h **** 
1884:./common/lib_AT91SAM7S64.h ****     //* Disable all interrupts
1885:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_IDR = 0xFFFFFFFF ;
1886:./common/lib_AT91SAM7S64.h **** 
1887:./common/lib_AT91SAM7S64.h ****     //* Abort the Peripheral Data Transfers
1888:./common/lib_AT91SAM7S64.h ****     AT91F_PDC_Close((AT91PS_PDC) &(pSPI->SPI_RPR));
1889:./common/lib_AT91SAM7S64.h **** 
1890:./common/lib_AT91SAM7S64.h ****     //* Disable receiver and transmitter and stop any activity immediately
1891:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_CR = AT91C_SPI_SPIDIS;
1892:./common/lib_AT91SAM7S64.h **** }
1893:./common/lib_AT91SAM7S64.h **** 
1894:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1895:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_PutChar
1896:./common/lib_AT91SAM7S64.h **** //* \brief Send a character,does not check if ready to send
1897:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1898:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SPI_PutChar (
1899:./common/lib_AT91SAM7S64.h **** 	AT91PS_SPI pSPI,
1900:./common/lib_AT91SAM7S64.h **** 	unsigned int character,
1901:./common/lib_AT91SAM7S64.h ****              unsigned int cs_number )
1902:./common/lib_AT91SAM7S64.h **** {
1903:./common/lib_AT91SAM7S64.h ****     unsigned int value_for_cs;
1904:./common/lib_AT91SAM7S64.h ****     value_for_cs = (~(1 << cs_number)) & 0xF;  //Place a zero among a 4 ONEs number
1905:./common/lib_AT91SAM7S64.h ****     pSPI->SPI_TDR = (character & 0xFFFF) | (value_for_cs << 16);
1906:./common/lib_AT91SAM7S64.h **** }
1907:./common/lib_AT91SAM7S64.h **** 
1908:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1909:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_GetChar
1910:./common/lib_AT91SAM7S64.h **** //* \brief Receive a character,does not check if a character is available
1911:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1912:./common/lib_AT91SAM7S64.h **** __inline int AT91F_SPI_GetChar (
1913:./common/lib_AT91SAM7S64.h **** 	const AT91PS_SPI pSPI)
1914:./common/lib_AT91SAM7S64.h **** {
1915:./common/lib_AT91SAM7S64.h ****     return((pSPI->SPI_RDR) & 0xFFFF);
1916:./common/lib_AT91SAM7S64.h **** }
1917:./common/lib_AT91SAM7S64.h **** 
1918:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1919:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_GetInterruptMaskStatus
1920:./common/lib_AT91SAM7S64.h **** //* \brief Return SPI Interrupt Mask Status
1921:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1922:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_SPI_GetInterruptMaskStatus( // \return SPI Interrupt Mask Status
1923:./common/lib_AT91SAM7S64.h ****         AT91PS_SPI pSpi) // \arg  pointer to a SPI controller
1924:./common/lib_AT91SAM7S64.h **** {
1925:./common/lib_AT91SAM7S64.h ****         return pSpi->SPI_IMR;
1926:./common/lib_AT91SAM7S64.h **** }
1927:./common/lib_AT91SAM7S64.h **** 
1928:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1929:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SPI_IsInterruptMasked
1930:./common/lib_AT91SAM7S64.h **** //* \brief Test if SPI Interrupt is Masked 
1931:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1932:./common/lib_AT91SAM7S64.h **** __inline int AT91F_SPI_IsInterruptMasked(
1933:./common/lib_AT91SAM7S64.h ****         AT91PS_SPI pSpi,   // \arg  pointer to a SPI controller
1934:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
1935:./common/lib_AT91SAM7S64.h **** {
1936:./common/lib_AT91SAM7S64.h ****         return (AT91F_SPI_GetInterruptMaskStatus(pSpi) & flag);
1937:./common/lib_AT91SAM7S64.h **** }
1938:./common/lib_AT91SAM7S64.h **** 
1939:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
1940:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR ADC
1941:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
1942:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1943:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_EnableIt
1944:./common/lib_AT91SAM7S64.h **** //* \brief Enable ADC interrupt
1945:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1946:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_EnableIt (
1947:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC,     // pointer to a ADC controller
1948:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // IT to be enabled
1949:./common/lib_AT91SAM7S64.h **** {
1950:./common/lib_AT91SAM7S64.h **** 	//* Write to the IER register
1951:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_IER = flag;
1952:./common/lib_AT91SAM7S64.h **** }
1953:./common/lib_AT91SAM7S64.h **** 
1954:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1955:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_DisableIt
1956:./common/lib_AT91SAM7S64.h **** //* \brief Disable ADC interrupt
1957:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1958:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_DisableIt (
1959:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
1960:./common/lib_AT91SAM7S64.h **** 	unsigned int flag) // IT to be disabled
1961:./common/lib_AT91SAM7S64.h **** {
1962:./common/lib_AT91SAM7S64.h **** 	//* Write to the IDR register
1963:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_IDR = flag;
1964:./common/lib_AT91SAM7S64.h **** }
1965:./common/lib_AT91SAM7S64.h **** 
1966:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1967:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetStatus
1968:./common/lib_AT91SAM7S64.h **** //* \brief Return ADC Interrupt Status
1969:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1970:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetStatus( // \return ADC Interrupt Status
1971:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC) // pointer to a ADC controller
1972:./common/lib_AT91SAM7S64.h **** {
1973:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_SR;
1974:./common/lib_AT91SAM7S64.h **** }
1975:./common/lib_AT91SAM7S64.h **** 
1976:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1977:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetInterruptMaskStatus
1978:./common/lib_AT91SAM7S64.h **** //* \brief Return ADC Interrupt Mask Status
1979:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1980:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetInterruptMaskStatus( // \return ADC Interrupt Mask Status
1981:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC) // pointer to a ADC controller
1982:./common/lib_AT91SAM7S64.h **** {
1983:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_IMR;
1984:./common/lib_AT91SAM7S64.h **** }
1985:./common/lib_AT91SAM7S64.h **** 
1986:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1987:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_IsInterruptMasked
1988:./common/lib_AT91SAM7S64.h **** //* \brief Test if ADC Interrupt is Masked 
1989:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1990:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_IsInterruptMasked(
1991:./common/lib_AT91SAM7S64.h ****         AT91PS_ADC pADC,   // \arg  pointer to a ADC controller
1992:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
1993:./common/lib_AT91SAM7S64.h **** {
1994:./common/lib_AT91SAM7S64.h **** 	return (AT91F_ADC_GetInterruptMaskStatus(pADC) & flag);
1995:./common/lib_AT91SAM7S64.h **** }
1996:./common/lib_AT91SAM7S64.h **** 
1997:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
1998:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_IsStatusSet
1999:./common/lib_AT91SAM7S64.h **** //* \brief Test if ADC Status is Set
2000:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2001:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_IsStatusSet(
2002:./common/lib_AT91SAM7S64.h ****         AT91PS_ADC pADC,   // \arg  pointer to a ADC controller
2003:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
2004:./common/lib_AT91SAM7S64.h **** {
2005:./common/lib_AT91SAM7S64.h **** 	return (AT91F_ADC_GetStatus(pADC) & flag);
2006:./common/lib_AT91SAM7S64.h **** }
2007:./common/lib_AT91SAM7S64.h **** 
2008:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2009:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_CfgModeReg
2010:./common/lib_AT91SAM7S64.h **** //* \brief Configure the Mode Register of the ADC controller
2011:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2012:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_CfgModeReg (
2013:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
2014:./common/lib_AT91SAM7S64.h **** 	unsigned int mode)        // mode register 
2015:./common/lib_AT91SAM7S64.h **** {
2016:./common/lib_AT91SAM7S64.h **** 	//* Write to the MR register
2017:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_MR = mode;
2018:./common/lib_AT91SAM7S64.h **** }
2019:./common/lib_AT91SAM7S64.h **** 
2020:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2021:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetModeReg
2022:./common/lib_AT91SAM7S64.h **** //* \brief Return the Mode Register of the ADC controller value
2023:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2024:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetModeReg (
2025:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2026:./common/lib_AT91SAM7S64.h **** 	)
2027:./common/lib_AT91SAM7S64.h **** {
2028:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_MR;	
2029:./common/lib_AT91SAM7S64.h **** }
2030:./common/lib_AT91SAM7S64.h **** 
2031:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2032:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_CfgTimings
2033:./common/lib_AT91SAM7S64.h **** //* \brief Configure the different necessary timings of the ADC controller
2034:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2035:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_CfgTimings (
2036:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
2037:./common/lib_AT91SAM7S64.h **** 	unsigned int mck_clock, // in MHz 
2038:./common/lib_AT91SAM7S64.h **** 	unsigned int adc_clock, // in MHz 
2039:./common/lib_AT91SAM7S64.h **** 	unsigned int startup_time, // in us 
2040:./common/lib_AT91SAM7S64.h **** 	unsigned int sample_and_hold_time)	// in ns  
2041:./common/lib_AT91SAM7S64.h **** {
2042:./common/lib_AT91SAM7S64.h **** 	unsigned int prescal,startup,shtim;
2043:./common/lib_AT91SAM7S64.h **** 	
2044:./common/lib_AT91SAM7S64.h **** 	prescal = mck_clock/(2*adc_clock) - 1;
2045:./common/lib_AT91SAM7S64.h **** 	startup = adc_clock*startup_time/8 - 1;
2046:./common/lib_AT91SAM7S64.h **** 	shtim = adc_clock*sample_and_hold_time/1000 - 1;
2047:./common/lib_AT91SAM7S64.h **** 	
2048:./common/lib_AT91SAM7S64.h **** 	//* Write to the MR register
2049:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_MR = ( (prescal<<8) & AT91C_ADC_PRESCAL) | ( (startup<<16) & AT91C_ADC_STARTUP) | ( (sht
2050:./common/lib_AT91SAM7S64.h **** }
2051:./common/lib_AT91SAM7S64.h **** 
2052:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2053:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_EnableChannel
2054:./common/lib_AT91SAM7S64.h **** //* \brief Return ADC Timer Register Value
2055:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2056:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_EnableChannel (
2057:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
2058:./common/lib_AT91SAM7S64.h **** 	unsigned int channel)        // mode register 
2059:./common/lib_AT91SAM7S64.h **** {
2060:./common/lib_AT91SAM7S64.h **** 	//* Write to the CHER register
2061:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_CHER = channel;
2062:./common/lib_AT91SAM7S64.h **** }
2063:./common/lib_AT91SAM7S64.h **** 
2064:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2065:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_DisableChannel
2066:./common/lib_AT91SAM7S64.h **** //* \brief Return ADC Timer Register Value
2067:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2068:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_DisableChannel (
2069:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
2070:./common/lib_AT91SAM7S64.h **** 	unsigned int channel)        // mode register 
2071:./common/lib_AT91SAM7S64.h **** {
2072:./common/lib_AT91SAM7S64.h **** 	//* Write to the CHDR register
2073:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_CHDR = channel;
2074:./common/lib_AT91SAM7S64.h **** }
2075:./common/lib_AT91SAM7S64.h **** 
2076:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2077:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetChannelStatus
2078:./common/lib_AT91SAM7S64.h **** //* \brief Return ADC Timer Register Value
2079:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2080:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetChannelStatus (
2081:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2082:./common/lib_AT91SAM7S64.h **** 	)
2083:./common/lib_AT91SAM7S64.h **** {
2084:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CHSR;	
2085:./common/lib_AT91SAM7S64.h **** }
2086:./common/lib_AT91SAM7S64.h **** 
2087:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2088:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_StartConversion
2089:./common/lib_AT91SAM7S64.h **** //* \brief Software request for a analog to digital conversion 
2090:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2091:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_StartConversion (
2092:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2093:./common/lib_AT91SAM7S64.h **** 	)
2094:./common/lib_AT91SAM7S64.h **** {
2095:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_CR = AT91C_ADC_START;	
2096:./common/lib_AT91SAM7S64.h **** }
2097:./common/lib_AT91SAM7S64.h **** 
2098:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2099:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_SoftReset
2100:./common/lib_AT91SAM7S64.h **** //* \brief Software reset
2101:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2102:./common/lib_AT91SAM7S64.h **** __inline void AT91F_ADC_SoftReset (
2103:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2104:./common/lib_AT91SAM7S64.h **** 	)
2105:./common/lib_AT91SAM7S64.h **** {
2106:./common/lib_AT91SAM7S64.h **** 	pADC->ADC_CR = AT91C_ADC_SWRST;	
2107:./common/lib_AT91SAM7S64.h **** }
2108:./common/lib_AT91SAM7S64.h **** 
2109:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2110:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetLastConvertedData
2111:./common/lib_AT91SAM7S64.h **** //* \brief Return the Last Converted Data
2112:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2113:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetLastConvertedData (
2114:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2115:./common/lib_AT91SAM7S64.h **** 	)
2116:./common/lib_AT91SAM7S64.h **** {
2117:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_LCDR;	
2118:./common/lib_AT91SAM7S64.h **** }
2119:./common/lib_AT91SAM7S64.h **** 
2120:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2121:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH0
2122:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 0 Converted Data
2123:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2124:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH0 (
2125:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2126:./common/lib_AT91SAM7S64.h **** 	)
2127:./common/lib_AT91SAM7S64.h **** {
2128:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR0;	
2129:./common/lib_AT91SAM7S64.h **** }
2130:./common/lib_AT91SAM7S64.h **** 
2131:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2132:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH1
2133:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 1 Converted Data
2134:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2135:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH1 (
2136:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2137:./common/lib_AT91SAM7S64.h **** 	)
2138:./common/lib_AT91SAM7S64.h **** {
2139:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR1;	
2140:./common/lib_AT91SAM7S64.h **** }
2141:./common/lib_AT91SAM7S64.h **** 
2142:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2143:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH2
2144:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 2 Converted Data
2145:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2146:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH2 (
2147:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2148:./common/lib_AT91SAM7S64.h **** 	)
2149:./common/lib_AT91SAM7S64.h **** {
2150:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR2;	
2151:./common/lib_AT91SAM7S64.h **** }
2152:./common/lib_AT91SAM7S64.h **** 
2153:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2154:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH3
2155:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 3 Converted Data
2156:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2157:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH3 (
2158:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2159:./common/lib_AT91SAM7S64.h **** 	)
2160:./common/lib_AT91SAM7S64.h **** {
2161:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR3;	
2162:./common/lib_AT91SAM7S64.h **** }
2163:./common/lib_AT91SAM7S64.h **** 
2164:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2165:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH4
2166:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 4 Converted Data
2167:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2168:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH4 (
2169:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2170:./common/lib_AT91SAM7S64.h **** 	)
2171:./common/lib_AT91SAM7S64.h **** {
2172:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR4;	
2173:./common/lib_AT91SAM7S64.h **** }
2174:./common/lib_AT91SAM7S64.h **** 
2175:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2176:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH5
2177:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 5 Converted Data
2178:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2179:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH5 (
2180:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2181:./common/lib_AT91SAM7S64.h **** 	)
2182:./common/lib_AT91SAM7S64.h **** {
2183:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR5;	
2184:./common/lib_AT91SAM7S64.h **** }
2185:./common/lib_AT91SAM7S64.h **** 
2186:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2187:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH6
2188:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 6 Converted Data
2189:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2190:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH6 (
2191:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2192:./common/lib_AT91SAM7S64.h **** 	)
2193:./common/lib_AT91SAM7S64.h **** {
2194:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR6;	
2195:./common/lib_AT91SAM7S64.h **** }
2196:./common/lib_AT91SAM7S64.h **** 
2197:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2198:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_ADC_GetConvertedDataCH7
2199:./common/lib_AT91SAM7S64.h **** //* \brief Return the Channel 7 Converted Data
2200:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2201:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH7 (
2202:./common/lib_AT91SAM7S64.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
2203:./common/lib_AT91SAM7S64.h **** 	)
2204:./common/lib_AT91SAM7S64.h **** {
2205:./common/lib_AT91SAM7S64.h **** 	return pADC->ADC_CDR7;	
2206:./common/lib_AT91SAM7S64.h **** }
2207:./common/lib_AT91SAM7S64.h **** 
2208:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
2209:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR SSC
2210:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
2211:./common/lib_AT91SAM7S64.h **** //* Define the standard I2S mode configuration
2212:./common/lib_AT91SAM7S64.h **** 
2213:./common/lib_AT91SAM7S64.h **** //* Configuration to set in the SSC Transmit Clock Mode Register
2214:./common/lib_AT91SAM7S64.h **** //* Parameters :  nb_bit_by_slot : 8, 16 or 32 bits
2215:./common/lib_AT91SAM7S64.h **** //* 			  nb_slot_by_frame : number of channels
2216:./common/lib_AT91SAM7S64.h **** #define AT91C_I2S_ASY_MASTER_TX_SETTING(nb_bit_by_slot, nb_slot_by_frame)( +\
2217:./common/lib_AT91SAM7S64.h **** 									   AT91C_SSC_CKS_DIV   +\
2218:./common/lib_AT91SAM7S64.h ****                             		   AT91C_SSC_CKO_CONTINOUS      +\
2219:./common/lib_AT91SAM7S64.h ****                             		   AT91C_SSC_CKG_NONE    +\
2220:./common/lib_AT91SAM7S64.h ****                                        AT91C_SSC_START_FALL_RF +\
2221:./common/lib_AT91SAM7S64.h ****                            			   AT91C_SSC_STTOUT  +\
2222:./common/lib_AT91SAM7S64.h ****                             		   ((1<<16) & AT91C_SSC_STTDLY) +\
2223:./common/lib_AT91SAM7S64.h ****                             		   ((((nb_bit_by_slot*nb_slot_by_frame)/2)-1) <<24))
2224:./common/lib_AT91SAM7S64.h **** 
2225:./common/lib_AT91SAM7S64.h **** 
2226:./common/lib_AT91SAM7S64.h **** //* Configuration to set in the SSC Transmit Frame Mode Register
2227:./common/lib_AT91SAM7S64.h **** //* Parameters : nb_bit_by_slot : 8, 16 or 32 bits
2228:./common/lib_AT91SAM7S64.h **** //* 			 nb_slot_by_frame : number of channels
2229:./common/lib_AT91SAM7S64.h **** #define AT91C_I2S_ASY_TX_FRAME_SETTING(nb_bit_by_slot, nb_slot_by_frame)( +\
2230:./common/lib_AT91SAM7S64.h **** 									(nb_bit_by_slot-1)  +\
2231:./common/lib_AT91SAM7S64.h ****                             		AT91C_SSC_MSBF   +\
2232:./common/lib_AT91SAM7S64.h ****                             		(((nb_slot_by_frame-1)<<8) & AT91C_SSC_DATNB)  +\
2233:./common/lib_AT91SAM7S64.h ****                             		(((nb_bit_by_slot-1)<<16) & AT91C_SSC_FSLEN) +\
2234:./common/lib_AT91SAM7S64.h ****                             		AT91C_SSC_FSOS_NEGATIVE)
2235:./common/lib_AT91SAM7S64.h **** 
2236:./common/lib_AT91SAM7S64.h **** 
2237:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2238:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_SetBaudrate
2239:./common/lib_AT91SAM7S64.h **** //* \brief Set the baudrate according to the CPU clock
2240:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2241:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_SetBaudrate (
2242:./common/lib_AT91SAM7S64.h ****         AT91PS_SSC pSSC,        // \arg pointer to a SSC controller
2243:./common/lib_AT91SAM7S64.h ****         unsigned int mainClock, // \arg peripheral clock
2244:./common/lib_AT91SAM7S64.h ****         unsigned int speed)     // \arg SSC baudrate
2245:./common/lib_AT91SAM7S64.h **** {
2246:./common/lib_AT91SAM7S64.h ****         unsigned int baud_value;
2247:./common/lib_AT91SAM7S64.h ****         //* Define the baud rate divisor register
2248:./common/lib_AT91SAM7S64.h ****         if (speed == 0)
2249:./common/lib_AT91SAM7S64.h ****            baud_value = 0;
2250:./common/lib_AT91SAM7S64.h ****         else
2251:./common/lib_AT91SAM7S64.h ****         {
2252:./common/lib_AT91SAM7S64.h ****            baud_value = (unsigned int) (mainClock * 10)/(2*speed);
2253:./common/lib_AT91SAM7S64.h ****            if ((baud_value % 10) >= 5)
2254:./common/lib_AT91SAM7S64.h ****                   baud_value = (baud_value / 10) + 1;
2255:./common/lib_AT91SAM7S64.h ****            else
2256:./common/lib_AT91SAM7S64.h ****                   baud_value /= 10;
2257:./common/lib_AT91SAM7S64.h ****         }
2258:./common/lib_AT91SAM7S64.h **** 
2259:./common/lib_AT91SAM7S64.h ****         pSSC->SSC_CMR = baud_value;
2260:./common/lib_AT91SAM7S64.h **** }
2261:./common/lib_AT91SAM7S64.h **** 
2262:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2263:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_Configure
2264:./common/lib_AT91SAM7S64.h **** //* \brief Configure SSC
2265:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2266:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_Configure (
2267:./common/lib_AT91SAM7S64.h ****              AT91PS_SSC pSSC,          // \arg pointer to a SSC controller
2268:./common/lib_AT91SAM7S64.h ****              unsigned int syst_clock,  // \arg System Clock Frequency
2269:./common/lib_AT91SAM7S64.h ****              unsigned int baud_rate,   // \arg Expected Baud Rate Frequency
2270:./common/lib_AT91SAM7S64.h ****              unsigned int clock_rx,    // \arg Receiver Clock Parameters
2271:./common/lib_AT91SAM7S64.h ****              unsigned int mode_rx,     // \arg mode Register to be programmed
2272:./common/lib_AT91SAM7S64.h ****              unsigned int clock_tx,    // \arg Transmitter Clock Parameters
2273:./common/lib_AT91SAM7S64.h ****              unsigned int mode_tx)     // \arg mode Register to be programmed
2274:./common/lib_AT91SAM7S64.h **** {
2275:./common/lib_AT91SAM7S64.h ****     //* Disable interrupts
2276:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_IDR = (unsigned int) -1;
2277:./common/lib_AT91SAM7S64.h **** 
2278:./common/lib_AT91SAM7S64.h ****     //* Reset receiver and transmitter
2279:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_CR = AT91C_SSC_SWRST | AT91C_SSC_RXDIS | AT91C_SSC_TXDIS ;
2280:./common/lib_AT91SAM7S64.h **** 
2281:./common/lib_AT91SAM7S64.h ****     //* Define the Clock Mode Register
2282:./common/lib_AT91SAM7S64.h **** 	AT91F_SSC_SetBaudrate(pSSC, syst_clock, baud_rate);
2283:./common/lib_AT91SAM7S64.h **** 
2284:./common/lib_AT91SAM7S64.h ****      //* Write the Receive Clock Mode Register
2285:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_RCMR =  clock_rx;
2286:./common/lib_AT91SAM7S64.h **** 
2287:./common/lib_AT91SAM7S64.h ****      //* Write the Transmit Clock Mode Register
2288:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_TCMR =  clock_tx;
2289:./common/lib_AT91SAM7S64.h **** 
2290:./common/lib_AT91SAM7S64.h ****      //* Write the Receive Frame Mode Register
2291:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_RFMR =  mode_rx;
2292:./common/lib_AT91SAM7S64.h **** 
2293:./common/lib_AT91SAM7S64.h ****      //* Write the Transmit Frame Mode Register
2294:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_TFMR =  mode_tx;
2295:./common/lib_AT91SAM7S64.h **** 
2296:./common/lib_AT91SAM7S64.h ****     //* Clear Transmit and Receive Counters
2297:./common/lib_AT91SAM7S64.h **** 	AT91F_PDC_Open((AT91PS_PDC) &(pSSC->SSC_RPR));
2298:./common/lib_AT91SAM7S64.h **** 
2299:./common/lib_AT91SAM7S64.h **** 
2300:./common/lib_AT91SAM7S64.h **** }
2301:./common/lib_AT91SAM7S64.h **** 
2302:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2303:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_EnableRx
2304:./common/lib_AT91SAM7S64.h **** //* \brief Enable receiving datas
2305:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2306:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_EnableRx (
2307:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
2308:./common/lib_AT91SAM7S64.h **** {
2309:./common/lib_AT91SAM7S64.h ****     //* Enable receiver
2310:./common/lib_AT91SAM7S64.h ****     pSSC->SSC_CR = AT91C_SSC_RXEN;
2311:./common/lib_AT91SAM7S64.h **** }
2312:./common/lib_AT91SAM7S64.h **** 
2313:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2314:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_DisableRx
2315:./common/lib_AT91SAM7S64.h **** //* \brief Disable receiving datas
2316:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2317:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_DisableRx (
2318:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
2319:./common/lib_AT91SAM7S64.h **** {
2320:./common/lib_AT91SAM7S64.h ****     //* Disable receiver
2321:./common/lib_AT91SAM7S64.h ****     pSSC->SSC_CR = AT91C_SSC_RXDIS;
2322:./common/lib_AT91SAM7S64.h **** }
2323:./common/lib_AT91SAM7S64.h **** 
2324:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2325:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_EnableTx
2326:./common/lib_AT91SAM7S64.h **** //* \brief Enable sending datas
2327:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2328:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_EnableTx (
2329:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
2330:./common/lib_AT91SAM7S64.h **** {
2331:./common/lib_AT91SAM7S64.h ****     //* Enable  transmitter
2332:./common/lib_AT91SAM7S64.h ****     pSSC->SSC_CR = AT91C_SSC_TXEN;
2333:./common/lib_AT91SAM7S64.h **** }
2334:./common/lib_AT91SAM7S64.h **** 
2335:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2336:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_DisableTx
2337:./common/lib_AT91SAM7S64.h **** //* \brief Disable sending datas
2338:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2339:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_DisableTx (
2340:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
2341:./common/lib_AT91SAM7S64.h **** {
2342:./common/lib_AT91SAM7S64.h ****     //* Disable  transmitter
2343:./common/lib_AT91SAM7S64.h ****     pSSC->SSC_CR = AT91C_SSC_TXDIS;
2344:./common/lib_AT91SAM7S64.h **** }
2345:./common/lib_AT91SAM7S64.h **** 
2346:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2347:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_EnableIt
2348:./common/lib_AT91SAM7S64.h **** //* \brief Enable SSC IT
2349:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2350:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_EnableIt (
2351:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC, // \arg pointer to a SSC controller
2352:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // \arg IT to be enabled
2353:./common/lib_AT91SAM7S64.h **** {
2354:./common/lib_AT91SAM7S64.h **** 	//* Write to the IER register
2355:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_IER = flag;
2356:./common/lib_AT91SAM7S64.h **** }
2357:./common/lib_AT91SAM7S64.h **** 
2358:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2359:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_DisableIt
2360:./common/lib_AT91SAM7S64.h **** //* \brief Disable SSC IT
2361:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2362:./common/lib_AT91SAM7S64.h **** __inline void AT91F_SSC_DisableIt (
2363:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC, // \arg pointer to a SSC controller
2364:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // \arg IT to be disabled
2365:./common/lib_AT91SAM7S64.h **** {
2366:./common/lib_AT91SAM7S64.h **** 	//* Write to the IDR register
2367:./common/lib_AT91SAM7S64.h **** 	pSSC->SSC_IDR = flag;
2368:./common/lib_AT91SAM7S64.h **** }
2369:./common/lib_AT91SAM7S64.h **** 
2370:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2371:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_ReceiveFrame
2372:./common/lib_AT91SAM7S64.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
2373:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2374:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_SSC_ReceiveFrame (
2375:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC,
2376:./common/lib_AT91SAM7S64.h **** 	char *pBuffer,
2377:./common/lib_AT91SAM7S64.h **** 	unsigned int szBuffer,
2378:./common/lib_AT91SAM7S64.h **** 	char *pNextBuffer,
2379:./common/lib_AT91SAM7S64.h **** 	unsigned int szNextBuffer )
2380:./common/lib_AT91SAM7S64.h **** {
2381:./common/lib_AT91SAM7S64.h **** 	return AT91F_PDC_ReceiveFrame(
2382:./common/lib_AT91SAM7S64.h **** 		(AT91PS_PDC) &(pSSC->SSC_RPR),
2383:./common/lib_AT91SAM7S64.h **** 		pBuffer,
2384:./common/lib_AT91SAM7S64.h **** 		szBuffer,
2385:./common/lib_AT91SAM7S64.h **** 		pNextBuffer,
2386:./common/lib_AT91SAM7S64.h **** 		szNextBuffer);
2387:./common/lib_AT91SAM7S64.h **** }
2388:./common/lib_AT91SAM7S64.h **** 
2389:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2390:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_SendFrame
2391:./common/lib_AT91SAM7S64.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
2392:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2393:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_SSC_SendFrame(
2394:./common/lib_AT91SAM7S64.h **** 	AT91PS_SSC pSSC,
2395:./common/lib_AT91SAM7S64.h **** 	char *pBuffer,
2396:./common/lib_AT91SAM7S64.h **** 	unsigned int szBuffer,
2397:./common/lib_AT91SAM7S64.h **** 	char *pNextBuffer,
2398:./common/lib_AT91SAM7S64.h **** 	unsigned int szNextBuffer )
2399:./common/lib_AT91SAM7S64.h **** {
2400:./common/lib_AT91SAM7S64.h **** 	return AT91F_PDC_SendFrame(
2401:./common/lib_AT91SAM7S64.h **** 		(AT91PS_PDC) &(pSSC->SSC_RPR),
2402:./common/lib_AT91SAM7S64.h **** 		pBuffer,
2403:./common/lib_AT91SAM7S64.h **** 		szBuffer,
2404:./common/lib_AT91SAM7S64.h **** 		pNextBuffer,
2405:./common/lib_AT91SAM7S64.h **** 		szNextBuffer);
2406:./common/lib_AT91SAM7S64.h **** }
2407:./common/lib_AT91SAM7S64.h **** 
2408:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2409:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_GetInterruptMaskStatus
2410:./common/lib_AT91SAM7S64.h **** //* \brief Return SSC Interrupt Mask Status
2411:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2412:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_SSC_GetInterruptMaskStatus( // \return SSC Interrupt Mask Status
2413:./common/lib_AT91SAM7S64.h ****         AT91PS_SSC pSsc) // \arg  pointer to a SSC controller
2414:./common/lib_AT91SAM7S64.h **** {
2415:./common/lib_AT91SAM7S64.h ****         return pSsc->SSC_IMR;
2416:./common/lib_AT91SAM7S64.h **** }
2417:./common/lib_AT91SAM7S64.h **** 
2418:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2419:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_SSC_IsInterruptMasked
2420:./common/lib_AT91SAM7S64.h **** //* \brief Test if SSC Interrupt is Masked 
2421:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2422:./common/lib_AT91SAM7S64.h **** __inline int AT91F_SSC_IsInterruptMasked(
2423:./common/lib_AT91SAM7S64.h ****         AT91PS_SSC pSsc,   // \arg  pointer to a SSC controller
2424:./common/lib_AT91SAM7S64.h ****         unsigned int flag) // \arg  flag to be tested
2425:./common/lib_AT91SAM7S64.h **** {
2426:./common/lib_AT91SAM7S64.h ****         return (AT91F_SSC_GetInterruptMaskStatus(pSsc) & flag);
2427:./common/lib_AT91SAM7S64.h **** }
2428:./common/lib_AT91SAM7S64.h **** 
2429:./common/lib_AT91SAM7S64.h **** /* *****************************************************************************
2430:./common/lib_AT91SAM7S64.h ****                 SOFTWARE API FOR USART
2431:./common/lib_AT91SAM7S64.h ****    ***************************************************************************** */
2432:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2433:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_Baudrate
2434:./common/lib_AT91SAM7S64.h **** //* \brief Calculate the baudrate
2435:./common/lib_AT91SAM7S64.h **** //* Standard Asynchronous Mode : 8 bits , 1 stop , no parity
2436:./common/lib_AT91SAM7S64.h **** #define AT91C_US_ASYNC_MODE ( AT91C_US_USMODE_NORMAL + \
2437:./common/lib_AT91SAM7S64.h ****                         AT91C_US_NBSTOP_1_BIT + \
2438:./common/lib_AT91SAM7S64.h ****                         AT91C_US_PAR_NONE + \
2439:./common/lib_AT91SAM7S64.h ****                         AT91C_US_CHRL_8_BITS + \
2440:./common/lib_AT91SAM7S64.h ****                         AT91C_US_CLKS_CLOCK )
2441:./common/lib_AT91SAM7S64.h **** 
2442:./common/lib_AT91SAM7S64.h **** //* Standard External Asynchronous Mode : 8 bits , 1 stop , no parity
2443:./common/lib_AT91SAM7S64.h **** #define AT91C_US_ASYNC_SCK_MODE ( AT91C_US_USMODE_NORMAL + \
2444:./common/lib_AT91SAM7S64.h ****                             AT91C_US_NBSTOP_1_BIT + \
2445:./common/lib_AT91SAM7S64.h ****                             AT91C_US_PAR_NONE + \
2446:./common/lib_AT91SAM7S64.h ****                             AT91C_US_CHRL_8_BITS + \
2447:./common/lib_AT91SAM7S64.h ****                             AT91C_US_CLKS_EXT )
2448:./common/lib_AT91SAM7S64.h **** 
2449:./common/lib_AT91SAM7S64.h **** //* Standard Synchronous Mode : 8 bits , 1 stop , no parity
2450:./common/lib_AT91SAM7S64.h **** #define AT91C_US_SYNC_MODE ( AT91C_US_SYNC + \
2451:./common/lib_AT91SAM7S64.h ****                        AT91C_US_USMODE_NORMAL + \
2452:./common/lib_AT91SAM7S64.h ****                        AT91C_US_NBSTOP_1_BIT + \
2453:./common/lib_AT91SAM7S64.h ****                        AT91C_US_PAR_NONE + \
2454:./common/lib_AT91SAM7S64.h ****                        AT91C_US_CHRL_8_BITS + \
2455:./common/lib_AT91SAM7S64.h ****                        AT91C_US_CLKS_CLOCK )
2456:./common/lib_AT91SAM7S64.h **** 
2457:./common/lib_AT91SAM7S64.h **** //* SCK used Label
2458:./common/lib_AT91SAM7S64.h **** #define AT91C_US_SCK_USED (AT91C_US_CKLO | AT91C_US_CLKS_EXT)
2459:./common/lib_AT91SAM7S64.h **** 
2460:./common/lib_AT91SAM7S64.h **** //* Standard ISO T=0 Mode : 8 bits , 1 stop , parity
2461:./common/lib_AT91SAM7S64.h **** #define AT91C_US_ISO_READER_MODE ( AT91C_US_USMODE_ISO7816_0 + \
2462:./common/lib_AT91SAM7S64.h **** 					   		 AT91C_US_CLKS_CLOCK +\
2463:./common/lib_AT91SAM7S64.h ****                        		 AT91C_US_NBSTOP_1_BIT + \
2464:./common/lib_AT91SAM7S64.h ****                        		 AT91C_US_PAR_EVEN + \
2465:./common/lib_AT91SAM7S64.h ****                        		 AT91C_US_CHRL_8_BITS + \
2466:./common/lib_AT91SAM7S64.h ****                        		 AT91C_US_CKLO +\
2467:./common/lib_AT91SAM7S64.h ****                        		 AT91C_US_OVER)
2468:./common/lib_AT91SAM7S64.h **** 
2469:./common/lib_AT91SAM7S64.h **** //* Standard IRDA mode
2470:./common/lib_AT91SAM7S64.h **** #define AT91C_US_ASYNC_IRDA_MODE (  AT91C_US_USMODE_IRDA + \
2471:./common/lib_AT91SAM7S64.h ****                             AT91C_US_NBSTOP_1_BIT + \
2472:./common/lib_AT91SAM7S64.h ****                             AT91C_US_PAR_NONE + \
2473:./common/lib_AT91SAM7S64.h ****                             AT91C_US_CHRL_8_BITS + \
2474:./common/lib_AT91SAM7S64.h ****                             AT91C_US_CLKS_CLOCK )
2475:./common/lib_AT91SAM7S64.h **** 
2476:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2477:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_Baudrate
2478:./common/lib_AT91SAM7S64.h **** //* \brief Caluculate baud_value according to the main clock and the baud rate
2479:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2480:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_US_Baudrate (
2481:./common/lib_AT91SAM7S64.h **** 	const unsigned int main_clock, // \arg peripheral clock
2482:./common/lib_AT91SAM7S64.h **** 	const unsigned int baud_rate)  // \arg UART baudrate
2483:./common/lib_AT91SAM7S64.h **** {
2484:./common/lib_AT91SAM7S64.h **** 	unsigned int baud_value = ((main_clock*10)/(baud_rate * 16));
2485:./common/lib_AT91SAM7S64.h **** 	if ((baud_value % 10) >= 5)
2486:./common/lib_AT91SAM7S64.h **** 		baud_value = (baud_value / 10) + 1;
2487:./common/lib_AT91SAM7S64.h **** 	else
2488:./common/lib_AT91SAM7S64.h **** 		baud_value /= 10;
2489:./common/lib_AT91SAM7S64.h **** 	return baud_value;
2490:./common/lib_AT91SAM7S64.h **** }
2491:./common/lib_AT91SAM7S64.h **** 
2492:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2493:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_SetBaudrate
2494:./common/lib_AT91SAM7S64.h **** //* \brief Set the baudrate according to the CPU clock
2495:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2496:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_SetBaudrate (
2497:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART,    // \arg pointer to a USART controller
2498:./common/lib_AT91SAM7S64.h **** 	unsigned int mainClock, // \arg peripheral clock
2499:./common/lib_AT91SAM7S64.h **** 	unsigned int speed)     // \arg UART baudrate
2500:./common/lib_AT91SAM7S64.h **** {
2501:./common/lib_AT91SAM7S64.h **** 	//* Define the baud rate divisor register
2502:./common/lib_AT91SAM7S64.h **** 	pUSART->US_BRGR = AT91F_US_Baudrate(mainClock, speed);
2503:./common/lib_AT91SAM7S64.h **** }
2504:./common/lib_AT91SAM7S64.h **** 
2505:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2506:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_SetTimeguard
2507:./common/lib_AT91SAM7S64.h **** //* \brief Set USART timeguard
2508:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2509:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_SetTimeguard (
2510:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART,    // \arg pointer to a USART controller
2511:./common/lib_AT91SAM7S64.h **** 	unsigned int timeguard) // \arg timeguard value
2512:./common/lib_AT91SAM7S64.h **** {
2513:./common/lib_AT91SAM7S64.h **** 	//* Write the Timeguard Register
2514:./common/lib_AT91SAM7S64.h **** 	pUSART->US_TTGR = timeguard ;
2515:./common/lib_AT91SAM7S64.h **** }
2516:./common/lib_AT91SAM7S64.h **** 
2517:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2518:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_EnableIt
2519:./common/lib_AT91SAM7S64.h **** //* \brief Enable USART IT
2520:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2521:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_EnableIt (
2522:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART, // \arg pointer to a USART controller
2523:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // \arg IT to be enabled
2524:./common/lib_AT91SAM7S64.h **** {
2525:./common/lib_AT91SAM7S64.h **** 	//* Write to the IER register
2526:./common/lib_AT91SAM7S64.h **** 	pUSART->US_IER = flag;
2527:./common/lib_AT91SAM7S64.h **** }
2528:./common/lib_AT91SAM7S64.h **** 
2529:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2530:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_DisableIt
2531:./common/lib_AT91SAM7S64.h **** //* \brief Disable USART IT
2532:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2533:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_DisableIt (
2534:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART, // \arg pointer to a USART controller
2535:./common/lib_AT91SAM7S64.h **** 	unsigned int flag)   // \arg IT to be disabled
2536:./common/lib_AT91SAM7S64.h **** {
2537:./common/lib_AT91SAM7S64.h **** 	//* Write to the IER register
2538:./common/lib_AT91SAM7S64.h **** 	pUSART->US_IDR = flag;
2539:./common/lib_AT91SAM7S64.h **** }
2540:./common/lib_AT91SAM7S64.h **** 
2541:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2542:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_Configure
2543:./common/lib_AT91SAM7S64.h **** //* \brief Configure USART
2544:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2545:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_Configure (
2546:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART,     // \arg pointer to a USART controller
2547:./common/lib_AT91SAM7S64.h **** 	unsigned int mainClock,  // \arg peripheral clock
2548:./common/lib_AT91SAM7S64.h **** 	unsigned int mode ,      // \arg mode Register to be programmed
2549:./common/lib_AT91SAM7S64.h **** 	unsigned int baudRate ,  // \arg baudrate to be programmed
2550:./common/lib_AT91SAM7S64.h **** 	unsigned int timeguard ) // \arg timeguard to be programmed
2551:./common/lib_AT91SAM7S64.h **** {
2552:./common/lib_AT91SAM7S64.h ****     //* Disable interrupts
2553:./common/lib_AT91SAM7S64.h ****     pUSART->US_IDR = (unsigned int) -1;
2554:./common/lib_AT91SAM7S64.h **** 
2555:./common/lib_AT91SAM7S64.h ****     //* Reset receiver and transmitter
2556:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_RSTRX | AT91C_US_RSTTX | AT91C_US_RXDIS | AT91C_US_TXDIS ;
2557:./common/lib_AT91SAM7S64.h **** 
2558:./common/lib_AT91SAM7S64.h **** 	//* Define the baud rate divisor register
2559:./common/lib_AT91SAM7S64.h **** 	AT91F_US_SetBaudrate(pUSART, mainClock, baudRate);
2560:./common/lib_AT91SAM7S64.h **** 
2561:./common/lib_AT91SAM7S64.h **** 	//* Write the Timeguard Register
2562:./common/lib_AT91SAM7S64.h **** 	AT91F_US_SetTimeguard(pUSART, timeguard);
2563:./common/lib_AT91SAM7S64.h **** 
2564:./common/lib_AT91SAM7S64.h ****     //* Clear Transmit and Receive Counters
2565:./common/lib_AT91SAM7S64.h ****     AT91F_PDC_Open((AT91PS_PDC) &(pUSART->US_RPR));
2566:./common/lib_AT91SAM7S64.h **** 
2567:./common/lib_AT91SAM7S64.h ****     //* Define the USART mode
2568:./common/lib_AT91SAM7S64.h ****     pUSART->US_MR = mode  ;
2569:./common/lib_AT91SAM7S64.h **** 
2570:./common/lib_AT91SAM7S64.h **** }
2571:./common/lib_AT91SAM7S64.h **** 
2572:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2573:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_EnableRx
2574:./common/lib_AT91SAM7S64.h **** //* \brief Enable receiving characters
2575:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2576:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_EnableRx (
2577:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2578:./common/lib_AT91SAM7S64.h **** {
2579:./common/lib_AT91SAM7S64.h ****     //* Enable receiver
2580:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_RXEN;
2581:./common/lib_AT91SAM7S64.h **** }
2582:./common/lib_AT91SAM7S64.h **** 
2583:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2584:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_EnableTx
2585:./common/lib_AT91SAM7S64.h **** //* \brief Enable sending characters
2586:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2587:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_EnableTx (
2588:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2589:./common/lib_AT91SAM7S64.h **** {
2590:./common/lib_AT91SAM7S64.h ****     //* Enable  transmitter
2591:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_TXEN;
2592:./common/lib_AT91SAM7S64.h **** }
2593:./common/lib_AT91SAM7S64.h **** 
2594:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2595:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_ResetRx
2596:./common/lib_AT91SAM7S64.h **** //* \brief Reset Receiver and re-enable it
2597:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2598:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_ResetRx (
2599:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2600:./common/lib_AT91SAM7S64.h **** {
2601:./common/lib_AT91SAM7S64.h **** 	//* Reset receiver
2602:./common/lib_AT91SAM7S64.h **** 	pUSART->US_CR = AT91C_US_RSTRX;
2603:./common/lib_AT91SAM7S64.h ****     //* Re-Enable receiver
2604:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_RXEN;
2605:./common/lib_AT91SAM7S64.h **** }
2606:./common/lib_AT91SAM7S64.h **** 
2607:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2608:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_ResetTx
2609:./common/lib_AT91SAM7S64.h **** //* \brief Reset Transmitter and re-enable it
2610:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2611:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_ResetTx (
2612:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2613:./common/lib_AT91SAM7S64.h **** {
2614:./common/lib_AT91SAM7S64.h **** 	//* Reset transmitter
2615:./common/lib_AT91SAM7S64.h **** 	pUSART->US_CR = AT91C_US_RSTTX;
2616:./common/lib_AT91SAM7S64.h ****     //* Enable transmitter
2617:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_TXEN;
2618:./common/lib_AT91SAM7S64.h **** }
2619:./common/lib_AT91SAM7S64.h **** 
2620:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2621:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_DisableRx
2622:./common/lib_AT91SAM7S64.h **** //* \brief Disable Receiver
2623:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2624:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_DisableRx (
2625:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2626:./common/lib_AT91SAM7S64.h **** {
2627:./common/lib_AT91SAM7S64.h ****     //* Disable receiver
2628:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_RXDIS;
2629:./common/lib_AT91SAM7S64.h **** }
2630:./common/lib_AT91SAM7S64.h **** 
2631:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2632:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_DisableTx
2633:./common/lib_AT91SAM7S64.h **** //* \brief Disable Transmitter
2634:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2635:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_DisableTx (
2636:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2637:./common/lib_AT91SAM7S64.h **** {
2638:./common/lib_AT91SAM7S64.h ****     //* Disable transmitter
2639:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_TXDIS;
2640:./common/lib_AT91SAM7S64.h **** }
2641:./common/lib_AT91SAM7S64.h **** 
2642:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2643:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_Close
2644:./common/lib_AT91SAM7S64.h **** //* \brief Close USART: disable IT disable receiver and transmitter, close PDC
2645:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2646:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_Close (
2647:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2648:./common/lib_AT91SAM7S64.h **** {
2649:./common/lib_AT91SAM7S64.h ****     //* Reset the baud rate divisor register
2650:./common/lib_AT91SAM7S64.h ****     pUSART->US_BRGR = 0 ;
2651:./common/lib_AT91SAM7S64.h **** 
2652:./common/lib_AT91SAM7S64.h ****     //* Reset the USART mode
2653:./common/lib_AT91SAM7S64.h ****     pUSART->US_MR = 0  ;
2654:./common/lib_AT91SAM7S64.h **** 
2655:./common/lib_AT91SAM7S64.h ****     //* Reset the Timeguard Register
2656:./common/lib_AT91SAM7S64.h ****     pUSART->US_TTGR = 0;
2657:./common/lib_AT91SAM7S64.h **** 
2658:./common/lib_AT91SAM7S64.h ****     //* Disable all interrupts
2659:./common/lib_AT91SAM7S64.h ****     pUSART->US_IDR = 0xFFFFFFFF ;
2660:./common/lib_AT91SAM7S64.h **** 
2661:./common/lib_AT91SAM7S64.h ****     //* Abort the Peripheral Data Transfers
2662:./common/lib_AT91SAM7S64.h ****     AT91F_PDC_Close((AT91PS_PDC) &(pUSART->US_RPR));
2663:./common/lib_AT91SAM7S64.h **** 
2664:./common/lib_AT91SAM7S64.h ****     //* Disable receiver and transmitter and stop any activity immediately
2665:./common/lib_AT91SAM7S64.h ****     pUSART->US_CR = AT91C_US_TXDIS | AT91C_US_RXDIS | AT91C_US_RSTTX | AT91C_US_RSTRX ;
2666:./common/lib_AT91SAM7S64.h **** }
2667:./common/lib_AT91SAM7S64.h **** 
2668:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2669:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_TxReady
2670:./common/lib_AT91SAM7S64.h **** //* \brief Return 1 if a character can be written in US_THR
2671:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2672:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_US_TxReady (
2673:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART )     // \arg pointer to a USART controller
2674:./common/lib_AT91SAM7S64.h **** {
2675:./common/lib_AT91SAM7S64.h ****     return (pUSART->US_CSR & AT91C_US_TXRDY);
2676:./common/lib_AT91SAM7S64.h **** }
2677:./common/lib_AT91SAM7S64.h **** 
2678:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2679:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_RxReady
2680:./common/lib_AT91SAM7S64.h **** //* \brief Return 1 if a character can be read in US_RHR
2681:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2682:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_US_RxReady (
2683:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART )     // \arg pointer to a USART controller
2684:./common/lib_AT91SAM7S64.h **** {
2685:./common/lib_AT91SAM7S64.h ****     return (pUSART->US_CSR & AT91C_US_RXRDY);
  27              		.loc 2 2685 0
  28 0000 0349     		ldr	r1, .L8
  29              	.LVL1:
  30 0002 4B69     		ldr	r3, [r1, #20]
  31              	.LVL2:
  32              	.LBE7:
  33              	.LBE6:
  27:syscalls.c    **** 	unsigned char *p;
  28:syscalls.c    **** 	
  29:syscalls.c    **** 	while ( AT91F_US_RxReady((AT91PS_USART)AT91C_BASE_DBGU) == 0 ) {
  34              		.loc 1 29 0
  35 0004 D807     		lsl	r0, r3, #31
  36 0006 FBD5     		bpl	.L3
  37              	.LVL3:
  38              	.LBB8:
  39              	.LBB9:
2686:./common/lib_AT91SAM7S64.h **** }
2687:./common/lib_AT91SAM7S64.h **** 
2688:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2689:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_Error
2690:./common/lib_AT91SAM7S64.h **** //* \brief Return the error flag
2691:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2692:./common/lib_AT91SAM7S64.h **** __inline unsigned int AT91F_US_Error (
2693:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART )     // \arg pointer to a USART controller
2694:./common/lib_AT91SAM7S64.h **** {
2695:./common/lib_AT91SAM7S64.h ****     return (pUSART->US_CSR &
2696:./common/lib_AT91SAM7S64.h ****     	(AT91C_US_OVRE |  // Overrun error
2697:./common/lib_AT91SAM7S64.h ****     	 AT91C_US_FRAME | // Framing error
2698:./common/lib_AT91SAM7S64.h ****     	 AT91C_US_PARE));  // Parity error
2699:./common/lib_AT91SAM7S64.h **** }
2700:./common/lib_AT91SAM7S64.h **** 
2701:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2702:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_PutChar
2703:./common/lib_AT91SAM7S64.h **** //* \brief Send a character,does not check if ready to send
2704:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2705:./common/lib_AT91SAM7S64.h **** __inline void AT91F_US_PutChar (
2706:./common/lib_AT91SAM7S64.h **** 	AT91PS_USART pUSART,
2707:./common/lib_AT91SAM7S64.h **** 	int character )
2708:./common/lib_AT91SAM7S64.h **** {
2709:./common/lib_AT91SAM7S64.h ****     pUSART->US_THR = (character & 0x1FF);
2710:./common/lib_AT91SAM7S64.h **** }
2711:./common/lib_AT91SAM7S64.h **** 
2712:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2713:./common/lib_AT91SAM7S64.h **** //* \fn    AT91F_US_GetChar
2714:./common/lib_AT91SAM7S64.h **** //* \brief Receive a character,does not check if a character is available
2715:./common/lib_AT91SAM7S64.h **** //*----------------------------------------------------------------------------
2716:./common/lib_AT91SAM7S64.h **** __inline int AT91F_US_GetChar (
2717:./common/lib_AT91SAM7S64.h **** 	const AT91PS_USART pUSART)
2718:./common/lib_AT91SAM7S64.h **** {
2719:./common/lib_AT91SAM7S64.h ****     return((pUSART->US_RHR) & 0x1FF);
  40              		.loc 2 2719 0
  41 0008 8B69     		ldr	r3, [r1, #24]
  42              	.LBE9:
  43              	.LBE8:
  30:syscalls.c    **** 		;
  31:syscalls.c    **** 	}
  32:syscalls.c    ****     
  33:syscalls.c    **** 	p = ptr;
  34:syscalls.c    **** 	
  35:syscalls.c    **** 	*p= AT91F_US_GetChar((AT91PS_USART)AT91C_BASE_DBGU);
  36:syscalls.c    ****     
  37:syscalls.c    **** 	return (_ssize_t)1;
  38:syscalls.c    **** }
  44              		.loc 1 38 0
  45 000a 0120     		mov	r0, #1
  46              		.loc 1 35 0
  47 000c 1370     		strb	r3, [r2]
  48              		.loc 1 38 0
  49              		@ sp needed for prologue
  50 000e 7047     		bx	lr
  51              	.L9:
  52              		.align	2
  53              	.L8:
  54 0010 00F2FFFF 		.word	-3584
  55              	.LFE290:
  57              		.section	.text._close_r,"ax",%progbits
  58              		.align	2
  59              		.global	_close_r
  60              		.code 16
  61              		.thumb_func
  63              	_close_r:
  64              	.LFB292:
  39:syscalls.c    **** 
  40:syscalls.c    **** 
  41:syscalls.c    **** _ssize_t _write_r (
  42:syscalls.c    ****     struct _reent *r, 
  43:syscalls.c    ****     int file, 
  44:syscalls.c    ****     const void *ptr, 
  45:syscalls.c    ****     size_t len)
  46:syscalls.c    **** {
  47:syscalls.c    **** 	size_t todo;
  48:syscalls.c    **** 	const unsigned char *p;
  49:syscalls.c    **** 	
  50:syscalls.c    **** 	todo = len;
  51:syscalls.c    **** 	p = ptr;
  52:syscalls.c    **** 	
  53:syscalls.c    **** 	for( ; todo != 0; todo--) {
  54:syscalls.c    **** 		if ( *p == '\n' ) {
  55:syscalls.c    **** 			while (!AT91F_US_TxReady((AT91PS_USART)AT91C_BASE_DBGU)) {
  56:syscalls.c    **** 				;
  57:syscalls.c    **** 			}
  58:syscalls.c    **** 			AT91F_US_PutChar((AT91PS_USART)AT91C_BASE_DBGU, '\r');
  59:syscalls.c    **** 		}
  60:syscalls.c    **** 		while (!AT91F_US_TxReady((AT91PS_USART)AT91C_BASE_DBGU)) {
  61:syscalls.c    **** 			;
  62:syscalls.c    **** 		}
  63:syscalls.c    **** 		AT91F_US_PutChar((AT91PS_USART)AT91C_BASE_DBGU, *p++);
  64:syscalls.c    ****     }
  65:syscalls.c    **** 	
  66:syscalls.c    **** 	return (_ssize_t)len;			/* Number of bytes written.	*/
  67:syscalls.c    **** }
  68:syscalls.c    **** 
  69:syscalls.c    **** 
  70:syscalls.c    **** int _close_r(
  71:syscalls.c    ****     struct _reent *r, 
  72:syscalls.c    ****     int file)
  73:syscalls.c    **** {
  65              		.loc 1 73 0
  66              	.LVL4:
  74:syscalls.c    **** 	return 0;
  75:syscalls.c    **** }
  67              		.loc 1 75 0
  68 0000 0020     		mov	r0, #0
  69              	.LVL5:
  70              		.loc 1 73 0
  71              		@ lr needed for prologue
  72              		.loc 1 75 0
  73              		@ sp needed for prologue
  74 0002 7047     		bx	lr
  75              	.LFE292:
  77              		.section	.text._lseek_r,"ax",%progbits
  78              		.align	2
  79              		.global	_lseek_r
  80              		.code 16
  81              		.thumb_func
  83              	_lseek_r:
  84              	.LFB293:
  76:syscalls.c    **** 
  77:syscalls.c    **** 
  78:syscalls.c    **** _off_t _lseek_r(
  79:syscalls.c    ****     struct _reent *r, 
  80:syscalls.c    ****     int file, 
  81:syscalls.c    ****     _off_t ptr, 
  82:syscalls.c    ****     int dir)
  83:syscalls.c    **** {
  85              		.loc 1 83 0
  86              	.LVL6:
  84:syscalls.c    **** 	return (_off_t)0;	/*  Always indicate we are at file beginning.  */
  85:syscalls.c    **** }
  87              		.loc 1 85 0
  88 0000 0020     		mov	r0, #0
  89              	.LVL7:
  90              		.loc 1 83 0
  91              		@ lr needed for prologue
  92              		.loc 1 85 0
  93              		@ sp needed for prologue
  94 0002 7047     		bx	lr
  95              	.LFE293:
  97              		.section	.text._fstat_r,"ax",%progbits
  98              		.align	2
  99              		.global	_fstat_r
 100              		.code 16
 101              		.thumb_func
 103              	_fstat_r:
 104              	.LFB294:
  86:syscalls.c    **** 
  87:syscalls.c    **** 
  88:syscalls.c    **** int _fstat_r(
  89:syscalls.c    ****     struct _reent *r, 
  90:syscalls.c    ****     int file, 
  91:syscalls.c    ****     struct stat *st)
  92:syscalls.c    **** {
 105              		.loc 1 92 0
 106              	.LVL8:
  93:syscalls.c    **** 	/*  Always set as character device.				*/
  94:syscalls.c    **** 	st->st_mode = S_IFCHR;
 107              		.loc 1 94 0
 108 0000 8023     		mov	r3, #128
 109 0002 9B01     		lsl	r3, r3, #6
  95:syscalls.c    **** 	/* assigned to strong type with implicit 	*/
  96:syscalls.c    **** 	/* signed/unsigned conversion.  Required by 	*/
  97:syscalls.c    **** 	/* newlib.					*/
  98:syscalls.c    **** 
  99:syscalls.c    **** 	return 0;
 100:syscalls.c    **** }
 110              		.loc 1 100 0
 111 0004 0020     		mov	r0, #0
 112              	.LVL9:
 113              		.loc 1 92 0
 114              		@ lr needed for prologue
 115              		.loc 1 94 0
 116 0006 5360     		str	r3, [r2, #4]
 117              		.loc 1 100 0
 118              		@ sp needed for prologue
 119 0008 7047     		bx	lr
 120              	.LFE294:
 122 000a C046     		.section	.text.isatty,"ax",%progbits
 123              		.align	2
 124              		.global	isatty
 125              		.code 16
 126              		.thumb_func
 128              	isatty:
 129              	.LFB295:
 101:syscalls.c    **** 
 102:syscalls.c    **** 
 103:syscalls.c    **** int isatty(int file); /* avoid warning */
 104:syscalls.c    **** 
 105:syscalls.c    **** int isatty(int file)
 106:syscalls.c    **** {
 130              		.loc 1 106 0
 131              	.LVL10:
 107:syscalls.c    **** 	return 1;
 108:syscalls.c    **** }
 132              		.loc 1 108 0
 133 0000 0120     		mov	r0, #1
 134              	.LVL11:
 135              		.loc 1 106 0
 136              		@ lr needed for prologue
 137              		.loc 1 108 0
 138              		@ sp needed for prologue
 139 0002 7047     		bx	lr
 140              	.LFE295:
 142              		.section	.text.abort,"ax",%progbits
 143              		.align	2
 144              		.global	abort
 145              		.code 16
 146              		.thumb_func
 148              	abort:
 149              	.LFB296:
 109:syscalls.c    **** 
 110:syscalls.c    **** void abort(void)
 111:syscalls.c    **** {
 150              		.loc 1 111 0
 151              		@ lr needed for prologue
 152              	.L20:
 153 0000 FEE7     		b	.L20
 154              	.LFE296:
 156 0002 C046     		.section	.text._sbrk_r,"ax",%progbits
 157              		.align	2
 158              		.global	_sbrk_r
 159              		.code 16
 160              		.thumb_func
 162              	_sbrk_r:
 163              	.LFB297:
 112:syscalls.c    **** 	while(1);
 113:syscalls.c    **** }
 114:syscalls.c    **** 
 115:syscalls.c    **** #if 0
 116:syscalls.c    **** static void _exit (int n) {
 117:syscalls.c    **** label:  goto label; /* endless loop */
 118:syscalls.c    **** }
 119:syscalls.c    **** #endif 
 120:syscalls.c    **** 
 121:syscalls.c    **** 
 122:syscalls.c    **** /* "malloc clue function" from newlib-lpc/Keil-Demo/"generic" */
 123:syscalls.c    **** 
 124:syscalls.c    **** /**** Locally used variables. ****/
 125:syscalls.c    **** // mt: "cleaner": extern char* end;
 126:syscalls.c    **** extern char end[];              /*  end is set in the linker command 	*/
 127:syscalls.c    **** 				/* file and is the end of statically 	*/
 128:syscalls.c    **** 				/* allocated data (thus start of heap).	*/
 129:syscalls.c    **** 
 130:syscalls.c    **** static char *heap_ptr;		/* Points to current end of the heap.	*/
 131:syscalls.c    **** 
 132:syscalls.c    **** /************************** _sbrk_r *************************************
 133:syscalls.c    ****  * Support function. Adjusts end of heap to provide more memory to
 134:syscalls.c    ****  * memory allocator. Simple and dumb with no sanity checks.
 135:syscalls.c    **** 
 136:syscalls.c    ****  *  struct _reent *r -- re-entrancy structure, used by newlib to
 137:syscalls.c    ****  *                      support multiple threads of operation.
 138:syscalls.c    ****  *  ptrdiff_t nbytes -- number of bytes to add.
 139:syscalls.c    ****  *                      Returns pointer to start of new heap area.
 140:syscalls.c    ****  *
 141:syscalls.c    ****  *  Note:  This implementation is not thread safe (despite taking a
 142:syscalls.c    ****  *         _reent structure as a parameter).
 143:syscalls.c    ****  *         Since _s_r is not used in the current implementation, 
 144:syscalls.c    ****  *         the following messages must be suppressed.
 145:syscalls.c    ****  */
 146:syscalls.c    **** void * _sbrk_r(
 147:syscalls.c    ****     struct _reent *_s_r, 
 148:syscalls.c    ****     ptrdiff_t nbytes)
 149:syscalls.c    **** {
 164              		.loc 1 149 0
 165              	.LVL12:
 150:syscalls.c    **** 	char  *base;		/*  errno should be set to  ENOMEM on error  */
 151:syscalls.c    **** 
 152:syscalls.c    **** 	if (!heap_ptr) {	/*  Initialize if first time through.  */
 166              		.loc 1 152 0
 167 0000 044A     		ldr	r2, .L26
 168 0002 1368     		ldr	r3, [r2]
 169              		.loc 1 149 0
 170              		@ lr needed for prologue
 171              		.loc 1 152 0
 172 0004 002B     		cmp	r3, #0
 173 0006 01D1     		bne	.L23
 153:syscalls.c    **** 		heap_ptr = end;
 174              		.loc 1 153 0
 175 0008 034B     		ldr	r3, .L26+4
 176 000a 1360     		str	r3, [r2]
 177              	.L23:
 154:syscalls.c    **** 	}
 155:syscalls.c    **** 	base = heap_ptr;	/*  Point to end of heap.  */
 178              		.loc 1 155 0
 179 000c 1068     		ldr	r0, [r2]
 180              	.LVL13:
 181              	.LVL14:
 156:syscalls.c    **** 	heap_ptr += nbytes;	/*  Increase heap.  */
 182              		.loc 1 156 0
 183 000e 4318     		add	r3, r0, r1
 184 0010 1360     		str	r3, [r2]
 157:syscalls.c    **** 	
 158:syscalls.c    **** 	return base;		/*  Return pointer to start of new heap area.  */
 159:syscalls.c    **** }
 185              		.loc 1 159 0
 186              		@ sp needed for prologue
 187 0012 7047     		bx	lr
 188              	.L27:
 189              		.align	2
 190              	.L26:
 191 0014 00000000 		.word	heap_ptr
 192 0018 00000000 		.word	end
 193              	.LFE297:
 195              		.section	.text._write_r,"ax",%progbits
 196              		.align	2
 197              		.global	_write_r
 198              		.code 16
 199              		.thumb_func
 201              	_write_r:
 202              	.LFB291:
 203              		.loc 1 46 0
 204 0000 70B5     		push	{r4, r5, r6, lr}
 205              	.LCFI0:
 206              	.LVL15:
 207              		.loc 1 46 0
 208 0002 1D1C     		mov	r5, r3
 209              		.loc 1 51 0
 210 0004 191C     		mov	r1, r3
 211              	.LVL16:
 212 0006 0FE0     		b	.L29
 213              	.LVL17:
 214              	.L30:
 215              	.LVL18:
 216              		.loc 1 54 0
 217 0008 1478     		ldrb	r4, [r2]
 218 000a 0A2C     		cmp	r4, #10
 219 000c 05D1     		bne	.L38
 220              	.LVL19:
 221              	.L37:
 222              	.LBB18:
 223              	.LBB19:
 224              		.loc 2 2675 0
 225 000e 0948     		ldr	r0, .L43
 226              	.LVL20:
 227 0010 4369     		ldr	r3, [r0, #20]
 228              	.LVL21:
 229              	.LBE19:
 230              	.LBE18:
 231              		.loc 1 55 0
 232 0012 9E07     		lsl	r6, r3, #30
 233 0014 FBD5     		bpl	.L37
 234              	.LBB20:
 235              	.LBB21:
 236              		.loc 2 2709 0
 237 0016 0D23     		mov	r3, #13
 238 0018 C361     		str	r3, [r0, #28]
 239              	.LVL22:
 240              	.L38:
 241              	.LBE21:
 242              	.LBE20:
 243              	.LBB22:
 244              	.LBB23:
 245              		.loc 2 2675 0
 246 001a 0648     		ldr	r0, .L43
 247              	.LVL23:
 248 001c 4369     		ldr	r3, [r0, #20]
 249              	.LBE23:
 250              	.LBE22:
 251              		.loc 1 60 0
 252 001e 9E07     		lsl	r6, r3, #30
 253 0020 FBD5     		bpl	.L38
 254              	.LBB24:
 255              	.LBB25:
 256              		.loc 2 2709 0
 257 0022 C461     		str	r4, [r0, #28]
 258              	.LBE25:
 259              	.LBE24:
 260              		.loc 1 63 0
 261 0024 0132     		add	r2, r2, #1
 262              		.loc 1 53 0
 263 0026 0139     		sub	r1, r1, #1
 264              	.LVL24:
 265              	.L29:
 266 0028 0029     		cmp	r1, #0
 267 002a EDD1     		bne	.L30
 268              		.loc 1 67 0
 269 002c 281C     		mov	r0, r5
 270              	.LVL25:
 271              		@ sp needed for prologue
 272              	.LVL26:
 273 002e 70BC     		pop	{r4, r5, r6}
 274 0030 02BC     		pop	{r1}
 275 0032 0847     		bx	r1
 276              	.L44:
 277              		.align	2
 278              	.L43:
 279 0034 00F2FFFF 		.word	-3584
 280              	.LFE291:
 282              		.section	.bss.heap_ptr,"aw",%nobits
 283              		.align	2
 286              	heap_ptr:
 287 0000 00000000 		.space	4
 388              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 syscalls.c
     /tmp/ccEGUvkG.s:1      .text:00000000 $t
     /tmp/ccEGUvkG.s:17     .text._read_r:00000000 _read_r
     /tmp/ccEGUvkG.s:14     .text._read_r:00000000 $t
     /tmp/ccEGUvkG.s:54     .text._read_r:00000010 $d
     /tmp/ccEGUvkG.s:63     .text._close_r:00000000 _close_r
     /tmp/ccEGUvkG.s:60     .text._close_r:00000000 $t
     /tmp/ccEGUvkG.s:83     .text._lseek_r:00000000 _lseek_r
     /tmp/ccEGUvkG.s:80     .text._lseek_r:00000000 $t
     /tmp/ccEGUvkG.s:103    .text._fstat_r:00000000 _fstat_r
     /tmp/ccEGUvkG.s:100    .text._fstat_r:00000000 $t
     /tmp/ccEGUvkG.s:128    .text.isatty:00000000 isatty
     /tmp/ccEGUvkG.s:125    .text.isatty:00000000 $t
     /tmp/ccEGUvkG.s:148    .text.abort:00000000 abort
     /tmp/ccEGUvkG.s:145    .text.abort:00000000 $t
     /tmp/ccEGUvkG.s:162    .text._sbrk_r:00000000 _sbrk_r
     /tmp/ccEGUvkG.s:159    .text._sbrk_r:00000000 $t
     /tmp/ccEGUvkG.s:191    .text._sbrk_r:00000014 $d
     /tmp/ccEGUvkG.s:286    .bss.heap_ptr:00000000 heap_ptr
     /tmp/ccEGUvkG.s:201    .text._write_r:00000000 _write_r
     /tmp/ccEGUvkG.s:198    .text._write_r:00000000 $t
     /tmp/ccEGUvkG.s:279    .text._write_r:00000034 $d

UNDEFINED SYMBOLS
end
