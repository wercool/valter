(function($window$$){var $COULL$$=$window$$.COULL||{};$window$$.COULL=$COULL$$;$COULL$$.utils=$window$$.COULL.utils||{};$COULL$$.plugin=$window$$.COULL.plugin||{};$COULL$$.plugin.consumer=$window$$.COULL.plugin.consumer||{};$COULL$$.plugin.consumer=function consumer(){var $_video_objects$$={},$_getProduct$$=function $$_getProduct$$$($_id$$,$_property$$){if(void 0!==$_id$$)for(var $index$$ in $_video_objects$$)if(void 0!==$_video_objects$$[$index$$].product.id&&$_video_objects$$[$index$$].product.id==
$_id$$)return $_property$$?$_video_objects$$[$index$$].product[$_property$$]:$_video_objects$$[$index$$]},$_build_action$$=function $$_build_action$$$(){var $_firstProductLi$$=$("#products li:first-child");$("a",$_firstProductLi$$);void 0!==$COULL$$._pluginsObject.consumer&&$COULL$$._pluginsObject.consumer.closable&&($("#products li").addClass("closable").prepend('<button class="btn btn-close btn-primary"><i class="icon-white icon-remove"></i></button>'),$("#products li a").each(function(){$(this).hasClass("kelkoo")&&
$("button.btn-close",$(this).parent()).addClass("kelkoo")}),$("#products li button.btn-close").bind("click",function(){$(this).parent().remove();$COULL$$.utils.postMessage("COULL.plugin.consumer","OBJECT_CLOSE")}));void 0!==$COULL$$._pluginsObject.consumer&&1===$COULL$$._pluginsObject.consumer.rollover&&!$COULL$$._clientObject.device.mobile?$("body").bind("mouseover",function($event$$){$event$$.stop();$($_firstProductLi$$).removeClass("hide")}).bind("mouseout",function($event$$){$event$$.stop();$($_firstProductLi$$).addClass("hide")}):
$($_firstProductLi$$).removeClass("hide");void 0!==$COULL$$._embedObject.rosemary&&0<$COULL$$._embedObject.rosemary.length&&$("#products li a").each(function(){var $_href$$=$(this).attr("href");$(this).attr("href",$_href$$+"?referrer="+encodeURIComponent($COULL$$._embedObject.rosemary))});$("#products li a").bind("click",function($_object$$1_event$$){$(this).addClass("action");if($(this).attr("data-type_slug")=="promo_code"){$_object$$1_event$$.preventDefault();$COULL$$.plugin.consumer.promo_code.init($(this))}else if($(this).hasClass("kelkoo")){$_object$$1_event$$.preventDefault();
$_getProduct$$($(this).attr("data-product-id"),"id");$COULL$$.plugin.consumer.kelkoo.init($_getProduct$$($(this).attr("data-product-id")))}else{$_object$$1_event$$=$_getProduct$$($(this).attr("data-product-id"));$COULL$$.utils.postMessage("COULL.plugin.share","_object_click",{event:"_object_click",value:"&ObjectId="+$_object$$1_event$$.id});$COULL$$.embed.player.pause!==void 0&&$COULL$$.embed.player.pause();return true}});$("#products li a").bind("mouseover",function(){if(!$(this).hasClass("mouseovered")){var $_object$$=
$_getProduct$$($(this).attr("data-product-id"));$COULL$$.utils.postMessage("COULL.plugin.share","_object_rollover",{event:"_object_rollover",value:"&ObjectId="+$_object$$.id});$(this).addClass("mouseovered")}});$("#products").addClass("show").removeClass("hide")};_init=function $_init$(){$_video_objects$$=$COULL$$._mediaObject.media.video.objects;$_build_action$$()};return{init:_init,getProduct:$_getProduct$$,productState:function(){var $_firstProductLi__object$$=$("#products li:first-child"),$_firstProductLiA$$=
$("a",$_firstProductLi__object$$);$($_firstProductLi__object$$).length&&($_firstProductLi__object$$=$_getProduct$$($($_firstProductLiA$$).attr("data-product-id")),$COULL$$.utils.postMessage("COULL.plugin.share","_object_shown",{event:"_object_shown",value:"&ObjectId="+$_firstProductLi__object$$.id}))},toggle_ad:function(){$("#products").toggle()},show_ad:function(){$("#products").show()},hide_ad:function(){$("#products").hide()}}}();$COULL$$.plugin.consumer.promo_code=function promo_code(){var $_active$$=
!1,$_promo_code$$="",$_promo_code_link$$="",$_make_view$$=function $$_make_view$$$($_link__modal$$){$_promo_code$$=$COULL$$.plugin.consumer.getProduct($($_link__modal$$).attr("data-product-id"),"promo_code");$_promo_code_link$$=$($_link__modal$$).attr("href");0<$("#consumer-modal-promo_code").length||($($_link__modal$$),$_link__modal$$='<div class="modal modal-inverse hide" id="consumer-modal-promo_code"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">\u00d7</button>  <h3>Your Voucher Code...</h3></div><div class="modal-body">  <form class="form-vertical">\t  <fieldset>\t\t<div class="control-group">\t\t<label class="control-label" for="textarea">Copy the code below, then click the link to use your code!</label>\t\t<div class="controls"><input type="text" class="input-xlarge" id="promo_code" value="'+
$_promo_code$$+'"/>\t\t</div>\t\t</div>\t</fieldset>\t</form></div><div class="modal-footer">  <a href="'+$_promo_code_link$$+'" class="btn btn-primary" target="_blank" id="btn-consumer">Use the Voucher!</a></div></div>',$("body").append('<a href="#" id="btn-consumer-lock" class="btn-video-lock black-tint hide consumer-parts"></a>'),$("body").append($_link__modal$$),$("#consumer-modal-promo_code button.close").bind("click",function($event$$){$event$$.preventDefault();$_active$$=!1;$_show_view$$($_active$$)}),
$("a#btn-consumer-lock").bind("click",function($event$$){$event$$.preventDefault();$_active$$=!1;$_show_view$$($_active$$)}));$_active$$=!0;$_show_view$$($_active$$)},$_show_view$$=function $$_show_view$$$($_show__userAgent_text_input$$){$_show__userAgent_text_input$$?($COULL$$.utils.postMessage("COULL.plugin.share","PROMO_CODE_CLICK"),void 0!==$COULL$$.embed.player.pause&&$COULL$$.embed.player.pause(),$_show__userAgent_text_input$$=navigator.userAgent,$_show__userAgent_text_input$$.match(/iPad/i)||
$_show__userAgent_text_input$$.match(/iPod/i)||$_show__userAgent_text_input$$.match(/iPhone/i)?prompt("Copy the code, then click 'ok'",$_promo_code$$,"promo_code")&&$window$$.open($_promo_code_link$$,"_blank"):(void 0!==$COULL$$.embed.player.pause&&$COULL$$.embed.player.toggle("hide"),$("#consumer-modal-promo_code").removeClass("hide"),$("a#btn-consumer-lock").removeClass("hide"),$_show__userAgent_text_input$$=document.getElementById("promo_code"),$_show__userAgent_text_input$$.focus(),$_show__userAgent_text_input$$.select())):
($COULL$$.embed.player.toggle("show"),$("#consumer-modal-promo_code").addClass("hide"),$("a#btn-consumer-lock").addClass("hide"))};return{init:function($_item$$){void 0!==$_item$$&&$_make_view$$($_item$$)}}}();$COULL$$.plugin.consumer.kelkoo=function kelkoo(){var $_active$$=!1,$_search_term$$="",$_object_id$$="",$_show_request$$=function $$_show_request$$$($_data$$){var $_products$$={},$_count$$=0,$_append$$='<ul class="unstyled">';if(204==Number($_data$$.response.status.code))$_append$$+='<li><div class="details"><div class="title"><h4><strong>Sorry we couldn\'t find any products.</strong></h4></div></div></li>';
else{var $_products$$=$_data$$.response.data.products,$_index$$;for($_index$$ in $_products$$){if(10==$_count$$)break;$_append$$=$_append$$+'<li><div class="thumb"><img src="'+$_products$$[$_index$$].thumbnail_image_url+'" class=""><img src="'+$_products$$[$_index$$].account.image_url+'"></div><div class="info"><div class="details"><div class="title"><h4><strong>'+$_products$$[$_index$$].name+'</strong></h4></div><div class="link"><a href="'+$_products$$[$_index$$].publisher_url+'" class="btn btn-primary kelkoo kelkoo-product" target="_blank">Get deal now&nbsp;<i class="icon-circle-arrow-right icon-white"></i></a></div></div><div class="details"><p class="price"><strong>'+
$_products$$[$_index$$].currency.symbol+$_products$$[$_index$$].price+"</strong></p>";if(void 0!==$_products$$[$_index$$].description||""==$_products$$[$_index$$].description)$_append$$=$_append$$+'<p class="description">'+$_products$$[$_index$$].description+"</p>";$_append$$+="</div></div></li>";$_count$$+=1}$_append$$+="</ul>"}$("#search-results").removeClass("loading").append($_append$$);$("#search-results a.kelkoo-product").bind("click",function(){$COULL$$.utils.postMessage("COULL.plugin.share",
"_other_clickthrough",{event:"_other_clickthrough",value:"&ObjectId="+$_object_id$$})})},$_make_view$$=function $$_make_view$$$(){var $_userAgent$$=navigator.userAgent;!$_userAgent$$.match(/iPad/i)&&!$_userAgent$$.match(/iPod/i)&&!$_userAgent$$.match(/iPhone/i)&&(0<$("#consumer-modal-search-kelkoo").length?($_active$$=!0,$_show_view$$($_active$$)):($("body").append('<a href="#" id="btn-consumer-lock" class="btn-video-lock black-tint hide consumer-parts"></a>'),$("body").append('<div class="modal modal-inverse hide consumer-parts" id="consumer-modal-search-kelkoo"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">\u00d7</button>  <h3>Kelkoo search results...</h3></div><div class="modal-body">  <div id="search-results" class="scroller loading">\t</div></div><div class="modal-footer"></div></div>'),
$("#consumer-modal-search-kelkoo button.close").bind("click",function($event$$){$event$$.preventDefault();$_active$$=!1;$_show_view$$($_active$$)}),$("a#btn-consumer-lock").bind("click",function($event$$){$event$$.preventDefault();$_active$$=!1;$_show_view$$($_active$$)}),$_active$$=!0,$_show_view$$($_active$$),$.ajax({url:document.location.protocol+"//"+$COULL$$._embedObject.api_host+"/api/open/kelkoosearch?query="+$_search_term$$+"&publisher_id="+$COULL$$._embedObject.pid+"&format=jsonp&coull_click_ref="+
_coull_click_ref+"&jsoncallback=COULL.plugin.consumer.kelkoo.searchresults",type:"jsonp"})))},$_show_view$$=function $$_show_view$$$($_show$$){$_show$$?($COULL$$.utils.postMessage("COULL.plugin.share","PRODUCT_SEARCH_CLICK"),void 0!==$COULL$$.embed.player.pause&&($COULL$$.embed.player.pause(),$COULL$$.embed.player.toggle("hide")),$("#consumer-modal-search-kelkoo").removeClass("hide"),$("a#btn-consumer-lock").removeClass("hide")):($COULL$$.embed.player.toggle("show"),$("#consumer-modal-search-kelkoo").addClass("hide"),
$("a#btn-consumer-lock").addClass("hide"))};return{init:function($_object$$){void 0!==$_object$$&&($_search_term$$=JSON.parse($_object$$.metadata).query,_coull_click_ref=$_object$$.coull_click_ref,$_object_id$$=$_object$$.id,$_make_view$$())},searchresults:function($data$$){$_show_request$$($data$$)}}}()})(window);
(function($window$$){var $COULL$$=$window$$.COULL||{};$window$$.COULL=$COULL$$;$COULL$$.utils=$window$$.COULL.utils||{};$COULL$$.plugin=$window$$.COULL.plugin||{};$COULL$$.plugin.iframe=$window$$.COULL.plugin.iframe||{};$COULL$$.plugin.iframe=function iframe(){var $_iframeObject$$={},$_make_view$$=function $$_make_view$$$(){$COULL$$.embed.player.pause();var $_modal$$='<div class="modal modal-inverse" id="iframe-modal"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">\u00d7</button></div><div class="modal-body">\t<iframe src="'+
$_iframeObject$$.src+'" width="100%" height="100%" frameborder="0">\t</iframe></div></div>';$("body").append('<a href="#" id="btn-iframe-lock" class="btn-video-lock black-tint hide iframe-parts"></a>');$("body").append($_modal$$);$("#iframe-modal button.close").bind("click",function($event$$){$event$$.preventDefault();$("#iframe-modal").remove()})};return{init:function(){if(!(void 0===$COULL$$._pluginsObject.iframe||void 0===$COULL$$._pluginsObject.iframe.src||""===$COULL$$._pluginsObject.iframe.src)){$_iframeObject$$=
$COULL$$._pluginsObject.iframe;var $_testURL_eventMethod$$=unescape($_iframeObject$$.src);if(!(-1!==$_testURL_eventMethod$$.indexOf('"')||-1!==$_testURL_eventMethod$$.indexOf("'"))&&RegExp(/^https?:\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!\:.?+=&%@!\-\/]))?/).test($_testURL_eventMethod$$))$_iframeObject$$.src=$_testURL_eventMethod$$,$_iframeObject$$.event=void 0!==$_iframeObject$$.event&&""!==$_iframeObject$$.event?$_iframeObject$$.event:"_ended",$_testURL_eventMethod$$=$window$$.addEventListener?
"addEventListener":"attachEvent",(0,$window$$[$_testURL_eventMethod$$])("attachEvent"==$_testURL_eventMethod$$?"onmessage":"message",function($event$$){$event$$.origin.endsWith($COULL$$._embedObject.api_host)&&JSON.parse($event$$.data).event==$_iframeObject$$.event&&$_make_view$$()},!1)}}}}()})(window);
(function($window$$){var $COULL$$=$window$$.COULL||{};$window$$.COULL=$COULL$$;$COULL$$.utils=$window$$.COULL.utils||{};$COULL$$.plugin=$window$$.COULL.plugin||{};$COULL$$.plugin.share=$window$$.COULL.plugin.share||{};$COULL$$.plugin.share=function consumer(){var $_loaded$$=!1,$_active$$=!1,$_referrerURL$$=function $$_referrerURL$$$($_escape$$){var $_href$$=$window$$.location.href;return $_escape$$?escape($_href$$):$_href$$},$_sharePop$$=function $$_sharePop$$$($_url$$){$window$$.open($_url$$,"",
"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},$_EXTERNAL_loadFacebook$$=function $$_EXTERNAL_loadFacebook$$$(){var $_append$$='<li><a class="btn btn-small share" id="btn-share-facebook" href="https://www.facebook.com/sharer/sharer.php?u='+$_referrerURL$$(!0)+'"><i class="icon-social-facebook"></i>&nbsp;<strong>Share</strong></a></li>';$("li#btn-share > ul").append($_append$$);$("#btn-share-facebook").bind("click",function($event$$){$event$$.preventDefault();$_sharePop$$($(this).attr("href"))})},
$_EXTERNAL_loadTwitter$$=function $$_EXTERNAL_loadTwitter$$$(){var $_append$$='<li><a class="btn btn-small share" id="btn-share-twitter" href="https://twitter.com/share?text='+$COULL$$._mediaObject.media.video.title+": &url="+$_referrerURL$$(!0)+'&hashtags=video"><i class="icon-social-twitter"></i>&nbsp;<strong>Tweet</strong></a></li>';$("li#btn-share > ul").append($_append$$);$("#btn-share-twitter").bind("click",function($event$$){$event$$.preventDefault();$_sharePop$$($(this).attr("href"))})},$_EXTERNAL_loadGoogle$$=
function $$_EXTERNAL_loadGoogle$$$(){var $_append$$='<li><a class="btn btn-small share" id="btn-share-google" href="https://plus.google.com/share?url='+$_referrerURL$$(!0)+'"><i class="icon-social-google"></i>&nbsp;<strong>Google+</strong></a></li>';$("li#btn-share > ul").append($_append$$);$("#btn-share-google").bind("click",function($event$$){$event$$.preventDefault();$_sharePop$$($(this).attr("href"))})},$_INTERNAL_embed$$=function $$_INTERNAL_embed$$$(){var $JSCompiler_object_inline_width_0__modal$$=
$("#"+$COULL$$._playerObject.dom_id).width(),$JSCompiler_object_inline_height_1$$=$("#"+$COULL$$._playerObject.dom_id).height(),$JSCompiler_object_inline_width_0__modal$$='<div class="modal modal-inverse hide share-parts" id="share-modal-embed"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">\u00d7</button>  <h3>Embed the video</h3></div><div class="modal-body">  <form class="form-vertical">\t  <fieldset>\t\t<div class="control-group">\t\t<label class="control-label" for="textarea">Copy and paste the embed code below.</label>\t\t<div class="controls"><textarea class="input-xlarge" id="textarea-embed_code" rows="5"><iframe src="'+
$_referrerURL$$(!1)+'" frameborder="0" scrolling="no" width="'+$JSCompiler_object_inline_width_0__modal$$+'px" height="'+$JSCompiler_object_inline_height_1$$+'px" frameborder="0"></iframe></textarea>\t\t</div>\t\t</div>\t</fieldset>\t</form></div></div>';$("li#btn-share > ul").append('<li><a class="btn btn-small share" id="btn-share-embed" href="#"><i class="icon-social-embed"></i>&nbsp;<strong>Embed</strong></a></li>');$("body").append($JSCompiler_object_inline_width_0__modal$$);$("#share-modal-embed button.close").bind("click",
function($event$$){$event$$.preventDefault();$("#share-modal-embed").addClass("hide");$_active$$=!1;$_show_view$$($_active$$)});$("a#btn-share-embed").bind("click",function($event$$21_text_input$$){$event$$21_text_input$$.preventDefault();$("ul#panel-share").addClass("hide");$("#share-modal-embed").removeClass("hide");$event$$21_text_input$$=document.getElementById("textarea-embed_code");!1==$("html").hasClass("lt-ie9")&&($event$$21_text_input$$.focus(),$event$$21_text_input$$.select())})},$_loadExternals$$=
function $$_loadExternals$$$(){if(!$_loaded$$){$_EXTERNAL_loadFacebook$$();$_EXTERNAL_loadTwitter$$();$_EXTERNAL_loadGoogle$$();var $_append$$='<li><a class="btn btn-small share" id="btn-share-email" href="mailto:?subject=Check out this great video!&body=Have you seen this video yet? It\'s amazing: '+$_referrerURL$$(!0)+'"><i class="icon-social-envelope"></i>&nbsp;<strong>Email</strong></a></li>';$("li#btn-share > ul").append($_append$$);$_INTERNAL_embed$$();$_loaded$$=!0;$_engage_share_btns$$()}},
$_show_view$$=function $$_show_view$$$($_show$$){$_show$$?($COULL$$.utils.postMessage("COULL.plugin.share","OPEN_SOCIAL_PANEL"),void 0!==$COULL$$.embed.player.pause&&($COULL$$.embed.player.pause(),$COULL$$.embed.player.toggle("hide")),$("ul#panel-share").removeClass("hide"),$("a#btn-share-lock").removeClass("hide")):($COULL$$.embed.player.toggle("show"),$("a#btn-share-lock").addClass("hide"),$(".share-parts").addClass("hide"))},$_engage_share_btns$$=function $$_engage_share_btns$$$(){$("a.share").bind("click",
function($event$$){var $_id$$=$(this).attr("id"),$_close$$=!0;if(void 0!==$_id$$){switch($_id$$){case "btn-share-embed":$_close$$=!1;$COULL$$.utils.postMessage("COULL.plugin.share","PLAYER_SHARE_EMBED");break;case "btn-share-facebook":$COULL$$.utils.postMessage("COULL.plugin.share","PLAYER_SHARE_FACEBOOK");break;case "btn-share-twitter":$COULL$$.utils.postMessage("COULL.plugin.share","PLAYER_SHARE_TWITTER");break;case "btn-share-google":$COULL$$.utils.postMessage("COULL.plugin.share","PLAYER_SHARE_GOOGLEPLUS");
break;case "btn-share-email":$event$$.stop(),$COULL$$.utils.postMessage("COULL.plugin.share","PLAYER_SHARE_EMAIL"),$window$$.location.href=$(this).attr("href")}$_close$$&&($_active$$=!1,$_show_view$$($_active$$))}})},$_engage_view$$=function $$_engage_view$$$(){$("a#btn-share-lock").bind("click",function($event$$){$event$$.preventDefault();$_active$$=!1;$_show_view$$($_active$$)});$("li#btn-share > a").bind("click",function($event$$){$event$$.preventDefault();$_active$$=!$_active$$;$_loaded$$||$_loadExternals$$();
$_show_view$$($_active$$)});$("body").bind("mouseover",function($event$$){$event$$.stop();$("html").hasClass("mobile")||$("li#btn-share").removeClass("hide")});$("body").bind("mouseout",function($event$$){$event$$.stop();$("html").hasClass("mobile")||$("li#btn-share").addClass("hide")})};return{init:function(){"iPad"==$COULL$$._clientObject.device.device||"iPhone"==$COULL$$._clientObject.device.device||($("ul#referrer").append('<li id="btn-share"><a href="#share" class="btn btn-success btn-"><i class="icon-social-share"></i></a><ul id="panel-share" class="hide share-parts"></ul></li>'),
$("html").hasClass("mobile")||$("li#btn-share").addClass("hide"),$("body").append('<a href="#" id="btn-share-lock" class="btn-video-lock black-tint hide share-parts"></a>'),$_engage_view$$(),$_loadExternals$$())},toggle_view:function(){$_active$$=!$_active$$;$_show_view$$($_active$$)}}}()})(window);