<!DOCTYPE html>
<!-- saved from url=(0086)http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/ -->
<html lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Tutorial: Ultrasonic Ranging with the Freedom Board | MCU on Eclipse</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./HC-SR04_application_2_files/style.css">
<link rel="pingback" href="http://mcuoneclipse.com/xmlrpc.php">
<!--[if lt IE 9]>
<script src="http://s2.wp.com/wp-content/themes/pub/twentyeleven/js/html5.js?m=1354160568g" type="text/javascript"></script>
<![endif]-->
<meta name="google-site-verification" content="F4exjEP_GLt4aa1ulXB5uA4eUUNXnJe5eOHIv4LmAEQ">
		<script type="text/javascript" async="" src="./HC-SR04_application_2_files/stipple.js"></script><script src="./HC-SR04_application_2_files/quant.js" async="" type="text/javascript"></script><script src="./HC-SR04_application_2_files/remote-login.php" type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel="alternate" type="application/rss+xml" title="MCU on Eclipse » Feed" href="http://mcuoneclipse.com/feed/">
<link rel="alternate" type="application/rss+xml" title="MCU on Eclipse » Comments Feed" href="http://mcuoneclipse.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="MCU on Eclipse » Tutorial: Ultrasonic Ranging with the Freedom Board Comments Feed" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/feed/">
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" id="all-css-0" href="./HC-SR04_application_2_files/saved_resource" type="text/css" media="all">
<script type="text/javascript" src="./HC-SR04_application_2_files/saved_resource(1)"></script>
<link rel="stylesheet" id="all-css-0" href="./HC-SR04_application_2_files/style(1).css" type="text/css" media="all">
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563g&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://mcuoneclipse.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://mcuoneclipse.wordpress.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="2012 in review: Happy New Year, and thanks for reading!" href="http://mcuoneclipse.com/2012/12/31/2012-in-review-happy-new-year-and-thanks-for-reading/">
<link rel="next" title="The Freedom Robot" href="http://mcuoneclipse.com/2013/01/04/the-freedom-robot/">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="./HC-SR04_application_2_files/HC-SR04_application_2.htm">
<link rel="shortlink" href="http://wp.me/p2bq0S-1xu">
<link rel="alternate" type="application/json+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=json&url=http%3A%2F%2Fmcuoneclipse.com%2F2013%2F01%2F01%2Ftutorial-ultrasonic-ranging-with-the-freedom-board%2F&for=wpcom-auto-discovery"><link rel="alternate" type="application/xml+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=xml&url=http%3A%2F%2Fmcuoneclipse.com%2F2013%2F01%2F01%2Ftutorial-ultrasonic-ranging-with-the-freedom-board%2F&for=wpcom-auto-discovery">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Tutorial: Ultrasonic Ranging with the Freedom Board">
<meta property="og:url" content="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/">
<meta property="og:description" content="Question: What makes 8 times &#39;beep&#39;, but I cannot hear it? Answer: My ultrasonic range finder :-) What I have added to my FRDM-KL25Z board is an ultrasonic distance sensor, measuring distances up t...">
<meta property="og:site_name" content="MCU on Eclipse">
<meta property="og:image" content="http://i2.wp.com/mcuoneclipse.files.wordpress.com/2012/12/frdm-kl25z-with-hc-sr04.png?fit=1000%2C1000">
<meta name="twitter:site" content="@wordpressdotcom">
<meta name="twitter:image" content="http://i2.wp.com/mcuoneclipse.files.wordpress.com/2012/12/frdm-kl25z-with-hc-sr04.png?fit=1000%2C1000">
<meta name="twitter:card" content="photo">
<meta name="twitter:creator" content="@StonhillRitschi">
<link rel="shortcut icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/9da866e1670f1a76ae549a2d906047f5?s=16" sizes="16x16">
<link rel="icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/9da866e1670f1a76ae549a2d906047f5?s=16" sizes="16x16">
<link rel="apple-touch-icon-precomposed" href="http://0.gravatar.com/blavatar/6afc01f6517475a499fa7515cded133b?s=114">
<link rel="openid.server" href="http://mcuoneclipse.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://mcuoneclipse.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://mcuoneclipse.com/osd.xml" title="MCU on Eclipse">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
		<style>
		/* <![CDATA[ */
		/* Block: reblog */
		
		.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
		.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
		.reblogger-note-content            { margin: 0 0 20px; }
		.reblog-post .wpcom-enhanced-excerpt-content { border-left: 3px solid #eee; padding-left: 15px; }
		.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
		.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
		.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
		.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
		
		.reblog-post .wpcom-enhanced-excerpt { clear: both; }
		
		.reblog-post .wpcom-enhanced-excerpt address,
		.reblog-post .wpcom-enhanced-excerpt li,
		.reblog-post .wpcom-enhanced-excerpt h1,
		.reblog-post .wpcom-enhanced-excerpt h2,
		.reblog-post .wpcom-enhanced-excerpt h3,
		.reblog-post .wpcom-enhanced-excerpt h4,
		.reblog-post .wpcom-enhanced-excerpt h5,
		.reblog-post .wpcom-enhanced-excerpt h6,
		.reblog-post .wpcom-enhanced-excerpt p { font-size: 100% !important; }
		
		.reblog-post .wpcom-enhanced-excerpt blockquote,
		.reblog-post .wpcom-enhanced-excerpt pre,
		.reblog-post .wpcom-enhanced-excerpt code,
		.reblog-post .wpcom-enhanced-excerpt q { font-size: 98% !important; }
		

		/* ]]> */
		</style>
		<meta name="application-name" content="MCU on Eclipse"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Everything on CodeWarrior, Microcontrollers and Eclipse"><meta name="msapplication-task" content="name=Subscribe;action-uri=http://mcuoneclipse.com/feed/;icon-uri=http://1.gravatar.com/blavatar/9da866e1670f1a76ae549a2d906047f5?s=16"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="title" content="Tutorial: Ultrasonic Ranging with the Freedom Board | MCU on Eclipse on WordPress.com">
<meta name="description" content="Everything on CodeWarrior, Microcontrollers and Eclipse (by Erich Styger)">
	<style type="text/css" id="twentyeleven-header-css">
			#site-title,
		#site-description {
			position: absolute !important;
			clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
			clip: rect(1px, 1px, 1px, 1px);
		}
		</style>
	
<script type="text/javascript">
var wpcom_ads = { bid: 32274278, pt: 'permalink', wa: 1, colorscheme: 'light', domain: 'mcuoneclipse.com', url: 'http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/', gid: '', };
</script>

		<script type="text/javascript" src="./HC-SR04_application_2_files/google_service.js"></script>
		<script type="text/javascript">
			GS_googleAddAdSenseService("ca-pub-3443918307802676");
			GS_googleEnableAllServices();
		</script><script src="./HC-SR04_application_2_files/google_ads.js"></script>
		<script type="text/javascript">
		GA_googleAddAttr( 'WordAds', '1' );
GA_googleAddAttr( 'BlogId', '32274278' );
GA_googleAddAttr( 'Domain', 'mcuoneclipse.com' );
GA_googleAddAttr( 'WordAds-MI', '1' );
GA_googleAddAttr( 'AdSafe', '1' );
GA_googleAddAttr( 'NoNetFill', '0' );
GA_googleAddAttr( 'Partner', 'AOL' );
GA_googleAddAttr( 'LangId', '1' );
GA_googleAddAttr( 'MarkupVer', '2' );
GA_googleAddAttr( 'Autotag', 'technology' );
GA_googleAddAttr( 'Tag', 'boards' )
GA_googleAddAttr( 'Tag', 'codewarrior' )
GA_googleAddAttr( 'Tag', 'embedded' )
GA_googleAddAttr( 'Tag', 'embedded-components' )
GA_googleAddAttr( 'Tag', 'kinetis' )
GA_googleAddAttr( 'Tag', 'kl25z-freedom-board' )
GA_googleAddAttr( 'Tag', 'processor-expert' )
GA_googleAddAttr( 'Tag', 'tips-tricks' )
GA_googleAddAttr( 'Tag', 'codewarrior' )
GA_googleAddAttr( 'Tag', 'eclipse' )
GA_googleAddAttr( 'Tag', 'embedded-component' )
GA_googleAddAttr( 'Tag', 'freedom-board' )
GA_googleAddAttr( 'Tag', 'kl25z-freedom-board' )
GA_googleAddAttr( 'Tag', 'processor-expert' )
GA_googleAddAttr( 'Tag', 'tipstricks' )
GA_googleAddAttr( 'theme_bg', 'ffffff' );
GA_googleAddAttr( 'theme_border', 'dddddd' );
GA_googleAddAttr( 'theme_text', '333333' );
GA_googleAddAttr( 'theme_link', '1bafe0' );
GA_googleAddAttr( 'theme_url', '1bafe0' );

		</script>
		<script type="text/javascript">
			GA_googleAddSlot('ca-pub-3443918307802676', 'Wordads_MIS_Mrec_Below_adsafe');

		</script>
		<script type="text/javascript">
			GA_googleFetchAds();
		</script>
		<script type="text/javascript">
		jQuery( window ).load( function() {
			jQuery( "a.wpadvert-about" ).text( "About these ads" );
		} );
		</script>
		<script type="text/javascript">
		var wpcom_adclk_hovering = false;
		var wpcom_adclk_recorded = false;
		var wpcom_adclk_theme = "Twenty Eleven";
		var wpcom_adclk_slot = "belowpost";
		var wpcom_adclk_network = ( typeof wpcom_adclk_network === "undefined" ) ? "" : wpcom_adclk_network ;

		jQuery(document).ready( function() {
			function wpcom_adclk_hover_yes() { wpcom_adclk_hovering = true; }
			function wpcom_adclk_hover_no() { wpcom_adclk_hovering = false; }
			jQuery(".wpa").click(wpcom_adclk_click);
			jQuery(".wpa iframe").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );
			jQuery(".wpa object").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );

			jQuery(window).blur( function() {
				if ( wpcom_adclk_hovering ) { wpcom_adclk_click(); }
			});
		});

		function wpcom_adclk_impression() {
			var stat_gif = document.location.protocol + "//stats.wordpress.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_imp_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_imp_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_imp_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_imp_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;
			new Image().src = stat_gif + "&baba=" + Math.random();
			return true;
		}

		function wpcom_adclk_click() {
			if (wpcom_adclk_recorded) { return true; } // no double counting
			var stat_gif = document.location.protocol + "//stats.wordpress.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_click_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_click_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_click_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_click_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;

			new Image().src = stat_gif + "&baba=" + Math.random();
			wpcom_adclk_recorded = true;
			var now=new Date(); var end=now.getTime()+250;
			while(true){now=new Date();if(now.getTime()>end){break;}}
			return true;
		}
		</script><link rel="stylesheet" type="text/css" href="./HC-SR04_application_2_files/shCore.css"><link rel="stylesheet" type="text/css" href="./HC-SR04_application_2_files/shThemeDefault.css"><style id="syntaxhighlighteranchor"></style>
<script type="text/javascript"> 
	window.google_analytics_uacct = "UA-52447-2"; 
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'none']);
	_gaq.push(['_setAllowLinker', true]);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script><script type="text/javascript" async="" src="./HC-SR04_application_2_files/ga.js"></script>
<script charset="utf-8" src="./HC-SR04_application_2_files/rate.php"></script><script src="./HC-SR04_application_2_files/jquery.min.js"></script><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./HC-SR04_application_2_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./HC-SR04_application_2_files/services.css"><meta id="stipple-loaded" property="stipple:loaded" content="true"><style type="text/css">
.stipple-dot-box,.stipple-new-dot-container,.stipple-dottable-wrapper{-moz-box-sizing:content-box!important;-webkit-box-sizing:content-box!important;box-sizing:content-box!important}.stipple-dot-box div,.stipple-dot-box span,.stipple-dot-box object,.stipple-dot-box iframe,.stipple-dot-box h1,.stipple-dot-box h2,.stipple-dot-box h3,.stipple-dot-box h4,.stipple-dot-box h5,.stipple-dot-box h6,.stipple-dot-box p,.stipple-dot-box pre,.stipple-dot-box a,.stipple-dot-box abbr,.stipple-dot-box acronym,.stipple-dot-box address,.stipple-dot-box code,.stipple-dot-box del,.stipple-dot-box dfn,.stipple-dot-box em,.stipple-dot-box img,.stipple-dot-box dl,.stipple-dot-box dt,.stipple-dot-box dd,.stipple-dot-box ol,.stipple-dot-box ul,.stipple-dot-box li,.stipple-dot-box fieldset,.stipple-dot-box form,.stipple-dot-box label,.stipple-dot-box legend,.stipple-dot-box caption,.stipple-dot-box tbody,.stipple-dot-box tfoot,.stipple-dot-box thead,.stipple-dot-box tr,.stipple-new-dot-container div,.stipple-new-dot-container span,.stipple-new-dot-container object,.stipple-new-dot-container iframe,.stipple-new-dot-container h1,.stipple-new-dot-container h2,.stipple-new-dot-container h3,.stipple-new-dot-container h4,.stipple-new-dot-container h5,.stipple-new-dot-container h6,.stipple-new-dot-container p,.stipple-new-dot-container pre,.stipple-new-dot-container a,.stipple-new-dot-container abbr,.stipple-new-dot-container acronym,.stipple-new-dot-container address,.stipple-new-dot-container code,.stipple-new-dot-container del,.stipple-new-dot-container dfn,.stipple-new-dot-container em,.stipple-new-dot-container img,.stipple-new-dot-container dl,.stipple-new-dot-container dt,.stipple-new-dot-container dd,.stipple-new-dot-container ol,.stipple-new-dot-container ul,.stipple-new-dot-container li,.stipple-new-dot-container fieldset,.stipple-new-dot-container form,.stipple-new-dot-container label,.stipple-new-dot-container legend,.stipple-new-dot-container caption,.stipple-new-dot-container tbody,.stipple-new-dot-container tfoot,.stipple-new-dot-container thead,.stipple-new-dot-container tr,.stipple-dottable-wrapper div,.stipple-dottable-wrapper span,.stipple-dottable-wrapper object,.stipple-dottable-wrapper iframe,.stipple-dottable-wrapper h1,.stipple-dottable-wrapper h2,.stipple-dottable-wrapper h3,.stipple-dottable-wrapper h4,.stipple-dottable-wrapper h5,.stipple-dottable-wrapper h6,.stipple-dottable-wrapper p,.stipple-dottable-wrapper pre,.stipple-dottable-wrapper a,.stipple-dottable-wrapper abbr,.stipple-dottable-wrapper acronym,.stipple-dottable-wrapper address,.stipple-dottable-wrapper code,.stipple-dottable-wrapper del,.stipple-dottable-wrapper dfn,.stipple-dottable-wrapper em,.stipple-dottable-wrapper img,.stipple-dottable-wrapper dl,.stipple-dottable-wrapper dt,.stipple-dottable-wrapper dd,.stipple-dottable-wrapper ol,.stipple-dottable-wrapper ul,.stipple-dottable-wrapper li,.stipple-dottable-wrapper fieldset,.stipple-dottable-wrapper form,.stipple-dottable-wrapper label,.stipple-dottable-wrapper legend,.stipple-dottable-wrapper caption,.stipple-dottable-wrapper tbody,.stipple-dottable-wrapper tfoot,.stipple-dottable-wrapper thead,.stipple-dottable-wrapper tr{margin:0!important;padding:0!important;border:0!important;outline:0!important;text-index:0!important;position:static;font-weight:inherit!important;font-style:inherit!important;font-size:100%!important;font-family:inherit!important;vertical-align:baseline!important;-moz-transition:all 0 ease-in 0!important;-webkit-transition:all 0 ease-in 0!important;transition:all 0 ease-in 0!important}.stipple-dot-box table,.stipple-new-dot-container table,.stipple-dottable-wrapper table{border-collapse:separate!important;border-spacing:0!important;vertical-align:middle!important}.stipple-dot-box caption,.stipple-dot-box th,.stipple-dot-box td,.stipple-new-dot-container caption,.stipple-new-dot-container th,.stipple-new-dot-container td,.stipple-dottable-wrapper caption,.stipple-dottable-wrapper th,.stipple-dottable-wrapper td{text-align:left!important;font-weight:normal!important;vertical-align:middle!important}.stipple-dot-box q,.stipple-dot-box blockquote,.stipple-new-dot-container q,.stipple-new-dot-container blockquote,.stipple-dottable-wrapper q,.stipple-dottable-wrapper blockquote{quotes:"" ""!important}.stipple-dot-box q:before,.stipple-dot-box q:after,.stipple-dot-box blockquote:before,.stipple-dot-box blockquote:after,.stipple-new-dot-container q:before,.stipple-new-dot-container q:after,.stipple-new-dot-container blockquote:before,.stipple-new-dot-container blockquote:after,.stipple-dottable-wrapper q:before,.stipple-dottable-wrapper q:after,.stipple-dottable-wrapper blockquote:before,.stipple-dottable-wrapper blockquote:after{content:""!important}.stipple-dot-box a img,.stipple-new-dot-container a img,.stipple-dottable-wrapper a img{border:none!important}.stipple-dot-box button,.stipple-dot-box input[type="button"],.stipple-new-dot-container button,.stipple-new-dot-container input[type="button"],.stipple-dottable-wrapper button,.stipple-dottable-wrapper input[type="button"]{text-transform:none!important}.stipple-dot-box *,.stipple-new-dot-container *,.stipple-dottable-wrapper *{-moz-box-sizing:content-box!important;-webkit-box-sizing:content-box!important;box-sizing:content-box!important}div.stipple-dot,.stipple-new-dot{display:block;z-index:155000!important;width:31px!important;height:31px!important;background-image:url(//stipple.cachefly.net/production/dots/sprite.png)!important;background-position:-248px 0!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important;border:none!important;padding:0!important;margin:0!important;-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;position:absolute!important}.stipple-mobile div.stipple-dot,.stipple-mobile .stipple-new-dot{width:45px!important;height:45px!important;background-image:url(//stipple.cachefly.net/production/dots/mobile/sprite.png)!important;background-position:-450px 0!important}div.stipple-dot-type-product{background-position:-279px 0!important}div.stipple-dot-type-audio{background-position:0 0!important}div.stipple-dot-type-event{background-position:-62px 0!important}div.stipple-dot-type-image{background-position:-93px 0!important}div.stipple-dot-type-info{background-position:-124px 0!important}div.stipple-dot-type-link{background-position:-155px 0!important}div.stipple-dot-type-location{background-position:-186px 0!important}div.stipple-dot-type-person{background-position:-217px 0!important}div.stipple-dot-type-video{background-position:-310px 0!important}div.stipple-dot-type-close,.stipple-dottable-wrapper .stipple-call-to-action.stipple-dot-type-close{background-position:-31px 0!important}.stipple-mobile div.stipple-dot-type-product{background-position:-495px 0!important}.stipple-mobile div.stipple-dot-type-audio{background-position:0 0!important}.stipple-mobile div.stipple-dot-type-event{background-position:-135px 0!important}.stipple-mobile div.stipple-dot-type-image{background-position:-180px 0!important}.stipple-mobile div.stipple-dot-type-info{background-position:-225px 0!important}.stipple-mobile div.stipple-dot-type-link{background-position:-270px 0!important}.stipple-mobile div.stipple-dot-type-location{background-position:-315px 0!important}.stipple-mobile div.stipple-dot-type-person{background-position:-405px 0!important}.stipple-mobile div.stipple-dot-type-video{background-position:-540px 0!important}.stipple-mobile div.stipple-dot-type-close,.stipple-mobile .stipple-dottable-wrapper .stipple-call-to-action.stipple-dot-type-close,.stipple-dottable-wrapper .stipple-mobile .stipple-call-to-action.stipple-dot-type-close,.stipple-dottable-wrapper.stipple-mobile .stipple-call-to-action.stipple-dot-type-close{background-position:-90px 0!important}.stipple-dottable-wrapper .stipple-status-box-container{width:100%!important;position:absolute!important;top:50px!important;text-align:center!important}.stipple-dottable-wrapper .stipple-status-box{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;border-radius:10px!important;-moz-border-radius:10px!important;-webkit-border-radius:10px!important;color:white!important;background-color:black!important;background-color:rgba(0,0,0,0.75)!important;padding:15px!important;font-size:18px!important;font-weight:bold!important;text-align:center!important;margin:0 auto!important}.stipple-new-dot-overlay,.stipple-mobile-overlay{z-index:150000!important;position:absolute!important;left:0!important;top:0!important;height:100%!important;width:100%!important;background-color:transparent;cursor:crosshair!important}.stipple-mobile-overlay{cursor:auto!important}.stipple-new-dot-overlay.stipple-inactive,.stipple-inactive.stipple-mobile-overlay{cursor:auto!important}.stipple-new-dot-container{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;background:white!important;width:270px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;line-height:1!important;z-index:300000!important;color:#1e1e1e!important;-moz-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-webkit-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;box-shadow:0 1px 7px rgba(0,0,0,0.4)!important}.stipple-new-dot-container input{float:none!important}.stipple-new-dot-container .stipple-dot-specific-fields{margin-left:15px!important;margin-right:15px!important;margin-bottom:15px!important}.stipple-new-dot-container .stipple-link-providers{border-top:1px solid #bebebe!important;text-align:center!important;margin-top:10px!important;margin-bottom:10px!important;padding-top:10px!important;padding-left:13px!important;padding-right:13px!important;font-size:11px!important;line-height:14px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;color:#666!important;font-style:italic!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons{margin-top:10px!important;margin-left:auto!important;margin-right:auto!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-icon{display:inline-block!important;width:16px!important;height:16px!important;margin-right:5px!important;background-image:url(//stipple.cachefly.net/production/external/link_providers/icon/sprite.png)!important;background-repeat:no-repeat!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-eventbrite{background-position:0 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-facebook{background-position:-16px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-flickr{background-position:-32px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-foursquare{background-position:-48px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-google-maps{background-position:-64px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-soundcloud{background-position:-80px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-twitter{background-position:-96px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-vimeo{background-position:-112px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-wikipedia{background-position:-128px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-youtube{background-position:-144px 0!important}.stipple-new-dot-container .stipple-new-dot-buttons{text-align:right!important;margin-top:0!important;margin-bottom:5px!important;background-color:transparent!important;padding:10px 13px 5px!important;height:24px!important;border-top:1px solid #bebebe!important}.stipple-new-dot-container .stipple-new-dot-buttons input:active,.stipple-new-dot-container .stipple-new-dot-buttons img:active{position:relative!important;top:1px!important}.stipple-new-dot-container .stipple-new-dot-buttons .stipple-new-dot-save-button,.stipple-new-dot-container .stipple-new-dot-buttons .stipple-new-dot-edit-button{height:24px!important}.stipple-new-dot-container .stipple-new-dot-buttons .stipple-new-dot-cancel-button{height:24px!important;float:left!important}.stipple-new-dot-container form input[type="text"],.stipple-new-dot-container form input[type="url"],.stipple-new-dot-container form textarea,.stipple-new-dot-container form select{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;margin:6px auto!important;display:block;width:230px!important;height:auto!important;padding:2px 5px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;color:black!important;border:1px solid #d3d3d3!important;text-transform:none!important}.stipple-new-dot-container form input[type="text"],.stipple-new-dot-container form input[type="url"],.stipple-new-dot-container form textarea{border:1px solid black!important;border:1px solid rgba(0,0,0,0.29297)!important;background-color:white!important;-moz-box-shadow:0 2px 0 #fff,0 1px 1px rgba(0,0,0,0.2) inset!important;-webkit-box-shadow:0 2px 0 #fff,0 1px 1px rgba(0,0,0,0.2) inset!important;box-shadow:0 2px 0 #fff,0 1px 1px rgba(0,0,0,0.2) inset!important}.stipple-new-dot-container form input[type="text"].stipple-empty-input,.stipple-new-dot-container form input[type="url"].stipple-empty-input,.stipple-new-dot-container form textarea.stipple-empty-input{color:#a7a7a7!important;font-style:italic!important}.stipple-new-dot-container form textarea{padding-top:5px!important;padding-bottom:5px!important;border:1px solid #999!important;box-shadow:0 1px 0 #e7e7e7 inset!important}.stipple-new-dot-container form select{font-size:11px!important;background-color:#f7f7f7!important;width:242px!important;-moz-box-shadow:0 2px 0 #FFF!important;-webkit-box-shadow:0 2px 0 #FFF!important;box-shadow:0 2px 0 #FFF!important;margin-bottom:10px!important;margin-top:6px!important}.stipple-new-dot-container form label{display:inline!important;color:#666!important;font-size:11px!important}.stipple-new-dot-container form label .stipple-validation-error{float:right!important;color:#fc4a4a!important}.stipple-new-dot-container form .stipple-new-dot-main-prompt{display:block!important;text-align:center!important;width:auto!important;float:none!important;padding:0!important}.stipple-new-dot-container form .stipple-fetching-link{height:140px!important;text-align:center!important}.stipple-new-dot-container form .stipple-fetching-link .stipple-ajax-spinner{text-align:center!important;position:relative!important;top:60px!important}.stipple-new-dot-container form .stipple-fetching-link img{height:20px!important;width:20px!important}.stipple-new-dot-container form .stipple-info-preview{padding:0 13px 5px!important}.stipple-new-dot-container form .stipple-info-preview .stipple-dot-box-title{background-image:none!important;height:auto!important;width:auto!important;text-indent:0!important;margin:auto!important;color:black!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:bold!important;line-height:normal!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;margin:0!important;word-wrap:break-word!important;max-width:270px!important}.stipple-new-dot-container form .stipple-info-preview .stipple-dot-box-title .stipple-dot-box-title-text{padding:15px 10px 5px!important;float:left!important;word-wrap:break-word!important;max-width:75%!important}.stipple-new-dot-container form .stipple-info-preview .stipple-dot-box-title .stipple-dot-box-close-button{position:absolute!important;top:0!important;right:0!important;height:45px!important;width:45px!important;cursor:pointer!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important;background-position:-18px 0!important}.stipple-new-dot-container form .stipple-info-preview .stipple-dot-box-title a{color:#262626!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-new-dot-container form .stipple-info-preview .stipple-note{margin-top:10px!important;word-wrap:break-word!important}.stipple-new-dot-container form .stipple-info-preview .stipple-note b,.stipple-new-dot-container form .stipple-info-preview .stipple-note strong{font-weight:bold!important}.stipple-new-dot-container form .stipple-link-previews{padding:0 13px 5px!important;margin-top:10px!important;margin-bottom:10px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data{margin-top:0!important;word-wrap:break-word!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data:first-child{margin-top:0!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-image{display:inline-block!important;margin-left:2px!important;margin-right:10px!important;text-align:center!important;float:left!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-image img{display:block!important;max-width:60px!important;max-height:60px!important;margin:auto!important;height:auto!important;width:auto!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:170px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-container strong{font-weight:bold!important;color:#666!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-wide-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:250px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-wide-container strong{font-weight:bold!important;color:#666!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-itunes-audio-preview{margin-top:20px!important;width:250px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container{margin:10px 0 0!important;padding:0!important;min-height:32px!important;background-repeat:no-repeat!important;background-position:center!important;text-align:center!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container:first-child{margin-top:0!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container .stipple-embedded-image{width:auto!important;height:auto!important;max-width:250px!important;max-height:none!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container .stipple-embed-click-to-play{height:100%!important;width:100%!important;cursor:pointer!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product{padding:5px 5px 9px!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product li{list-style-type:none!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product .stipple-autocomplete-product-image{height:auto!important;width:auto!important;max-width:60px!important;max-height:60px!important;border:1px solid #989898!important;margin-left:10px!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product .stipple-autocomplete-name{font-weight:bold!important}.stipple-new-dot-container .stipple-new-dot-chooser{width:100%!important;background-color:transparent!important;color:black!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;font-size:11px!important;font-weight:bold!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-style:normal!important;height:45px!important;-moz-border-radius-topleft:4px!important;-moz-border-radius-topright:4px!important;-webkit-border-top-left-radius:4px!important;-webkit-border-top-right-radius:4px!important;border-top-left-radius:4px!important;border-top-right-radius:4px!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice{width:135px!important;height:30px!important;line-height:30px!important;margin:0!important;padding:0!important;background-color:#e6e6e6!important;display:inline-block!important;text-align:center!important;cursor:pointer!important;border-bottom:1px solid #bebebe!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice.stipple-selected{display:inline-block!important;background-color:transparent!important;border-bottom:none!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice:first-child{-moz-border-radius-topleft:4px!important;-webkit-border-top-left-radius:4px!important;border-top-left-radius:4px!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice:last-child{-moz-border-radius-topright:4px!important;-webkit-border-top-right-radius:4px!important;border-top-right-radius:4px!important;border-left:1px solid #bebebe!important;width:134px!important}a.stipple-button,input.stipple-button{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;border:1px solid #b3aaaa!important;color:#404040!important;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6))!important;background:-moz-linear-gradient(top,#fff,#e6e6e6)!important;background:-webkit-linear-gradient(top,#fff,#e6e6e6)!important;height:20px!important;width:50px!important;display:inline-block;line-height:normal!important}a.stipple-button:active,input.stipple-button:active{position:relative!important;top:1px!important}.stipple-dot-box a.stipple-dot-box-button{-moz-border-radius:10px!important;-webkit-border-radius:10px!important;border-radius:10px!important;color:black!important;cursor:pointer!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:normal!important;font-style:normal!important;height:20px!important;width:70px!important;text-decoration:none!important;display:inline-block!important;text-align:center!important}.stipple-dot-box a.stipple-dot-box-button .stipple-button-label{display:inline-block!important;vertical-align:top!important;line-height:20px!important}.stipple-dot-box a.stipple-dot-box-button:active .stipple-button-label{margin-top:1px!important}.stipple-dot-box{z-index:210000!important;position:absolute!important;line-height:normal!important;display:none;border:none!important;background-color:white!important;background-color:rgba(255,255,255,0.95)!important;*background-color:white!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:none!important;-moz-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-webkit-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;color:#404040!important}.stipple-dot-box .stipple-dot-box-title{background-image:none!important;height:auto!important;width:auto!important;text-indent:0!important;margin:auto!important;color:black!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:bold!important;line-height:normal!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;margin:0!important;word-wrap:break-word!important;max-width:270px!important}.stipple-dot-box .stipple-dot-box-title .stipple-dot-box-title-text{padding:15px 10px 5px!important;float:left!important;word-wrap:break-word!important;max-width:75%!important}.stipple-dot-box .stipple-dot-box-title .stipple-dot-box-close-button{position:absolute!important;top:0!important;right:0!important;height:45px!important;width:45px!important;cursor:pointer!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important;background-position:-18px 0!important}.stipple-dot-box .stipple-dot-box-title a{color:#262626!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-dot-box .stipple-dot-box-inner{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:normal!important;font-style:normal!important;line-height:16px!important;text-align:left!important;padding:0 10px 10px!important;border-radius:2px!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;position:relative!important}.stipple-dot-box .stipple-dot-box-inner .stipple-attribution{font-size:11px!important;color:#999!important}.stipple-dot-box .stipple-dot-box-inner span.stipple-attribution{float:left!important}.stipple-dot-box .stipple-dot-box-inner .stipple-provider-logo{border:none!important}.stipple-dot-box .stipple-dot-box-inner .stipple-provider-logo img{height:16px!important;width:16px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-provider-logo-topright{border:none!important;position:absolute!important;top:10px!important;right:10px!important;left:auto!important;bottom:auto!important}.stipple-dot-box .stipple-dot-box-inner .stipple-provider-logo-topright img{height:16px!important;width:16px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-info-dot-box-note{word-wrap:break-word!important}.stipple-dot-box .stipple-dot-box-inner .stipple-external-link{display:inline-block!important;float:right!important;text-align:right!important;width:17px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-bottom-ad-container{margin-top:10px!important;text-align:center!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data{margin-top:0!important;word-wrap:break-word!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data:first-child{margin-top:0!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image{display:inline-block!important;margin-left:2px!important;margin-right:10px!important;text-align:center!important;float:left!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image img{display:block!important;max-width:60px!important;max-height:60px!important;margin:auto!important;height:auto!important;width:auto!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:170px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container strong{font-weight:bold!important;color:#666!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-wide-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:250px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-wide-container strong{font-weight:bold!important;color:#666!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-itunes-audio-preview{margin-top:20px!important;width:250px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container{margin:10px 0 0!important;padding:0!important;min-height:32px!important;background-repeat:no-repeat!important;background-position:center!important;text-align:center!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container:first-child{margin-top:0!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container .stipple-embedded-image{width:auto!important;height:auto!important;max-width:250px!important;max-height:none!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container .stipple-embed-click-to-play{height:100%!important;width:100%!important;cursor:pointer!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-edit-toggler{display:block!important;height:10px!important;width:10px!important;position:absolute!important;right:10px!important;bottom:3px!important;cursor:pointer!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-edit-toggler.stipple-toggler-off{background-image:url(//stipple.cachefly.net/production/external/point-down.png)!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-edit-toggler.stipple-toggler-on{background-image:url(//stipple.cachefly.net/production/external/point-up.png)!important}.stipple-dot-box .stipple-dot-box-edit-drawer{height:35px!important;border-top:1px solid #d8d8d8!important;background-color:#fcfcfc!important;-moz-border-radius-bottomleft:2px!important;-webkit-border-bottom-left-radius:2px!important;border-bottom-left-radius:2px!important;-moz-border-radius-bottomright:2px!important;-webkit-border-bottom-right-radius:2px!important;border-bottom-right-radius:2px!important;overflow:hidden}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link-container,.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link-container{text-align:center!important;height:25px!important;padding-top:10px!important;line-height:10px!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link-container{border-right:1px solid #d8d8d8!important;width:50%!important;float:left!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link-container{overflow:hidden!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link,.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link{border:none!important;text-decoration:underline!important;font-size:11px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link{color:#666!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link{color:#bf0000!important}.stipple-dot-box-info .stipple-dot-box-inner{width:250px!important}.stipple-dot-box-info.stipple-dot-box-info-youtube .stipple-dot-box-title,.stipple-dot-box-info.stipple-dot-box-info-vimeo .stipple-dot-box-title,.stipple-dot-box-info.stipple-dot-box-info-mlbvideo .stipple-dot-box-title,.stipple-dot-box-info.stipple-dot-box-info-genericvideo .stipple-dot-box-title,.stipple-dot-box-info.stipple-dot-box-info-rcs .stipple-dot-box-title{max-width:341px!important}.stipple-dot-box-info.stipple-dot-box-info-youtube .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info.stipple-dot-box-info-vimeo .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info.stipple-dot-box-info-mlbvideo .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info.stipple-dot-box-info-genericvideo .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info.stipple-dot-box-info-rcs .stipple-dot-box-title .stipple-dot-box-title-text{max-width:75%!important}.stipple-dot-box-info.stipple-dot-box-info-youtube .stipple-dot-box-inner,.stipple-dot-box-info.stipple-dot-box-info-vimeo .stipple-dot-box-inner,.stipple-dot-box-info.stipple-dot-box-info-mlbvideo .stipple-dot-box-inner,.stipple-dot-box-info.stipple-dot-box-info-genericvideo .stipple-dot-box-inner,.stipple-dot-box-info.stipple-dot-box-info-rcs .stipple-dot-box-inner{width:321px!important}.stipple-dot-box-info .stipple-note{margin-top:0!important}.stipple-dot-box-info .stipple-note b,.stipple-dot-box-info .stipple-note strong{font-weight:bold!important}.stipple-dot-box-info-eventbrite .stipple-dot-box-inner span.stipple-attribution{float:none!important;margin-left:0!important;display:block!important;clear:both!important}.stipple-dot-box-info-facebook .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info-twitter .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info-foursquare .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info-soundcloud .stipple-dot-box-title .stipple-dot-box-title-text{padding:15px 10px 0!important}.stipple-dot-box-info-facebook span.stipple-attribution,.stipple-dot-box-info-twitter span.stipple-attribution,.stipple-dot-box-info-foursquare span.stipple-attribution,.stipple-dot-box-info-soundcloud span.stipple-attribution{margin-bottom:10px!important;max-width:205px!important}.stipple-dot-box-info-facebook .stipple-info-dot-box-note,.stipple-dot-box-info-twitter .stipple-info-dot-box-note,.stipple-dot-box-info-foursquare .stipple-info-dot-box-note,.stipple-dot-box-info-soundcloud .stipple-info-dot-box-note{margin-bottom:10px!important}.stipple-dot-box-info-googlemaps .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info-itunes .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info-wikipedia .stipple-dot-box-title .stipple-dot-box-title-text{padding:15px 10px 10px!important}.stipple-dot-box-info-youtube .stipple-dot-box-title .stipple-dot-box-title-text,.stipple-dot-box-info-vimeo .stipple-dot-box-title .stipple-dot-box-title-text{padding-bottom:0!important}.stipple-dot-box-info-itunes .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image{margin-left:0!important;margin-right:5px!important}.stipple-dot-box-info-itunes .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image img{max-width:100px!important;max-height:100px!important}.stipple-dot-box-info-itunes .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container{position:relative!important;top:36px!important}.stipple-dot-box-info-itunes .stipple-dot-box-inner .stipple-link-data .stipple-buy-button{cursor:pointer!important;vertical-align:middle!important;color:white!important;background-color:#35aaf0!important;background:-webkit-linear-gradient(#35aaf0 0,#258de4 100%)!important;background:-moz-linear-gradient(#35aaf0 0,#258de4 100%)!important;background:-ms-linear-gradient(#35aaf0 0,#258de4 100%)!important;background:linear-gradient(#35aaf0 0,#258de4 100%)!important;border:none;-moz-border-radius:3px!important;-webkit-border-radius:3px!important;border-radius:3px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;-moz-text-shadow:rgba(0,0,0,0.5) 0 1px 0!important;-webkit-text-shadow:rgba(0,0,0,0.5) 0 1px 0!important;text-shadow:rgba(0,0,0,0.5) 0 1px 0!important;width:auto!important;font-weight:400!important;height:26px!important;font-size:13px!important;padding:0 22px!important}.stipple-dot-box a,.stipple-link-previews .stipple-link-data a{color:#666!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-dot-box a.stipple-linked-image,.stipple-link-previews .stipple-link-data a.stipple-linked-image{border-bottom:none!important}.stipple-dot-box-product .stipple-dot-box-title{display:block!important}.stipple-dot-box-product .stipple-product-brand{font-size:12px!important}.stipple-dot-box-product .stipple-price-and-links{display:block!important;vertical-align:top!important}.stipple-dot-box-product .stipple-price-and-links .stipple-price{font-size:12px!important;word-wrap:break-word!important}.stipple-dot-box-product .stipple-price-and-links .stipple-product-price-separator{font-size:9px!important}.stipple-dot-box-product .stipple-product-info{float:left!important;margin-left:10px!important;min-width:130px!important;max-width:230px!important}.stipple-dot-box-product .stipple-dot-box-inner{min-width:200px!important;min-height:60px!important;max-width:300px!important;padding:0 10px 10px!important;-moz-border-radius-bottomleft:0!important;-webkit-border-bottom-left-radius:0!important;border-bottom-left-radius:0!important;-moz-border-radius-bottomright:0!important;-webkit-border-bottom-right-radius:0!important;border-bottom-right-radius:0!important}.stipple-dot-box-product .stipple-dot-box-inner img.stipple-product-dot-image{width:inherit!important;height:auto!important;display:block!important;max-width:60px!important;max-height:60px!important;margin-left:auto!important;margin-right:auto!important;-webkit-border-radius:2px!important;border-radius:2px!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container{max-width:60px!important;max-height:60px!important;float:left!important;word-wrap:break-word!important;margin:0!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;position:relative}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container:after{-webkit-border-radius:2px!important;border-radius:2px!important;-moz-box-shadow:1px 1px 0 rgba(0,0,0,0.3) inset,-1px -1px 0 rgba(0,0,0,0.3) inset,0 1px 0 rgba(255,255,255,0.75)!important;-webkit-box-shadow:1px 1px 0 rgba(0,0,0,0.3) inset,-1px -1px 0 rgba(0,0,0,0.3) inset,0 1px 0 rgba(255,255,255,0.75)!important;box-shadow:1px 1px 0 rgba(0,0,0,0.3) inset,-1px -1px 0 rgba(0,0,0,0.3) inset,0 1px 0 rgba(255,255,255,0.75)!important;position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;content:""!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container .stipple-dot-box-popup-link{width:60px!important;display:block!important;float:left!important;margin:0!important;overflow:hidden!important;-moz-box-shadow:0 1px 0 white!important;-webkit-box-shadow:0 1px 0 white!important;box-shadow:0 1px 0 white!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container .stipple-dot-box-popup-link>div{float:none!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-button-container{margin-top:9px!important}.stipple-dot-box-product .stipple-local-offers-container{max-width:300px!important;font-size:12px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt{color:#efefef!important;-moz-text-shadow:0 -1px 0 black!important;-webkit-text-shadow:0 -1px 0 black!important;text-shadow:0 -1px 0 black!important;-moz-box-shadow:0 1px 0 #b2b2b2 inset,0 1px 6px rgba(0,0,0,0.2)!important;-webkit-box-shadow:0 1px 0 #b2b2b2 inset,0 1px 6px rgba(0,0,0,0.2)!important;box-shadow:0 1px 0 #b2b2b2 inset,0 1px 6px rgba(0,0,0,0.2)!important;-webkit-text-stroke:1px solid #202020!important;background-color:#262626!important;cursor:pointer!important;text-align:center!important;height:25px!important;-moz-border-radius-bottomleft:2px!important;-webkit-border-bottom-left-radius:2px!important;border-bottom-left-radius:2px!important;-moz-border-radius-bottomright:2px!important;-webkit-border-bottom-right-radius:2px!important;border-bottom-right-radius:2px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt .stipple-local-offers-prompt-inner{padding-top:4px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt img,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt .stipple-local-offers-text{vertical-align:middle!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list{background-color:white!important;padding:3px 6px 3px 6px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list a,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list a:hover{color:#09f!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container{padding:3px 0!important;text-align:left!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container .stipple-local-offer-content{vertical-align:middle!important;display:inline-block!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container .stipple-local-offer-image ~ .stipple-local-offer-content{max-width:263px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container .stipple-local-offer-image{width:20px!important;vertical-align:middle!important;word-wrap:break-word!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-provider,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-price{font-weight:bold!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-address{font-size:10px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-address a,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-address a:hover{color:#333!important}a.stipple-shop{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;border:1px solid #b3aaaa!important;color:#404040!important;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6))!important;background:-moz-linear-gradient(top,#fff,#e6e6e6)!important;background:-webkit-linear-gradient(top,#fff,#e6e6e6)!important;display:inline-block!important;height:20px!important;width:48px!important}a.stipple-shop:active{position:relative!important;top:1px!important}a.stipple-shop:active{position:relative!important;top:1px!important}.stipple-new-dot-container form .stipple-product-fields .stipple-autocomplete-box{position:absolute!important;border-top:none!important}.stipple-new-dot-container form .stipple-product-fields .stipple-autocomplete-box .stipple-autocomplete-item{width:220px!important}.stipple-new-dot-container .stipple-autocomplete-box{border-top:1px solid #bebebe!important;padding:5px 0!important;z-index:125000!important;display:none;height:140px!important;overflow-x:hidden!important;overflow-y:auto!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product-button{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;border:1px solid #b3aaaa!important;color:#404040!important;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6))!important;background:-moz-linear-gradient(top,#fff,#e6e6e6)!important;background:-webkit-linear-gradient(top,#fff,#e6e6e6)!important;margin-bottom:5px!important;margin-top:10px!important;width:100px!important;margin-top:4px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product-button:active{position:relative!important;top:1px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product-prompt{color:#666!important;font-style:italic!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results{height:140px!important;text-align:center!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-autocomplete-add-product-button,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-autocomplete-add-product-prompt,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-ajax-spinner,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-autocomplete-add-product-button,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-autocomplete-add-product-prompt,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-ajax-spinner{text-align:center!important;position:relative!important;top:60px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-autocomplete-add-product-button:active,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-autocomplete-add-product-button:active{top:61px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader img,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results img{height:20px!important;width:20px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-items{list-style:none!important;padding:0!important;margin:0!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-items .stipple-autocomplete-add-product-prompt{text-align:center!important;margin-top:10px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-item{cursor:pointer!important;padding:5px 0 5px 10px!important;font-style:normal!important;font-weight:normal!important;background-color:transparent!important;color:#666!important;margin:0!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product{text-align:center!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-selected{background-color:#f1f1f1!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-partial-match{text-decoration:underline!important;font-weight:bold!important}.stipple-new-dot-container .stipple-autocomplete-provider-photo,.stipple-new-dot-container .stipple-autocomplete-names{display:inline-block!important;vertical-align:top!important;-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;border:none!important}.stipple-new-dot-container .stipple-autocomplete-provider-photo .stipple-autocomplete-brand-name,.stipple-new-dot-container .stipple-autocomplete-names .stipple-autocomplete-brand-name{max-width:190px!important;margin-top:4px!important}.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-friend-avatar,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-provider-photo,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-product-image{width:32px!important;height:32px!important;padding:0!important}.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-product-image{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:1px solid #989898!important;margin-left:6px!important}.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-names{margin-left:9px!important;max-width:190px!important}.stipple-dottable-wrapper.stipple-static-photo-top .stipple-photo-top{display:block!important;opacity:1!important}.stipple-photo-top,.stipple-photo-actions{z-index:175000!important;min-height:30px!important;position:absolute!important;background:-webkit-linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;background:-moz-linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;background:-ms-linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;background:linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;-webkit-box-shadow:rgba(0,0,0,0.25) 0 1px 0 inset!important;-moz-box-shadow:rgba(0,0,0,0.25) 0 1px 0 inset!important;box-shadow:rgba(0,0,0,0.25) 0 1px 0 inset!important}.stipple-photo-top{left:0!important;top:0!important;width:100%!important;border-bottom:1px solid rgba(0,0,0,0.5)!important;height:30px!important;line-height:normal!important}.stipple-photo-top .stipple-show-product-container{overflow:hidden!important;text-align:left!important;margin:0 5px 0 10px!important}.stipple-photo-top .stipple-show-product-container{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;line-height:30px!important;color:#f1f1f1;font-weight:normal!important;white-space:nowrap!important;text-overflow:ellipsis!important;-moz-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;-webkit-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;text-shadow:rgba(0,0,0,0.75) 0 1px 0!important}.stipple-photo-top .stipple-show-product-container>*{vertical-align:middle!important}.stipple-photo-top .stipple-show-product-container .stipple-product-name{background-image:none!important;height:auto!important;width:auto!important;text-indent:0!important;margin:auto!important;color:black!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:bold!important;line-height:normal!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;margin:0!important;word-wrap:break-word!important;max-width:270px!important;color:#f1f1f1!important;-moz-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;-webkit-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;float:none!important;margin-left:3px!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;display:inline-block!important;height:16px!important;line-height:16px!important}.stipple-photo-top .stipple-show-product-container .stipple-product-name .stipple-dot-box-title-text{padding:15px 10px 5px!important;float:left!important;word-wrap:break-word!important;max-width:75%!important}.stipple-photo-top .stipple-show-product-container .stipple-product-name .stipple-dot-box-close-button{position:absolute!important;top:0!important;right:0!important;height:45px!important;width:45px!important;cursor:pointer!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important;background-position:-18px 0!important}.stipple-photo-top .stipple-show-product-container .stipple-product-name a{color:#262626!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-photo-top .stipple-show-product-container .stipple-product-brand,.stipple-photo-top .stipple-show-product-container .stipple-price,.stipple-photo-top .stipple-show-product-container .stipple-product-name{margin-left:3px!important}.stipple-photo-top .stipple-show-product-container .stipple-bull-separator{font-size:8px!important;margin-left:3px!important}.stipple-photo-top a.stipple-shop,.stipple-photo-top input.stipple-button{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;color:white!important;border:1px solid black!important;-moz-text-shadow:black 0 1px 1px!important;-webkit-text-shadow:black 0 1px 1px!important;text-shadow:black 0 1px 1px!important;-moz-box-shadow:rgba(0,0,0,0.15) 0 1px 0,rgba(255,255,255,0.25) 0 1px 0 inset!important;-webkit-box-shadow:rgba(0,0,0,0.15) 0 1px 0,rgba(255,255,255,0.25) 0 1px 0 inset!important;box-shadow:rgba(0,0,0,0.15) 0 1px 0,rgba(255,255,255,0.25) 0 1px 0 inset!important;background:darkgray!important;background:-moz-linear-gradient(#4b4b4b,#242424)!important;background:-webkit-linear-gradient(#4b4b4b,#242424)!important;background:-ms-linear-gradient(#4b4b4b,#242424)!important;background:linear-gradient(#4b4b4b,#242424)!important;font-size:11px!important}.stipple-photo-top a.stipple-shop:active,.stipple-photo-top input.stipple-button:active{position:relative!important;top:1px!important}.stipple-photo-actions{display:inline-block;left:0!important;bottom:0!important;right:auto!important;top:auto!important;height:30px!important;border-top:1px solid black!important;border-right:1px solid black!important;border-top:1px solid rgba(0,0,0,0.5)!important;border-right:1px solid rgba(0,0,0,0.5)!important;-moz-border-top-right-radius:2px!important;-webkit-border-top-right-radius:2px!important;border-top-right-radius:2px!important;-moz-box-shadow:rgba(255,255,255,0.25) 0 1px 0 inset!important;-webkit-box-shadow:rgba(255,255,255,0.25) 0 1px 0 inset!important;box-shadow:rgba(255,255,255,0.25) 0 1px 0 inset!important}.stipple-photo-actions .stipple-photo-action{display:block!important;width:36px!important;height:30px!important;border:none!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-position:center!important;float:left!important}.stipple-photo-actions .stipple-photo-action-tag{background-position:-292px 0!important}.stipple-photo-actions .stipple-photo-action-tag.stipple-active{background-position:-256px 0!important}.stipple-photo-actions .stipple-photo-actions-divider{display:block!important;float:left!important;height:30px!important;width:1px!important;background-color:black!important;background-color:rgba(0,0,0,0.5)!important}.stipple-dottable-wrapper .stipple-mobile-call-to-action{height:45px!important;width:45px!important;display:block;margin:0!important;padding:0!important;position:absolute!important;top:0!important;left:0!important;right:auto!important;bottom:auto!important;background-image:url(//stipple.cachefly.net/production/dots/mobile/sprite.png)!important;background-repeat:no-repeat!important;background-position:-360px 0!important;cursor:pointer!important;z-index:155001!important}.stipple-dottable-wrapper .stipple-mobile-call-to-action.stipple-active{display:none}.stipple-dottable-wrapper .stipple-call-to-action{height:30px!important;width:30px!important;display:block;filter:alpha(opacity=0);opacity:0;margin:0!important;padding:0!important;position:absolute!important;top:10px!important;right:10px!important;left:auto!important;bottom:auto!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-position:-136px 0!important;cursor:pointer!important;z-index:155000!important}.stipple-dottable-wrapper .stipple-call-to-action.stipple-dot-type-close{background-image:url(//stipple.cachefly.net/production/dots/sprite.png)!important}.stipple-dottable-wrapper.stipple-mobile .stipple-call-to-action{top:0!important;right:0!important;height:45px!important;width:45px!important;background-image:url(//stipple.cachefly.net/production/dots/mobile/sprite.png)!important;background-position:-45px 0!important}.stipple-metadata-box,.stipple-shop-box{background-color:white!important;background-color:rgba(255,255,255,0.95)!important;*background-color:white!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:none!important;-moz-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-webkit-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;color:#666!important;position:absolute!important;margin:0!important;z-index:210000!important;font-size:11px!important;line-height:normal!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important}.stipple-metadata-box input[type="text"],.stipple-metadata-box input[type="url"],.stipple-metadata-box input[type="number"],.stipple-metadata-box textarea,.stipple-shop-box input[type="text"],.stipple-shop-box input[type="url"],.stipple-shop-box input[type="number"],.stipple-shop-box textarea{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:1px solid #ccc!important;font-size:10px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;-moz-box-shadow:0 1px 0 #e7e7e7 inset!important;-webkit-box-shadow:0 1px 0 #e7e7e7 inset!important;box-shadow:0 1px 0 #e7e7e7 inset!important;padding:0 5px!important;color:darkgray!important;padding-top:3px!important}.stipple-metadata-box a,.stipple-shop-box a{-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;display:inline!important;padding:0!important;font-size:11px!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;background:none!important;border:none!important;border-bottom:1px dotted #ccc!important;-moz-border-radius:0!important;-webkit-border-radius:0!important;border-radius:0!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;text-decoration:none!important;color:#666!important}.stipple-metadata-box .stipple-metadata-content,.stipple-shop-box .stipple-metadata-content{margin:2px 0 0!important;word-wrap:break-word!important}.stipple-metadata-box{padding:20px 15px 15px!important;width:245px!important;font-weight:normal!important}.stipple-metadata-box .stipple-metadata-box-first-child,.stipple-metadata-box .stipple-hidden{height:0!important;width:0!important;margin:0!important;padding:0!important}.stipple-metadata-box .stipple-metadata-box-first-child+.stipple-metadata-container,.stipple-metadata-box .stipple-hidden+.stipple-metadata-container{border-top-style:none!important;padding-top:0!important}.stipple-metadata-box .stipple-metadata-container{border-top:1px solid #d8d8d8!important;padding-top:15px!important;margin-bottom:15px!important}.stipple-metadata-box .stipple-metadata-container:last-child{margin-bottom:0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-claim-flag{position:absolute!important;top:0!important;right:15px!important;width:18px!important;height:19px!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-position:0 0!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container{margin-left:auto!important;margin-right:auto!important;padding:0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-avatar-container{float:left!important;height:50px!important;width:50px!important;margin-right:10px!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-avatar-container a{border:none!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-avatar-container .stipple-metadata-copyright-holder-avatar{width:50px!important;height:50px!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-info{overflow:hidden!important;margin:0!important;text-align:left!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-name{display:block!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:14px!important;color:#3c83b8!important;text-decoration:none!important;border:none!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-website a{display:block!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:10px!important;color:#666!important;text-decoration:underline!important;border:none!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-website .stipple-metadata-copyright-holder-website-icon{display:inline-block!important;margin:0 0 0 5px!important;padding:0!important;height:9px!important;width:9px!important;position:relative!important;top:2px!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-position:-63px 0!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities{margin-top:5px!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link{display:block!important;float:left!important;width:16px!important;height:16px!important;margin-right:5px!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-facebook{background-position:-72px 0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-flickr{background-position:-88px 0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-google-plus{background-position:-104px 0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-twitter{background-position:-120px 0!important}.stipple-metadata-box .stipple-metadata-caption{margin-left:auto!important;margin-right:auto!important;color:#666!important;font-weight:normal!important;text-align:left!important;word-wrap:break-word!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-metadata-box .stipple-metadata-caption a{border-bottom:none!important}.stipple-metadata-box .stipple-metadata-caption a:hover{text-decoration:underline!important}.stipple-metadata-box .stipple-metadata-field-container{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;color:#666!important}.stipple-metadata-box .stipple-metadata-field-container:last-child{margin-bottom:5px!important}.stipple-metadata-box span.stipple-metadata-field-label{display:inline-block!important;float:left!important;text-align:right!important;width:75px!important;color:#80868a!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-metadata-box span.stipple-metadata-field-value{float:left!important;word-wrap:break-word!important;text-align:left!important;margin-left:5px!important;color:#666!important;display:inline-block!important;max-width:165px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-metadata-box .stipple-metadata-source-page-value a,.stipple-metadata-box .stipple-metadata-tagger-name-value a{display:inline-block!important;max-width:165px!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;border:none!important;text-decoration:underline!important}.stipple-metadata-box .stipple-metadata-powered-by{text-align:right!important;color:#666!important;margin:auto!important}.stipple-metadata-box .stipple-metadata-powered-by a{color:#666!important;font-weight:bold!important;border:none!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-dottable-wrapper .stipple-hidden,.stipple-metadata-box .stipple-hidden,.stipple-new-dot-container .stipple-hidden{display:none}.stipple-ajax-spinner-background{z-index:425000!important;width:107px!important;height:107px!important;background-image:url(//stipple.cachefly.net/production/external/spinner-bg.png)!important;background-repeat:no-repeat!important;position:absolute!important}.stipple-ajax-spinner-background img{position:absolute!important;top:40px!important;left:44px!important}
</style><!--[if IE]>
<style type="text/css">
a.stipple-shop,a.stipple-want,a.stipple-button,.stipple-edit-button{background-color:#f3f3f3!important;width:auto!important;overflow:visible!important}a.stipple-want.stipple-wanted{background-color:#565656!important}.stipple-dot-box .stipple-dot-box-title{width:270px!important}.stipple-dot-box .stipple-dot-box-title .stipple-dot-box-title-text{width:205px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image,.stipple-new-dot-container-form form .stipple-link-previews .stipple-link-data .stipple-link-data-image{width:60px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container,.stipple-new-dot-container-form form .stipple-link-previews .stipple-link-data .stipple-link-data-description-container{width:160px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-wide-container,.stipple-new-dot-container-form form .stipple-link-previews .stipple-link-data .stipple-link-data-description-wide-container{width:240px!important}.stipple-photo-top,.stipple-photo-actions{background-color:#303030!important}.stipple-photo-top{border-bottom:1px solid black!important}
</style>
<![endif]--><!--[if IE 7]>
<style type="text/css">
a.stipple-toolbar-button,.stipple-dot-box .stipple-dot-box-inner .stipple-info img,.stipple-dot-box .stipple-price-and-links,.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image,.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container,.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice,a.stipple-dot-box-button .stipple-button-label,.stipple-autocomplete-box .stipple-autocomplete-item-person .stipple-autocomplete-provider-photo,.stipple-autocomplete-box .stipple-autocomplete-item-person .stipple-autocomplete-friend-avatar,.stipple-autocomplete-box .stipple-autocomplete-item-person .stipple-autocomplete-names-and-link,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-product-image,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-names,.stipple-dot-box-person .stipple-dot-box-person-avatar,.stipple-dot-box-person .stipple-dot-box-person-content,.stipple-dot-box-person .stipple-dot-box-person-byline .stipple-dot-box-person-screen-name,.stipple-dot-box-person .stipple-dot-box-person-byline .stipple-dot-box-person-url,.stipple-call-to-action{display:inline!important;zoom:1!important}.stipple-new-dot-container .stipple-new-dot-forms input{display:block;width:235px!important;margin-top:3px!important;margin-bottom:3px!important}.stipple-new-dot-container .stipple-new-dot-forms .stipple-new-dot-buttons .stipple-button{width:60px!important;display:inline}
</style>
<![endif]--><style type="text/css" id="pd_popup_holder_style_5506978_post_5920">#pd_popup_holder_5506978_post_5920 { position:absolute; display:none; width:350px; height:auto; top:0px; left:0px; z-index:10000; border:solid 1px #CCC; background-color:white; padding:0px 15px;font-family:Arial,Sans;box-shadow: -10px 10px 20px rgba(0, 0, 0, .5);-webkit-box-shadow: 0px 0px 6px rgba(0, 0, 0, .25);-moz-box-shadow: 0px 0px 6px rgba(0, 0, 0, .25); }</style></head>

<body class="single single-post postid-5920 single-format-standard single-author singular two-column right-sidebar mp6 highlander-enabled highlander-light" style="">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="http://mcuoneclipse.com/" title="MCU on Eclipse" rel="home">MCU on Eclipse</a></span></h1>
				<h2 id="site-description">Everything on CodeWarrior, Microcontrollers and Eclipse</h2>
			</hgroup>

						<a href="http://mcuoneclipse.com/" class="stippleit-sid-wp-32274278">
									<img src="./HC-SR04_application_2_files/header21_1000x288.png" width="1000" height="288" alt="">
							</a>
			
							<div class="only-search with-image">
					<form method="get" id="searchform" action="http://mcuoneclipse.com/">
		<label for="s" class="assistive-text">Search</label>
		<input type="text" class="field" name="s" id="s" placeholder="Search">
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search">
	</form>
				</div>
			
			<nav id="access" role="navigation">
				<h3 class="assistive-text">Main menu</h3>
								<div class="skip-link"><a class="assistive-text" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#content" title="Skip to primary content">Skip to primary content</a></div>
				<div class="skip-link"><a class="assistive-text" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
								<div class="menu-home-container"><ul id="menu-home" class="menu"><li id="menu-item-1754" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1754"><a title="All my posts, and everything else…" href="http://mcuoneclipse.wordpress.com/">Home</a></li>
<li id="menu-item-2038" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2038"><a title="Eclipse is the de-facto standard. Here go all my posts about eclipse in general." href="http://mcuoneclipse.com/category/eclipse-2/">Eclipse</a></li>
<li id="menu-item-2039" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2039"><a title="CodeWarrior for MCU10 is Eclipse based, but many features are different from mainline eclipse or CodeWarrior specific." href="http://mcuoneclipse.com/category/codewarrior/">CodeWarrior</a></li>
<li id="menu-item-2037" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2037"><a title="Processor Expert is an environment which generates code from so called ‘Embedded Components’ or known as ‘Beans’. It is available in MCU10 and as well as a standalone version." href="http://mcuoneclipse.com/category/processor-expert/">Processor Expert</a>
<ul class="sub-menu">
	<li id="menu-item-1758" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1758"><a title="With Processor Expert and CDE I can create my own Embedded Components." href="http://mcuoneclipse.com/category/processor-expert/embedded-components/">Components</a>
	<ul class="sub-menu">
		<li id="menu-item-2033" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2033"><a title="FreeRTOS is a widely used Open Source RTOS. Here I post things on my component implementing that RTOS." href="http://mcuoneclipse.com/category/processor-expert/embedded-components/freertos/">FreeRTOS</a></li>
		<li id="menu-item-2035" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2035"><a title="USB is a difficult beast, but with this Processor Expert component things run much easier." href="http://mcuoneclipse.com/category/processor-expert/embedded-components/usb/">USB</a></li>
	</ul>
</li>
	<li id="menu-item-2040" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2040"><a title="CDE is the Component Development Environment in Processor Expert which allows me to create my own components." href="http://mcuoneclipse.com/category/processor-expert/cde/">CDE</a></li>
</ul>
</li>
<li id="menu-item-1752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1752"><a title="If you have a great idea, then post a comment here…" href="http://mcuoneclipse.com/requests/">Requests</a></li>
<li id="menu-item-3826" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3826"><a title="All the things I want to explore…" href="http://mcuoneclipse.com/the-bucket-list/">The Bucket List</a></li>
<li id="menu-item-1753" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1753"><a title="About me and this blog…." href="http://mcuoneclipse.com/about/">About</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="http://mcuoneclipse.com/2012/12/31/2012-in-review-happy-new-year-and-thanks-for-reading/" rel="prev"><span class="meta-nav">←</span> Previous</a></span>
						<span class="nav-next"><a href="http://mcuoneclipse.com/2013/01/04/the-freedom-robot/" rel="next">Next <span class="meta-nav">→</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-5920" class="post-5920 post type-post status-publish format-standard hentry category-boards category-codewarrior category-embedded category-embedded-components category-kinetis category-kl25z-freedom-board category-processor-expert category-tips-tricks tag-codewarrior tag-eclipse tag-embedded-component tag-freedom-board tag-kl25z-freedom-board tag-processor-expert tag-tipstricks">
	<header class="entry-header">
		<h1 class="entry-title">Tutorial: Ultrasonic Ranging with the Freedom&nbsp;Board</h1>

				<div class="entry-meta">
						<span class="sep">Posted on </span><a href="./HC-SR04_application_2_files/HC-SR04_application_2.htm" title="20:06" rel="bookmark"><time class="entry-date" datetime="2013-01-01T20:06:04+00:00">January 1, 2013</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://mcuoneclipse.com/author/mcuoneclipse/" title="View all posts by Erich Styger" rel="author">Erich Styger</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<div class="pd-rating" id="pd_rating_holder_5506978_post_5920" style="display: inline-block;"><div class="rating-icons" id="pd_rate_5506978_post_5920" style="float:left;"><div class="rating-star-icon" onmouseout="PDRTJS_5506978_post_5920.rebuild();" onclick="PDRTJS_5506978_post_5920.rate(1);" onmouseover="PDRTJS_5506978_post_5920.hover(1);" id="PDRTJS_5506978_post_5920_stars_1" style="background-size: 32px 48px!important; cursor: pointer; width: 16px; height: 16px; line-height: 16px; background: url(http://i0.poll.fm/images/ratings/star-yellow-sml.png) top left; float: left; padding: 0px; marging: 0px; margin-right: 1px;">&nbsp;</div><div class="rating-star-icon" onmouseout="PDRTJS_5506978_post_5920.rebuild();" onclick="PDRTJS_5506978_post_5920.rate(2);" onmouseover="PDRTJS_5506978_post_5920.hover(2);" id="PDRTJS_5506978_post_5920_stars_2" style="background-size: 32px 48px!important; cursor: pointer; width: 16px; height: 16px; line-height: 16px; background: url(http://i0.poll.fm/images/ratings/star-yellow-sml.png) top left; float: left; padding: 0px; marging: 0px; margin-right: 1px;">&nbsp;</div><div class="rating-star-icon" onmouseout="PDRTJS_5506978_post_5920.rebuild();" onclick="PDRTJS_5506978_post_5920.rate(3);" onmouseover="PDRTJS_5506978_post_5920.hover(3);" id="PDRTJS_5506978_post_5920_stars_3" style="background-size: 32px 48px!important; cursor: pointer; width: 16px; height: 16px; line-height: 16px; background: url(http://i0.poll.fm/images/ratings/star-yellow-sml.png) top left; float: left; padding: 0px; marging: 0px; margin-right: 1px;">&nbsp;</div><div class="rating-star-icon" onmouseout="PDRTJS_5506978_post_5920.rebuild();" onclick="PDRTJS_5506978_post_5920.rate(4);" onmouseover="PDRTJS_5506978_post_5920.hover(4);" id="PDRTJS_5506978_post_5920_stars_4" style="background-size: 32px 48px!important; cursor: pointer; width: 16px; height: 16px; line-height: 16px; background: url(http://i0.poll.fm/images/ratings/star-yellow-sml.png) top left; float: left; padding: 0px; marging: 0px; margin-right: 1px;">&nbsp;</div><div class="rating-star-icon" onmouseout="PDRTJS_5506978_post_5920.rebuild();" onclick="PDRTJS_5506978_post_5920.rate(5);" onmouseover="PDRTJS_5506978_post_5920.hover(5);" id="PDRTJS_5506978_post_5920_stars_5" style="background-size: 32px 48px!important; cursor: pointer; width: 16px; height: 16px; line-height: 16px; background: url(http://i0.poll.fm/images/ratings/star-yellow-sml.png) top left; float: left; padding: 0px; marging: 0px; margin-right: 1px;">&nbsp;</div></div><span style="float:left;">&nbsp;</span><div id="rating_info_5506978_post_5920" style="display:block;float:left;background:url(http://i0.poll.fm/images/ratings/info.png) no-repeat 3px 2px;width:16px;height:16px;cursor:pointer; null " onclick="javascript:PDRTJS_5506978_post_5920.togglePopup();return false;"><span style="display:none;">i</span></div><div class="pd_popup_holder" id="pd_popup_holder_5506978_post_5920">&nbsp;</div><div class="rating-msg" id="PDRTJS_5506978_post_5920_msg" style="float:left; padding-left: 5px; text-align: left; font:normal normal /16px ; color: #;">10 Votes</div><p style="padding: 0px; margin: 0px; clear: both;"></p><img src="./HC-SR04_application_2_files/p-ab3gTb8xb3dLg.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"></div><br><p><strong>Question</strong>: What makes 8 times ‘beep’, but I cannot hear it?</p>
<p><strong>Answer</strong>: My ultrasonic range finder <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":-)" class="wp-smiley"> </p>
<div id="attachment_5921" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/frdm-kl25z-with-hc-sr04.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5921" alt="FRDM-KL25Z with HC-SR04" src="./HC-SR04_application_2_files/frdm-kl25z-with-hc-sr04.png" width="584" height="387"></a><p class="wp-caption-text">FRDM-KL25Z with HC-SR04</p></div>
<p>What I have added to my <a title="FreeRTOS with GCC, Cortex-M0+ and Kinetis KL25Z Freedom Board" href="http://mcuoneclipse.com/2012/07/20/freertos-with-gcc-cortex-m0-and-kinetis-kl25z-freedom-board/">FRDM-KL25Z</a> board is an ultrasonic distance sensor, measuring distances up to 4 meters.</p>
<p><span id="more-5920"></span></p>
<h2>HC-SR04 Ultrasonic Sensor</h2>
<p>The <a title="HC-SR04 data sheet" href="http://elecfreaks.com/store/download/HC-SR04.pdf">HC-SR04</a> sensor is a 4 pin sensor, at an incredible price point. I have mine from <a title="Play-Zone HC-SR04" href="http://www.play-zone.ch/en/ultraschall-distanzmesser-hc-sr04.html">Play-Zone</a>, but I have seen offers in the internet for around $6 too.</p>
<div id="attachment_5922" class="wp-caption alignnone" style="width: 472px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/hc-sr04-front-side.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5922" alt="HC-SR04 Front Side" src="./HC-SR04_application_2_files/hc-sr04-front-side.png"></a><p class="wp-caption-text">HC-SR04 Front Side</p></div>
<p>The backside features all the electronics to which simply usage of the sensor:</p>
<div id="attachment_5923" class="wp-caption alignnone" style="width: 532px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/hc-sr04-back-side.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5923" alt="HC-SR04 Back Side" src="./HC-SR04_application_2_files/hc-sr04-back-side.png"></a><p class="wp-caption-text">HC-SR04 Back Side</p></div>
<p>With simple I mean, it only needs 4 pins:</p>
<ol>
<li>Vcc (+5V DC supply)</li>
<li>Trig (TTL input, to trigger a measurement)</li>
<li>Echo (TTL output, pulse proportional to distance)</li>
<li>GND (ground)</li>
</ol>
<blockquote><p>Note: There is a similar module on the market: the <a title="Parallax Ping))) Datasheet" href="http://www.parallax.com/dl/docs/prod/acc/28015-PING-v1.3.pdf">Parallax Ping)))</a> or <a title="Seedstudio 3pin Ultrasonic module" href="http://www.seeedstudio.com/wiki/Ultra_Sonic_range_measurement_module">Seedstudio</a> one which only use 3 pins (Vcc, Trig+Echo, GND). While this saves a pin, it makes usage a big more complicated as I would have to switch between output and input on a single pin. So I prefer the 4 pin variant.</p></blockquote>
<p>Using the sensor is simple:</p>
<div id="attachment_5926" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/hc-sr04-timing-diagram.png"><img class="size-full wp-image-5926" alt="HC-SR04 Timing Diagram" src="./HC-SR04_application_2_files/hc-sr04-timing-diagram.png" width="584" height="185"></a><p class="wp-caption-text">HC-SR04 Timing Diagram</p></div>
<ol>
<li>Send a 10 us pulse on Trig</li>
<li>In reaction to this, the sensor will send 8 sonic bursts to measure the distance</li>
<li>After sending the burst, the sensor will raise the Echo signal until it receives the echo back. That means the length of the Echo signal corresponds to time the burst was travelling forward and echoed back.</li>
</ol>
<p>Below is a snapshot with a logic analyzer:</p>
<div id="attachment_5927" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/hc-sr04-timing.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5927" alt="HC-SR04 Timing" src="./HC-SR04_application_2_files/hc-sr04-timing.png" width="584" height="255"></a><p class="wp-caption-text">HC-SR04 Timing</p></div>
<p>After the 10 us Trigger signal, the sensor sends the burst during ’1′ and ’2′ (around 456 us), followed by the Echo signal duration of 756 us. The 756 us corresponds to the time it took for the burst to come back.</p>
<p>The <a title="Wikipedia: Speed of Sound" href="http://en.wikipedia.org/wiki/Speed_of_sound">speed of sound</a> is about 340 m per second (depends on temperature and air relative humidity). A good approximation is 29 us per cm (or 58 us per centimeter as it is for back and forward). With the above example, the 756 us would result in 756/29/2 = 13 cm distance.</p>
<blockquote><p> <img src="./HC-SR04_application_2_files/icon_idea.gif" alt=":idea:" class="wp-smiley">  For decimal system challenged engineers: instead of a divider of 58, use a divider of 148 to get the result in inch instead of centimeter.</p></blockquote>
<h2>Hardware Connection</h2>
<p>I’m using a breadboard for easy wiring and connection.</p>
<div id="attachment_5930" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/breadboard-wiring1.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5930" alt="Breadboard Wiring with Freedom Board, Sensor, LCD and Logic Analycer" src="./HC-SR04_application_2_files/breadboard-wiring1.png" width="584" height="470"></a><p class="wp-caption-text">Breadboard Wiring with Freedom Board, Sensor, LCD and Logic analyzer</p></div>
<p>To visualize the measurement, I’m using the <a title="HD44780 2×16 Character Display for Kinetis and Freedom Board" href="http://mcuoneclipse.com/2012/12/22/hd44780-2x16-character-display-for-kinetis-and-freedom-board/">2×16 Character display</a> I have used in my earlier post. Of course a LCD is optional. I used the same wiring as before:</p>
<div id="attachment_5931" class="wp-caption alignnone" style="width: 521px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/signals-with-labels.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5931" alt="Signals with Labels" src="./HC-SR04_application_2_files/signals-with-labels.png"></a><p class="wp-caption-text">Signals with Labels</p></div>
<pre>=================================================================
&nbsp;SIGNAL LIST
-----------------------------------------------------------------
SIGNAL-NAME [DIR]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; PIN-NAME [PIN-NUMBER]
-----------------------------------------------------------------
DB4_D4 [I/O]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; TSI0_CH5/PTA4/I2C1_SDA/TPM0_CH1/NMI_b [30]
DB5_D5 [I/O]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; PTA5/USB_CLKIN/TPM0_CH2 [31]
DB6_D6 [I/O]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; CMP0_IN2/PTC8/I2C0_SCL/TPM0_CH4 [65]
DB7_D7 [I/O]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; CMP0_IN3/PTC9/I2C0_SDA/TPM0_CH5 [66]
E_D10 [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; PTD0/SPI0_PCS0/TPM0_CH0 [73]
LED_BLUE [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; ADC0_SE5b/PTD1/SPI0_SCK/TPM0_CH1 [74]
LED_GREEN [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; TSI0_CH12/PTB19/TPM2_CH1 [54]
LED_RED [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; TSI0_CH11/PTB18/TPM2_CH0 [53]
RS_D8 [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; PTA13/TPM1_CH1 [33]
RW_D9 [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; ADC0_SE6b/PTD5/SPI1_SCK/UART2_TX/TPM0_CH5 [78]
US_Echo_D2 [Input]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; PTD4/LLWU_P14/SPI1_PCS0/UART2_RX/TPM0_CH4 [77]
US_Trig_D3 [Output]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; PTA12/TPM1_CH0 [32]
=================================================================</pre>
<p>What I need is the supply voltage, ground, an output pin (Trig) and an input pin to measure the signal (Echo).</p>
<p>The HC-SR04 uses TTL (5V) supply voltage and logic levels. The FRDM-KL25Z processor is a 3.3V one, but the board provides 5V on the header. The HC-SR04 can use 3.3V levels on the Trig signal, but provides a 5V signal on the Echo pin. To get the signal to the 3.3V level, I use a simple voltage divider with a 27k Ohm and 15k Ohm resistor:</p>
<div id="attachment_5932" class="wp-caption alignnone" style="width: 378px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/voltage-divider.png"><img class="size-full wp-image-5932" alt="ge Divider with two resistors" src="./HC-SR04_application_2_files/voltage-divider.png"></a><p class="wp-caption-text">Voltage Divider with two resistors</p></div>
<div id="attachment_5933" class="wp-caption alignnone" style="width: 296px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/voltage-divider-detail.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5933" alt="Voltage Divider Detail" src="./HC-SR04_application_2_files/voltage-divider-detail.png"></a><p class="wp-caption-text">Voltage Divider Detail</p></div>
<h2>CodeWarrior Project</h2>
<p>With the wizard (File &gt; New Bareboard Project) I create a new project for the KL25Z and Processor Expert. I need two things:</p>
<ol>
<li>Create a 10 us pulse on the Trig (Trigger) pin</li>
<li>Measure the echo on the Echo pin</li>
</ol>
<h2>Trigger</h2>
<p>For the Trigger pin I add a <strong>BitIO_LDD</strong> component to my project:</p>
<div id="attachment_5935" class="wp-caption alignnone" style="width: 163px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/bitio_ldd-component1.png"><img class="size-full wp-image-5935" alt="BitIO_LDD Component" src="./HC-SR04_application_2_files/bitio_ldd-component1.png"></a><p class="wp-caption-text">BitIO_LDD Component</p></div>
<p>I configure it as Output pin on PTA12:</p>
<div id="attachment_5936" class="wp-caption alignnone" style="width: 396px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/trigger-properties.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5936" alt="Trigger Properties" src="./HC-SR04_application_2_files/trigger-properties.png"></a><p class="wp-caption-text">Trigger Properties</p></div>
<p>Additionally I add the <a title="Processor Expert Wait Component" href="http://steinerberg.com/EmbeddedComponents/Wait/home.htm">Wait</a> component to the project:</p>
<div id="attachment_5937" class="wp-caption alignnone" style="width: 171px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/wait-component.png"><img class="size-full wp-image-5937" alt="Wait Component" src="./HC-SR04_application_2_files/wait-component.png"></a><p class="wp-caption-text">Wait Component</p></div>
<p>Generating the 10 us pulse now is trivial:</p>
<div><div id="highlighter_289785" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">TRIG_SetVal(trigDevice);</code></div><div class="line number2 index1 alt1"><code class="cpp plain">WAIT1_Waitus(10);</code></div><div class="line number3 index2 alt2"><code class="cpp plain">TRIG_ClrVal(trigDevice);</code></div></div></td></tr></tbody></table></div></div>
<p>Wait! There is some more infrastructure needed, such as this <strong>trigDevice</strong> handle. More on this below.</p>
<h2>Echo Pulse Measurement</h2>
<p>To measure the echo, I add a <strong>TimerUnit_LDD</strong> component:</p>
<div id="attachment_5938" class="wp-caption alignnone" style="width: 211px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/timerunit_ldd-added.png"><img class="size-full wp-image-5938" alt="TimerUnit_LDD added" src="./HC-SR04_application_2_files/timerunit_ldd-added.png"></a><p class="wp-caption-text">TimerUnit_LDD added</p></div>
<p>That component shows errors for now, because I need to configure it for my needs. What I want is a timer measuring the echo signal. For this I need to set up a timer which starts counting on the echo raising edge, and stops at the falling edge. For this I need a timer channel.</p>
<p>I add a new channel using the ‘+’ icon:</p>
<div id="attachment_5939" class="wp-caption alignnone" style="width: 564px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/adding-timer-unit-channel.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5939" alt="Adding Timer Unit Channel" src="./HC-SR04_application_2_files/adding-timer-unit-channel.png"></a><p class="wp-caption-text">Adding Timer Unit Channel</p></div>
<p>For this I’m selecting the <strong>TPM0_CNT</strong> as counter and configure the channel for ‘capture’:</p>
<blockquote><p> <img src="./HC-SR04_application_2_files/icon_idea.gif" alt=":idea:" class="wp-smiley">  You will understand later on why I have selected this particular counter.</p></blockquote>
<div id="attachment_5941" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/using-tpm0_cnt-and-capture-mode1.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5941" alt="Using TPM0_CNT and Capture Mode" src="./HC-SR04_application_2_files/using-tpm0_cnt-and-capture-mode1.png" width="584" height="533"></a><p class="wp-caption-text">Using TPM0_CNT and Capture Mode</p></div>
<p>As I have connected the Echo signal on <strong>PTD4</strong>, I need to use that pin as ‘Capture input pin’:</p>
<div id="attachment_5942" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/ptd4-as-input-capture-pin.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5942" alt="PTD4 as input capture pin" src="./HC-SR04_application_2_files/ptd4-as-input-capture-pin.png" width="584" height="533"></a><p class="wp-caption-text">PTD4 as input capture pin</p></div>
<p>As hinted by the pin name (PTD4/LLWU_P14/SPI1_PCS0/UART2_RX/<strong>TPM0_CH4</strong>), this pin is available on <strong>TPM0_CH4</strong>, so I need to configure this as capture device:</p>
<div id="attachment_5943" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/selected-capture-device.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5943" alt="selected capture device" src="./HC-SR04_application_2_files/selected-capture-device.png" width="584" height="533"></a><p class="wp-caption-text">selected capture device</p></div>
<blockquote><p> <img src="./HC-SR04_application_2_files/icon_idea.gif" alt=":idea:" class="wp-smiley">  Now you see why I have selected TPM0_CNT above as Counter device. I admit: that’s not something easy to know about, because this KL25Z has mirades of pin and mapping configuration (called Pin Muxing) <img src="./HC-SR04_application_2_files/icon_sad.gif" alt=":-(" class="wp-smiley"> . One way is to guess what is behind from the pin names (this is what I try first). Otherwise you need to read through the device reference manual (which is very time-consuming). I wish these devices would be much less complicated and easier to use….</p></blockquote>
<p>I want to get an interrupt for both the raising edge and falling edge of the Echo signal: I enable interrupts and configure it for both edges. And <a title="Pin and Signal List with Processor Expert" href="http://mcuoneclipse.com/2012/12/29/pin-and-signal-list-with-processor-expert/">I give the signal a nice name</a>:</p>
<div id="attachment_5946" class="wp-caption alignnone" style="width: 490px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/interrupt-settings.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5946" alt="Interrupt Settings" src="./HC-SR04_application_2_files/interrupt-settings.png"></a><p class="wp-caption-text">Interrupt Settings</p></div>
<p>That’s not enough: I need to enable interrupts for the counter too:</p>
<div id="attachment_5948" class="wp-caption alignnone" style="width: 490px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/enabled-interrupts-for-counter.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5948" alt="Enabled Interrupts for Counter" src="./HC-SR04_application_2_files/enabled-interrupts-for-counter.png"></a><p class="wp-caption-text">Enabled Interrupts for Counter</p></div>
<h2>Counter Frequency</h2>
<p>I still have errors showing up for my Timer/Counter: I need to configure the counter frequency: This is the clock which is used for my counter. In principle: the higher the frequency, the more precise the measurement will be. As always: a good balance is required. First, I configure the counter frequency:</p>
<div id="attachment_5952" class="wp-caption alignnone" style="width: 490px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/configuring-the-counter-frequency1.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5952" alt="Configuring the counter frequency" src="./HC-SR04_application_2_files/configuring-the-counter-frequency1.png"></a><p class="wp-caption-text">Configuring the counter frequency</p></div>
<p>The first thing to do is to disable ‘Auto select timing’:</p>
<div id="attachment_5953" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/disabling-auto-select-timing.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5953" alt="Disabling Auto Select timing" src="./HC-SR04_application_2_files/disabling-auto-select-timing.png" width="584" height="379"></a><p class="wp-caption-text">Disabling Auto Select timing</p></div>
<blockquote><p> <img src="./HC-SR04_application_2_files/icon_idea.gif" alt=":idea:" class="wp-smiley">  Processor Expert usually chooses good default values, but fails (for whatever reason?) to do this properly for timers on the ARM platform. So as solution I always disable auto-select-timing and explicitly make my choice. Maybe better that way anyway <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":-)" class="wp-smiley"> </p></blockquote>
<p>I make a gut guess and select a 2.x MHz clock from the list (double-click to assign it):</p>
<div id="attachment_5954" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/selected-clock-frequency.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5954" alt="Selected clock frequency" src="./HC-SR04_application_2_files/selected-clock-frequency.png" width="584" height="476"></a><p class="wp-caption-text">Selected clock frequency</p></div>
<h2>Counter Overrun</h2>
<p>There one thing to consider: when will the counter overflow? I keep in mind that with the speed of sound, around 4 meters distance means 400*58us makes 23.5 ms Echo signal pulse. So I need to make sure that for this distance, my counter does *not* overflow. I can check this in the ‘Overrun period’ settings:</p>
<div id="attachment_5955" class="wp-caption alignnone" style="width: 490px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/overrun-period.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5955" alt="Overrun period" src="./HC-SR04_application_2_files/overrun-period.png"></a><p class="wp-caption-text">Overrun period</p></div>
<p>Deselecting ‘auto select timing’ again will show the overrun period time:</p>
<div id="attachment_5957" class="wp-caption alignnone" style="width: 490px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/overrun-period1.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5957" alt="Overrun period" src="./HC-SR04_application_2_files/overrun-period1.png"></a><p class="wp-caption-text">Overrun period</p></div>
<p>So my timer will overrun after 25 ms, so I’m fine <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":-)" class="wp-smiley"> </p>
<p>Next, I need to enable two methods I want to use. I need to read the counter value, and I need to reset it. As such, I enable the two methods (right-click on the method name and select ‘Toggle Enable/Disable’):</p>
<div id="attachment_5959" class="wp-caption alignnone" style="width: 219px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/enabled-timerunit_ldd-methods.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5959" alt="Enabled TimerUnit_LDD Methods" src="./HC-SR04_application_2_files/enabled-timerunit_ldd-methods.png"></a><p class="wp-caption-text">Enabled TimerUnit_LDD Methods</p></div>
<p>I notice the two events called:</p>
<ul>
<li><strong>OnCounterRestart()</strong> is called when there is a restart/overflow of the counter</li>
<li><strong>OnChannel()</strong> is called for every interrupt of my channel. Remember that I have it configured for creating an interrupt/event for both raising and falling edge.</li>
</ul>
<h2>State Machine</h2>
<p>I’m using a state machine to go through the different measurement phases:</p>
<div id="attachment_5961" class="wp-caption alignnone" style="width: 455px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/state-diagram.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5961" alt="State Diagram" src="./HC-SR04_application_2_files/state-diagram.png"></a><p class="wp-caption-text">State Diagram</p></div>
<ul>
<li><strong>Idle</strong>: Sensor is idle</li>
<li><strong>Triggered</strong>: we sent the trigger signal to the sensor</li>
<li><strong>Measure</strong>: we received raising edge of echo signal and are measuring</li>
<li><strong>Overflow</strong>: Counter overflow happened (see above)</li>
<li><strong>Finished</strong>: received falling echo signal edge and we have captured the echo signal time</li>
</ul>
<p>Another way is to show the different states on the timing diagram (without the Overflow case):</p>
<div id="attachment_5962" class="wp-caption alignnone" style="width: 594px"><a href="http://mcuoneclipse.files.wordpress.com/2012/12/timing-and-state-diagram.png" class="stippleit-sid-wp-32274278"><img class="size-full wp-image-5962" alt="Timing and State Diagram" src="./HC-SR04_application_2_files/timing-and-state-diagram.png" width="584" height="238"></a><p class="wp-caption-text">Timing and State Diagram</p></div>
<p>With this in mind, the implementation is pretty straight forward. First, an enumeration for the state machine states:</p>
<div><div id="highlighter_146373" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">enum</code> <code class="cpp plain">{</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ECHO_IDLE, </code><code class="cpp comments">/* device not used */</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ECHO_TRIGGERED, </code><code class="cpp comments">/* started trigger pulse */</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ECHO_MEASURE, </code><code class="cpp comments">/* measuring echo pulse */</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ECHO_OVERFLOW, </code><code class="cpp comments">/* measurement took too long */</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ECHO_FINISHED </code><code class="cpp comments">/* measurement finished */</code></div><div class="line number7 index6 alt2"><code class="cpp plain">} US_EchoState;</code></div></div></td></tr></tbody></table></div></div>
<p>Next the data structure to keep all my data:</p>
<div><div id="highlighter_71246" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">{</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LDD_TDeviceData *trigDevice; </code><code class="cpp comments">/* device handle for the Trigger pin */</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LDD_TDeviceData *echoDevice; </code><code class="cpp comments">/* input capture device handle (echo pin) */</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">volatile</code> <code class="cpp plain">US_EchoState state; </code><code class="cpp comments">/* state */</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TU1_TValueType capture; </code><code class="cpp comments">/* input capture value */</code></div><div class="line number6 index5 alt1"><code class="cpp plain">} US_DeviceType;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp keyword bold">static</code> <code class="cpp plain">US_DeviceType usDevice; </code><code class="cpp comments">/* device handle for the ultrasonic device */</code></div></div></td></tr></tbody></table></div></div>
<p>And here is how it gets initialized:</p>
<div><div id="highlighter_729980" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">US_Init(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">usDevice.state = ECHO_IDLE;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">usDevice.capture = 0;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">usDevice.trigDevice = TRIG_Init(NULL);</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">usDevice.echoDevice = TU1_Init(&amp;usDevice);</code></div><div class="line number6 index5 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h2>Event Handlers</h2>
<p>Notice the call to <code>TU1_Init()</code> where I pass a pointer to my data structure: That way I get a nice handle passed from the Processor Expert event routines (in events.c) I can use for my own routines.<br>
Remember that I get interrupts for raising and falling edge, and for overflow.<br>
I handle that in Events.c:</p>
<div><div id="highlighter_34786" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1 highlighted">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1 highlighted">46</div><div class="line number47 index46 alt2">47</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">/*</code></div><div class="line number2 index1 alt1"><code class="cpp comments">** ===================================================================</code></div><div class="line number3 index2 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Event&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; TU1_OnChannel0 (module Events)</code></div><div class="line number4 index3 alt1"><code class="cpp comments">**</code></div><div class="line number5 index4 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Component&nbsp;&nbsp; :&nbsp; TU1 [TimerUnit_LDD]</code></div><div class="line number6 index5 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Description :</code></div><div class="line number7 index6 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Called if compare register match the counter registers or</code></div><div class="line number8 index7 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; capture register has a new content. OnChannel0 event and</code></div><div class="line number9 index8 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Timer unit must be enabled. See&nbsp; and</code></div><div class="line number10 index9 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; methods. This event is available only if a</code></div><div class="line number11 index10 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is enabled.</code></div><div class="line number12 index11 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Parameters&nbsp; :</code></div><div class="line number13 index12 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - DESCRIPTION</code></div><div class="line number14 index13 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * UserDataPtr&nbsp;&nbsp;&nbsp;&nbsp; - Pointer to the user or</code></div><div class="line number15 index14 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RTOS specific data. The pointer passed as</code></div><div class="line number16 index15 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the parameter of Init method.</code></div><div class="line number17 index16 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Returns&nbsp;&nbsp;&nbsp;&nbsp; : Nothing</code></div><div class="line number18 index17 alt1"><code class="cpp comments">** ===================================================================</code></div><div class="line number19 index18 alt2"><code class="cpp comments">*/</code></div><div class="line number20 index19 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">TU1_OnChannel0(LDD_TUserData *UserDataPtr)</code></div><div class="line number21 index20 alt2"><code class="cpp plain">{</code></div><div class="line number22 index21 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">US_EventEchoCapture(UserDataPtr);</code></div><div class="line number23 index22 alt2"><code class="cpp plain">}</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp comments">/*</code></div><div class="line number26 index25 alt1"><code class="cpp comments">** ===================================================================</code></div><div class="line number27 index26 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Event&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; TU1_OnCounterRestart (module Events)</code></div><div class="line number28 index27 alt1"><code class="cpp comments">**</code></div><div class="line number29 index28 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Component&nbsp;&nbsp; :&nbsp; TU1 [TimerUnit_LDD]</code></div><div class="line number30 index29 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Description :</code></div><div class="line number31 index30 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Called if counter overflow/underflow or counter is</code></div><div class="line number32 index31 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reinitialized by modulo or compare register matching.</code></div><div class="line number33 index32 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OnCounterRestart event and Timer unit must be enabled. See</code></div><div class="line number34 index33 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and&nbsp; methods. This event is</code></div><div class="line number35 index34 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; available only if a&nbsp; is enabled.</code></div><div class="line number36 index35 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Parameters&nbsp; :</code></div><div class="line number37 index36 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - DESCRIPTION</code></div><div class="line number38 index37 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * UserDataPtr&nbsp;&nbsp;&nbsp;&nbsp; - Pointer to the user or</code></div><div class="line number39 index38 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RTOS specific data. The pointer passed as</code></div><div class="line number40 index39 alt1"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the parameter of Init method.</code></div><div class="line number41 index40 alt2"><code class="cpp comments">**&nbsp;&nbsp;&nbsp;&nbsp; Returns&nbsp;&nbsp;&nbsp;&nbsp; : Nothing</code></div><div class="line number42 index41 alt1"><code class="cpp comments">** ===================================================================</code></div><div class="line number43 index42 alt2"><code class="cpp comments">*/</code></div><div class="line number44 index43 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">TU1_OnCounterRestart(LDD_TUserData *UserDataPtr)</code></div><div class="line number45 index44 alt2"><code class="cpp plain">{</code></div><div class="line number46 index45 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">US_EventEchoOverflow(UserDataPtr);</code></div><div class="line number47 index46 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>In case of Overflow I simply set the state machine to the overflow state:</p>
<div><div id="highlighter_667263" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">US_EventEchoOverflow(LDD_TUserData *UserDataPtr) {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">US_DeviceType *ptr = (US_DeviceType*)UserDataPtr;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ptr-&gt;state = ECHO_OVERFLOW;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>While in the interrupt/event for raising or falling edge, I reset the counter value at raising edge, or read out the counter value at falling edge:</p>
<div><div id="highlighter_361483" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">US_DeviceType *ptr = (US_DeviceType*)UserDataPtr;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(ptr-&gt;state==ECHO_TRIGGERED) { </code><code class="cpp comments">/* 1st edge, this is the raising edge, start measurement */</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TU1_ResetCounter(ptr-&gt;echoDevice);</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ptr-&gt;state = ECHO_MEASURE;</code></div><div class="line number6 index5 alt1"><code class="cpp plain">} </code><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(ptr-&gt;state==ECHO_MEASURE) { </code><code class="cpp comments">/* 2nd edge, this is the falling edge: use measurement */</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">(</code><code class="cpp keyword bold">void</code><code class="cpp plain">)TU1_GetCaptureValue(ptr-&gt;echoDevice, 0, &amp;ptr-&gt;capture);</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ptr-&gt;state = ECHO_FINISHED;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>With this I reset the counter on the raising edge, and get the counter value at the falling edge. Then I set the state to ‘finished’: this will be the state I wait for (polling) we will see later.</p>
<h2>Measure!</h2>
<p>I have implemented a function which sends the trigger, and then waits until the measurement has been finished:</p>
<div><div id="highlighter_715461" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">uint16_t US_Measure_us(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint16_t us;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/* send 10us pulse on TRIG line. */</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TRIG_SetVal(usDevice.trigDevice);</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">WAIT1_Waitus(10);</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">usDevice.state = ECHO_TRIGGERED;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TRIG_ClrVal(usDevice.trigDevice);</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(usDevice.state!=ECHO_FINISHED) {</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* measure echo pulse */</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(usDevice.state==ECHO_OVERFLOW) { </code><code class="cpp comments">/* measurement took too long? */</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">usDevice.state = ECHO_IDLE;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0; </code><code class="cpp comments">/* no echo, error case */</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">us = (usDevice.capture*1000UL)/(TU1_CNT_INP_FREQ_U_0/1000);</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">us;</code></div><div class="line number18 index17 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>It sends the 10 us trigger and then waits for the finished state. In case of overflow (no echo received), I simply return a value of zero.</p>
<p>The function returns the measured echo time in microseconds. To deal with different timer frequencies, the macro <code>TU1_CNT_INP_FREQ_U_0</code> is used which is generated by Processor Expert.</p>
<h2>Calculating to Distance</h2>
<p>Usually I’m not interested in the echo time, but rather in the distance itself. For this I have created a utility function to transform the echo time (microsecond) into centimeter distance:</p>
<div><div id="highlighter_954204" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">static</code> <code class="cpp plain">uint16_t calcAirspeed_dms(uint8_t temperatureCelsius) {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/* Return the airspeed depending on the temperature, in deci-meter per second */</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">airspeed; </code><code class="cpp comments">/* decimeters per second */</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">airspeed = 3313 + (6 * temperatureCelsius); </code><code class="cpp comments">/* dry air, 0% humidity, see <a href="http://en.wikipedia.org/wiki/Speed_of_sound">http://en.wikipedia.org/wiki/Speed_of_sound</a> */</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">airspeed -= (airspeed/100)*15; </code><code class="cpp comments">/* factor in ~15% for a relative humidity of ~40% */</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">airspeed;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">}</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp plain">uint16_t US_usToCentimeters(uint16_t microseconds, uint8_t temperatureCelsius) {</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">(microseconds*100UL)/calcAirspeed_dms(temperatureCelsius)/2; </code><code class="cpp comments">/* 2 because of two way */</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<blockquote><p> <img src="./HC-SR04_application_2_files/icon_idea.gif" alt=":idea:" class="wp-smiley">  Speed of sound depends on factors like temperature, relative humidity and above sea level (media density). The above function is not counting in everything, but is accurate enough for me.</p></blockquote>
<h1>Example Application</h1>
<p>Now using it is pretty simple: from my main routine I intialize my drivers, and then periodically call the function to measure the distance. To make things visual, I show values on a LCD plus show with the RGB LED the distance:</p>
<div><div id="highlighter_792954" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">static</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">Measure(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint16_t us, cm;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t buf[8];</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">us = US_Measure_us();</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">UTIL1_Num16uToStrFormatted(buf, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(buf), us, </code><code class="cpp string">' '</code><code class="cpp plain">, 5);</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_GotoXY(1,5);</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_WriteString((</code><code class="cpp color1 bold">char</code><code class="cpp plain">*)buf);</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">cm = US_usToCentimeters(us, 22);</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">UTIL1_Num16uToStrFormatted(buf, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(buf), cm, </code><code class="cpp string">' '</code><code class="cpp plain">, 5);</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_GotoXY(2,5);</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_WriteString((</code><code class="cpp color1 bold">char</code><code class="cpp plain">*)buf);</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LEDR_Put(cm&lt;10); </code><code class="cpp comments">/* red LED if object closer than 10 cm */</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LEDB_Put(cm&gt;=10&amp;&amp;cm&lt;=100); </code><code class="cpp comments">/* blue LED if object is in 10..100 cm range */</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LEDG_Put(cm&gt;100); </code><code class="cpp comments">/* blue LED if object is in 10..100 cm range */</code></div><div class="line number18 index17 alt1"><code class="cpp plain">}</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp comments">/*lint -save&nbsp; -e970 Disable MISRA rule (6.3) checking. */</code></div><div class="line number21 index20 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main(</code><code class="cpp keyword bold">void</code><code class="cpp plain">)</code></div><div class="line number22 index21 alt1"><code class="cpp comments">/*lint -restore Enable MISRA rule (6.3) checking. */</code></div><div class="line number23 index22 alt2"><code class="cpp plain">{</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/* Write your local variable definition here */</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** Processor Expert internal initialization. DON'T REMOVE THIS CODE!!! ***/</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">PE_low_level_init();</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** End of Processor Expert internal initialization.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ***/</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/* Write your code here */</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">US_Init();</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_Clear();</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_WriteLineStr(1, </code><code class="cpp string">"us: "</code><code class="cpp plain">);</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">LCD1_WriteLineStr(2, </code><code class="cpp string">"cm: "</code><code class="cpp plain">);</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(;;) {</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Measure();</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">WAIT1_Waitms(50); </code><code class="cpp comments">/* wait at least for 50 ms until the next measurement to avoid echos */</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** Don't write any code pass this line, or it will be deleted during code generation. ***/</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** RTOS startup code. Macro PEX_RTOS_START is defined by the RTOS component. DON'T MODIFY THIS CODE!!! ***/</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp preprocessor">#ifdef PEX_RTOS_START</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PEX_RTOS_START();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">/* Startup of the selected RTOS. Macro is defined by the RTOS component. */</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp preprocessor">#endif</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** End of RTOS startup code.&nbsp; ***/</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** Processor Expert end of main routine. DON'T MODIFY THIS CODE!!! ***/</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(;;){}</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">/*** Processor Expert end of main routine. DON'T WRITE CODE BELOW!!! ***/</code></div><div class="line number49 index48 alt2"><code class="cpp plain">} </code><code class="cpp comments">/*** End of main routine. DO NOT MODIFY THIS TEXT!!! ***/</code></div></div></td></tr></tbody></table></div></div>
<blockquote><p> <img src="./HC-SR04_application_2_files/icon_idea.gif" alt=":idea:" class="wp-smiley">  If you do not have a LCD, simply strip off the LCD code <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":-)" class="wp-smiley"> .</p></blockquote>
<p>The other thing to consider: inside the <code>main()</code> loop I use a delay of 50 ms: In case of an echo it will take about 25 ms for the echo to arrive: with 50 ms I will be calm for some time until I send another ‘ping’.</p>
<p>And here is a short video to see everything in action:<br>
<span class="embed-youtube" style="text-align:center; display: block;"><iframe class="youtube-player" type="text/html" width="584" height="359" src="./HC-SR04_application_2_files/activatevideo.htm" frameborder="0" scrolling="no"></iframe></span></p>
<h2>Summary</h2>
<p>Once getting through the concept and principles, it is rather easy to use an ultrasonic range sensor like the HC-SR04. Setting up the input capture/counter is the most tricky part. But I think with the concepts and steps outlined above, this should work out pretty good for any other microcontroller, especially if used with CodeWarrior and Processor Expert.</p>
<p>The project shown above is available <a title="Freedom-HC-SR04 Example Project" href="http://steinerberg.com/EmbeddedComponents/Examples/FreedomBoard/Freedom_HC-SR04.zip">here</a>.</p>
<p>If you are looking for improvements, here are some ideas:</p>
<ul>
<li>properly calculate in the humidity and air density.</li>
<li>Using a temperature sensor to factor in the current air temperature.</li>
<li>Averaging the samples.</li>
<li>Dynamic measurement time, adaptive to the distance found to save battery energy.</li>
<li>Using an RTOS like <a title="FreeRTOS Embedded Component" href="http://steinerberg.com/EmbeddedComponents/FreeRTOS/home.htm">FreeRTOS</a>. Especially to reduce the ‘busy waiting’ time and to do something useful during that time.</li>
<li>Shell support (e.g. <a title="FSShell Embedded Component" href="http://steinerberg.com/EmbeddedComponents/FSShell/home.htm">FSShell</a>) to show values on a console, including setting of calibration values.</li>
<li>Create a Processor Expert Component for it.</li>
<li>As the ultrasonic beam is rather focused: add a pan a tilt servo to it to ‘explore’ more.</li>
<li>Adding more sensors and actuators to use it for a robot application <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":-)" class="wp-smiley"> </li>
</ul>
<p>Happy Ultrasonic-Sounding <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":-)" class="wp-smiley"> </p>
		<div class="wpcnt">
		<div class="wpa">

			<a class="wpa-about" href="http://en.wordpress.com/about-these-ads/" rel="nofollow">About these ads</a>

			<div class="u"><script type="text/javascript">
			GA_googleFillSlot("Wordads_MIS_Mrec_Below_adsafe");

			</script><script src="./HC-SR04_application_2_files/ads"></script></div>

		</div>
		</div><div id="jp-post-flair" class="sharedaddy sd-rating-enabled sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-print"><a rel="nofollow" class="share-print sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#print" title="Click to print"><span>Print</span></a></li><li class="share-email share-service-visible"><a rel="nofollow" class="share-email sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=email&nb=1" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-reddit"><a rel="nofollow" class="share-reddit sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=reddit&nb=1" title="Click to share on Reddit"><span>Reddit</span></a></li><li class="share-stumbleupon"><a rel="nofollow" class="share-stumbleupon sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=stumbleupon&nb=1" title="Click to share on StumbleUpon"><span>StumbleUpon</span></a></li><li class="share-digg"><a rel="nofollow" class="share-digg sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=digg&nb=1" title="Click to Digg this post"><span>Digg</span></a></li><li class="share-twitter"><a rel="nofollow" class="share-twitter sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=twitter&nb=1" title="Click to share on Twitter" id="sharing-twitter-5920"><span>Twitter<span class="share-count">1</span></span></a></li><li class="share-facebook"><a rel="nofollow" class="share-facebook sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=facebook&nb=1" title="Share on Facebook" id="sharing-facebook-5920"><span>Facebook</span></a></li><li class="share-linkedin"><a rel="nofollow" class="share-linkedin sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=linkedin&nb=1" title="Click to share on LinkedIn" id="sharing-linkedin-5920"><span>LinkedIn<span class="share-count">2</span></span></a></li><li class="share-tumblr"><a rel="nofollow" class="share-tumblr sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=tumblr&nb=1" title="Click to share on Tumblr"><span>Tumblr</span></a></li><li class="share-pinterest"><a rel="nofollow" class="share-pinterest sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=pinterest&nb=1" title="Click to share on Pinterest"><span>Pinterest</span></a></li><li class="share-google-plus-1"><a rel="nofollow" class="share-google-plus-1 sd-button share-icon" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?share=google-plus-1&nb=1" title="Click to share on Google+" id="sharing-google-5920"><span>Google +1</span></a></li><li class="share-end"></li></ul></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-32274278-5920-51ea5537e525a" data-src="http://widgets.wp.com/likes/#blog_id=32274278&amp;post_id=5920&amp;origin=http://mcuoneclipse.wordpress.com&amp;obj_id=32274278-5920-51ea5537e525a" data-name="like-post-frame-32274278-5920-51ea5537e525a"><h3 class="sd-title">Like this:</h3><div class="post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></div><iframe class="post-likes-widget jetpack-likes-widget" name="like-post-frame-32274278-5920-51ea5537e525a" height="55px" width="100%" frameborder="0" src="./HC-SR04_application_2_files/saved_resource.htm" style="display: inline;"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div></div>			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="http://mcuoneclipse.com/category/boards/" title="View all posts in Boards" rel="category tag">Boards</a>, <a href="http://mcuoneclipse.com/category/codewarrior/" title="View all posts in CodeWarrior" rel="category tag">CodeWarrior</a>, <a href="http://mcuoneclipse.com/category/embedded/" title="View all posts in Embedded" rel="category tag">Embedded</a>, <a href="http://mcuoneclipse.com/category/processor-expert/embedded-components/" title="View all posts in Embedded Components" rel="category tag">Embedded Components</a>, <a href="http://mcuoneclipse.com/category/cpus/kinetis/" title="View all posts in Kinetis" rel="category tag">Kinetis</a>, <a href="http://mcuoneclipse.com/category/boards/kl25z-freedom-board/" title="View all posts in KL25Z Freedom Board" rel="category tag">KL25Z Freedom Board</a>, <a href="http://mcuoneclipse.com/category/processor-expert/" title="View all posts in Processor Expert" rel="category tag">Processor Expert</a>, <a href="http://mcuoneclipse.com/category/tips-tricks/" title="View all posts in Tips &amp; Tricks" rel="category tag">Tips &amp; Tricks</a> and tagged <a href="http://mcuoneclipse.com/tag/codewarrior/" rel="tag">CodeWarrior</a>, <a href="http://mcuoneclipse.com/tag/eclipse/" rel="tag">Eclipse</a>, <a href="http://mcuoneclipse.com/tag/embedded-component/" rel="tag">Embedded Component</a>, <a href="http://mcuoneclipse.com/tag/freedom-board/" rel="tag">freedom board</a>, <a href="http://mcuoneclipse.com/tag/kl25z-freedom-board/" rel="tag">KL25Z Freedom Board</a>, <a href="http://mcuoneclipse.com/tag/processor-expert/" rel="tag">Processor Expert</a>, <a href="http://mcuoneclipse.com/tag/tipstricks/" rel="tag">Tips&amp;Tricks</a> by <a href="http://mcuoneclipse.com/author/mcuoneclipse/">Erich Styger</a>. Bookmark the <a href="./HC-SR04_application_2_files/HC-SR04_application_2.htm" title="Permalink to Tutorial: Ultrasonic Ranging with the Freedom Board" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-5920 -->

						<div id="comments">
	
	
			<h2 id="comments-title">
			23 thoughts on “<span>Tutorial: Ultrasonic Ranging with the Freedom&nbsp;Board</span>”		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1326">
		<article id="comment-1326" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/df86c5e111adf04dd698ab61a69cbe7e" class="avatar avatar-68 grav-hashed grav-hijack" height="68" width="68" id="grav-df86c5e111adf04dd698ab61a69cbe7e-0"><span class="fn"><a href="http://www.mecatronicard.blogspot.com/" rel="external nofollow" class="url">Alex</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1326"><time datetime="2013-01-02T16:06:31+00:00">January 2, 2013 at 16:06</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi, Erich!<br>
Great job!, I really enjoy your posts!</p>
<p>I’m having some troubles adapting an example of an USB HOST MSD example to work with PE, I posted the problem in the Freescale Forums:<br>
<a href="https://community.freescale.com/thread/303017" rel="nofollow">https://community.freescale.com/thread/303017</a><br>
Can you give some orientation?<br>
Thanks in advance <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1326#respond" onclick="return addComment.moveForm(&quot;comment-1326&quot;, &quot;1326&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor odd alt depth-2 highlander-comment" id="li-comment-1352">
		<article id="comment-1352" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-0"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1352"><time datetime="2013-01-04T20:08:37+00:00">January 4, 2013 at 20:08</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi Alex,<br>
sorry, I do not have that K20, so I’m not of any help here I think.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1352#respond" onclick="return addComment.moveForm(&quot;comment-1352&quot;, &quot;1352&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3 highlander-comment" id="li-comment-1358">
		<article id="comment-1358" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/df86c5e111adf04dd698ab61a69cbe7e(1)" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-df86c5e111adf04dd698ab61a69cbe7e-1"><span class="fn"><a href="http://www.mecatronicard.blogspot.com/" rel="external nofollow" class="url">Alex</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1358"><time datetime="2013-01-04T21:00:34+00:00">January 4, 2013 at 21:00</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I tried the same in my Freedom board and failed :’( , It would be great for you to do a tutorial on this, when you can, no pressure <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor odd alt depth-3 highlander-comment" id="li-comment-1359">
		<article id="comment-1359" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-1"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1359"><time datetime="2013-01-04T21:33:52+00:00">January 4, 2013 at 21:33</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi Alex,<br>
well, I thought that this *is* already a tutorial? Maybe one of your settings is wrong? Could you try the project (link at the end of the tutorial). You might simply remove the LCD code, and if you use the same pins, then it should work for you as well.<br>
Hope this helps,<br>
Erich</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even depth-3 highlander-comment" id="li-comment-1362">
		<article id="comment-1362" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/df86c5e111adf04dd698ab61a69cbe7e(1)" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-df86c5e111adf04dd698ab61a69cbe7e-2"><span class="fn"><a href="http://www.mecatronicard.blogspot.com/" rel="external nofollow" class="url">Alex</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1362"><time datetime="2013-01-05T03:17:29+00:00">January 5, 2013 at 03:17</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Upps!! Sorry for the confusion, I meant to read a USB stick with the Freedom board.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1347">
		<article id="comment-1347" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/1ffc3fa71e702a0bbaa3b3ef6e379dbf" class="avatar avatar-68 grav-hashed grav-hijack" height="68" width="68" id="grav-1ffc3fa71e702a0bbaa3b3ef6e379dbf-0"><span class="fn">Injun Ear</span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1347"><time datetime="2013-01-04T07:54:51+00:00">January 4, 2013 at 07:54</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi Erich,</p>
<p>Thanks for the above. It may save someone’s life some day (remote chance). I have been pondering how to impliment an emergency stop circuit on a device I have been designing with the FRDM board. </p>
<p>I think using the above idea to detect if someone (or part of someone) is in a dangerous place is a good idea.</p>
<p>Thank you.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1347#respond" onclick="return addComment.moveForm(&quot;comment-1347&quot;, &quot;1347&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-2 highlander-comment" id="li-comment-1348">
		<article id="comment-1348" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-2"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1348"><time datetime="2013-01-04T08:06:40+00:00">January 4, 2013 at 08:06</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>You are welcome. Just keep in mind that the ultrasonic beam is rather small and focused. To cover a larger area it is necessary to move the beam around, or to use multiple sensors. Depending on your application: in robotics (I mean big industrial robots) they are using in many cases a ‘laser curtain’: multiple laser beams to form a curtain to detect if something/someone is moving into the danger zone. That’s simpler and more reliable than ultrasonic in my view.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1348#respond" onclick="return addComment.moveForm(&quot;comment-1348&quot;, &quot;1348&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href="http://mcuoneclipse.com/2013/01/04/the-freedom-robot/" rel="external nofollow" class="url">The Freedom Robot | MCU on Eclipse</a></p>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-1494">
		<article id="comment-1494" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/picture" class="avatar avatar-68" height="68" width="68"><span class="fn"><a href="http://www.facebook.com/cristian.iacob.779" rel="external nofollow" class="url">Cristian Iacob</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1494"><time datetime="2013-01-26T17:19:19+00:00">January 26, 2013 at 17:19</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi,<br>
After reading your posts I ordered one FRDM-KL25Z and started to have fun:)<br>
Can you please help me with this  application:<br>
First of all the compiled code provided is not loading properly. (No LCD attached but the RGB indication should have worked)<br>
Downloaded the project.<br>
Removed the LCD component.<br>
Recompiled the code.<br>
After recompiling and loading the RED led stays always on.<br>
Added ConsoleIO component and printf(“time is:%u\n”, us); after us =  US_Measure_us(); so I can read the values on my PC.<br>
Now the I can see that us has some values as I move an object in front of the sensor but they are like:27, 24, 21,18,15,12, 9 and only at very close range(5 cm). If the object is farther away then the us value displayed is always 12.<br>
Some representation problem? Missing some bits from the uint16_t?</p>
<p>Thank you.<br>
Cristian</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1494#respond" onclick="return addComment.moveForm(&quot;comment-1494&quot;, &quot;1494&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-2 highlander-comment" id="li-comment-1495">
		<article id="comment-1495" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-3"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1495"><time datetime="2013-01-26T17:32:36+00:00">January 26, 2013 at 17:32</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi Cristian,<br>
Could you verify that your sensor is returning the correct pulse on the echo line? Best if you could use a logic analyzer or oszilloscope.</p>
<p>Erich</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1495#respond" onclick="return addComment.moveForm(&quot;comment-1495&quot;, &quot;1495&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3 highlander-comment" id="li-comment-1496">
		<article id="comment-1496" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/picture(1)" class="avatar avatar-39" height="39" width="39"><span class="fn"><a href="http://www.facebook.com/cristian.iacob.779" rel="external nofollow" class="url">Cristian Iacob</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1496"><time datetime="2013-01-26T17:55:58+00:00">January 26, 2013 at 17:55</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi,<br>
thank you for the quick answer,<br>
-No logic analyzer, maybe will borrow a scope.<br>
-Will check  the setup again tomorrow<br>
-When trying to load the precompiled code provided by you (Freedom_HC-SR04.hex) the green led near the pemicro chip acts strangely (series of 7 or 8 rapid blinks, pause, then blinks again). Something is wrong with that code?<br>
-I am not mistreating that bird, that baby entered my house and just before relieving it I took a snapshot <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":)" class="wp-smiley">  They are little owls.The whole family lives right under my roof.<br>
Something like this:<br>
<a href="http://www.beleefdelente.nl/vogel/steenuil" rel="nofollow">http://www.beleefdelente.nl/vogel/steenuil</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-3 highlander-comment" id="li-comment-1497">
		<article id="comment-1497" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-4"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1497"><time datetime="2013-01-26T18:04:29+00:00">January 26, 2013 at 18:04</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Nice birds, indeed!<br>
I suggest that you check as well the wiring:Make sure you have that voltage divider in place, plus everything connected to the right pins on the Freedom board.<br>
And it could be possible as well that your ultrasonic module is not working properly. I assume you are using the HC-SR04? Because there might be different types of modules around.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1526">
		<article id="comment-1526" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/30301393b19ff916671004820c5d7025" class="avatar avatar-68 grav-hashed grav-hijack" height="68" width="68" id="grav-30301393b19ff916671004820c5d7025-0"><span class="fn"><a href="http://www.facebook.com/cristian.iacob.779" rel="external nofollow" class="url">Cristian Iacob</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1526"><time datetime="2013-01-31T20:23:35+00:00">January 31, 2013 at 20:23</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi!<br>
Problem Solved!<br>
The HC-SR04 module was defective! Replaced it and now the application works nicely <img src="./HC-SR04_application_2_files/icon_smile.gif" alt=":)" class="wp-smiley"><br>
Maybe some people are used to it, but I discovered today: The PicKit2 programmer has a Logic Tool function which is very useful.<br>
Still 2 problems remain:<br>
1-The code provided by you Erich has the Flash image format set as “ihex” and I cannot load it into the FRDM-KL25Z. I have to set it as “srec” and rebuild the project. Also the LCD component has to be removed if LCD module not available.<br>
2-Measuring the Trig signal I noticed it is 120us long, not 10us as expected. Trying to decrease the argument of the  WAIT1_Waitus(10); function I can only obtain 3 us for WAIT1_Waitus(5) and no other values in between. Why could this happen?</p>
<p>Keep up the good work!</p>
<p>Cristian</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1526#respond" onclick="return addComment.moveForm(&quot;comment-1526&quot;, &quot;1526&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-2 highlander-comment" id="li-comment-1531">
		<article id="comment-1531" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-5"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1531"><time datetime="2013-01-31T22:03:59+00:00">January 31, 2013 at 22:03</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi Cristian,<br>
good to hear you are making progress.<br>
About 1): Thanks, I have fixed this now on <a href="https://github.com/ErichStyger/mcuoneclipse/tree/master/Examples/FRDM-KL25Z/Freedom_HC-SR04" rel="nofollow">https://github.com/ErichStyger/mcuoneclipse/tree/master/Examples/FRDM-KL25Z/Freedom_HC-SR04</a><br>
About 2): Are you sampling with a high enough frequency in your logic analycer. I mean it should be at least in the 1 us range if not faster.<br>
And are you using the latest version of ‘Wait’ component? I had fixed some timing back in December (<a href="http://steinerberg.com/EmbeddedComponents/Wait/home.htm" rel="nofollow">http://steinerberg.com/EmbeddedComponents/Wait/home.htm</a>). Wait is using ‘busy waiting’ and not very precise, and it can be interrupted by other interrupts. So you might disable interrupts around the Wait() call.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1531#respond" onclick="return addComment.moveForm(&quot;comment-1531&quot;, &quot;1531&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-1552">
		<article id="comment-1552" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/6eae04df966bf7b704e5b02c893d3756" class="avatar avatar-68 grav-hashed grav-hijack" height="68" width="68" id="grav-6eae04df966bf7b704e5b02c893d3756-0"><span class="fn"><a href="http://gravatar.com/lecsdexter" rel="external nofollow" class="url">lecsdexter</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1552"><time datetime="2013-02-03T19:19:28+00:00">February 3, 2013 at 19:19</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi, do you have any project in which you read analogic signal (outside of the board) and display it at LCD?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1552#respond" onclick="return addComment.moveForm(&quot;comment-1552&quot;, &quot;1552&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-2 highlander-comment" id="li-comment-1553">
		<article id="comment-1553" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-6"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-1553"><time datetime="2013-02-03T19:26:04+00:00">February 3, 2013 at 19:26</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hello, no, not at this moment.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=1553#respond" onclick="return addComment.moveForm(&quot;comment-1553&quot;, &quot;1553&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-2593">
		<article id="comment-2593" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/1a7bd3aeb1195b5e744422e2918ae9ab" class="avatar avatar-68 grav-hashed grav-hijack" height="68" width="68" id="grav-1a7bd3aeb1195b5e744422e2918ae9ab-0"><span class="fn">John</span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-2593"><time datetime="2013-04-12T00:51:45+00:00">April 12, 2013 at 00:51</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I can use this sensor in PIC18F4550?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=2593#respond" onclick="return addComment.moveForm(&quot;comment-2593&quot;, &quot;2593&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-2 highlander-comment" id="li-comment-2594">
		<article id="comment-2594" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-7"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-2594"><time datetime="2013-04-12T05:47:42+00:00">April 12, 2013 at 05:47</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi John,  yes, I do not see why this should be a problem. All what you need is an output pin plus an input pin. And of course adopt the driver/software for the PIC.</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=2594#respond" onclick="return addComment.moveForm(&quot;comment-2594&quot;, &quot;2594&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-2599">
		<article id="comment-2599" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/1a7bd3aeb1195b5e744422e2918ae9ab" class="avatar avatar-68 grav-hashed grav-hijack" height="68" width="68" id="grav-1a7bd3aeb1195b5e744422e2918ae9ab-1"><span class="fn">John</span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-2599"><time datetime="2013-04-12T12:52:07+00:00">April 12, 2013 at 12:52</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I’m now learning PIC am newbie. I know very little about PIC<br>
I have a project, and I have to measure the distance from this sensor (HC-SR04) using PIC18F4550.<br>
Do you know any tutorial to learn how to do?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=2599#respond" onclick="return addComment.moveForm(&quot;comment-2599&quot;, &quot;2599&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-2 highlander-comment" id="li-comment-2601">
		<article id="comment-2601" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-8"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-2601"><time datetime="2013-04-12T12:57:33+00:00">April 12, 2013 at 12:57</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi John,<br>
I did an internet search for “HC-SR04 PIC” and received plenty of hits/pages. I suggest to start there?</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/?replytocom=2601#respond" onclick="return addComment.moveForm(&quot;comment-2601&quot;, &quot;2601&quot;, &quot;respond&quot;, &quot;5920&quot;)">Reply <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3 highlander-comment" id="li-comment-2736">
		<article id="comment-2736" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/1a7bd3aeb1195b5e744422e2918ae9ab(1)" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-1a7bd3aeb1195b5e744422e2918ae9ab-2"><span class="fn">John</span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-2736"><time datetime="2013-04-18T10:51:49+00:00">April 18, 2013 at 10:51</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>I found this: <a href="http://www.youtube.com/watch?v=dRq0e9rwqHo" rel="nofollow">http://www.youtube.com/watch?v=dRq0e9rwqHo</a><br>
but does not use the program that work, work with MPLAB.<br>
Do you know any tutorial for this program?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-mcuoneclipse bypostauthor even depth-3 highlander-comment" id="li-comment-2738">
		<article id="comment-2738" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="./HC-SR04_application_2_files/5835d6072b696e2e76b088d6159eedea" class="avatar avatar-39 grav-hashed grav-hijack" height="39" width="39" id="grav-5835d6072b696e2e76b088d6159eedea-9"><span class="fn"><a href="http://mcuoneclipse.wordpress.com/" rel="external nofollow" class="url">Erich Styger</a></span> on <a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-2738"><time datetime="2013-04-18T12:04:41+00:00">April 18, 2013 at 12:04</time></a> <span class="says">said:</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>Hi John,<br>
no, I do not have a tutorial for MPLAB, sorry.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href="http://mcuoneclipse.com/2013/05/25/tracked-robot-update-ultrasonic-line-sensor-and-shell-with-smac-802-15-4/" rel="external nofollow" class="url">Tracked Robot Update: Ultrasonic, Line Sensor and Shell with SMAC 802.15.4 | MCU on Eclipse</a></p>
	</li><!-- #comment-## -->
		</ol>

		
		
	
									<div id="respond" class="comment-respond js">
				<h3 id="reply-title" class="comment-reply-title">What do you think? <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://mcuoneclipse.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										


												<input type="hidden" id="highlander_comment_nonce" name="highlander_comment_nonce" value="f611989cac"><input type="hidden" name="_wp_http_referer" value="/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/">
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest">

<div class="comment-form-field comment-textarea">
	
	<div id="comment-form-comment"><textarea title="Enter your comment here..." placeholder="Enter your comment here..." style="height: 42px; resize: none; overflow-y: hidden; position: absolute; top: 0px; left: -9999px; width: 604px; line-height: 22px; text-decoration: none; letter-spacing: 0px;" tabindex="-1" aria-hidden="true"></textarea><textarea id="comment" name="comment" title="Enter your comment here..." placeholder="Enter your comment here..." style="height: 42px; resize: none; overflow-y: hidden;"></textarea></div>
</div>

<div id="comment-form-identity" style="display: none;">

	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-form-guest" id="postas-guest" title="Guest">
					<span></span>
				</a>
			</li>
			<li>
				<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-form-load-service:WordPress.com" id="postas-wordpress" title="WordPress.com">
					<span></span>
				</a>
			</li>
			<li>
				<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-form-load-service:Twitter" id="postas-twitter" title="Twitter">
					<span></span>
				</a>
			</li>
			<li>
				<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#comment-form-load-service:Facebook" id="postas-facebook" title="Facebook">
					<span></span>
				</a>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="./HC-SR04_application_2_files/ad516503a11cd5ca435acc9bb6523536" alt="Gravatar" width="25" class="no-grav">
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email" value=""></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value=""></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="text" value=""></div>
				</div>
			</div>
	
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./HC-SR04_application_2_files/wplogo.png" alt="WordPress.com Logo" width="25" class="no-grav">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="">
				<p class="comment-form-posting-as pa-wordpress"><strong></strong> You are commenting using your WordPress.com account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'wordpress' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./HC-SR04_application_2_files/ad516503a11cd5ca435acc9bb6523536" alt="Twitter picture" width="25" class="no-grav">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="">
				<p class="comment-form-posting-as pa-twitter"><strong></strong> You are commenting using your Twitter account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'twitter' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./HC-SR04_application_2_files/ad516503a11cd5ca435acc9bb6523536" alt="Facebook photo" width="25" class="no-grav">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="">
				<p class="comment-form-posting-as pa-facebook"><strong></strong> You are commenting using your Facebook account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'facebook' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

	
</div>

<script type="text/javascript">
var highlander_expando_javascript = function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
}
jQuery(document).ready( highlander_expando_javascript );
</script>

<div id="comment-form-subscribe" style="display: none;">
	<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" tabindex="6"> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of follow-up comments via email.</label></p><p class="post-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto;" tabindex="7"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Notify me of new posts via email.</label></p></div>

												<p class="form-submit" style="display: none;">
							<input name="submit" type="submit" id="comment-submit" value="Post Comment">
							<input type="hidden" name="comment_post_ID" value="5920" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
						</p>
						
<input type="hidden" name="genseq" value="1374311736">
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="0a02df01e2"></p><script type="text/javascript" src="./HC-SR04_application_2_files/form.js"></script>
<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="1374311742333"></p>					</form>
							</div><!-- #respond -->
			<div style="clear: both"></div>			
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">
				<a href="http://theme.wordpress.com/themes/twentyeleven/" title="Learn more about this theme">The Twenty Eleven Theme</a>. <span class="sep"> | </span>				<a href="http://wordpress.com/?ref=footer" rel="generator">Blog at WordPress.com</a>.
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->


<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.en,type.wpcom,posttag.codewarrior,posttag.eclipse,posttag.embedded-component,posttag.freedom-board,posttag.kl25z-freedom-board,posttag.processor-expert,posttag.tipstricks,wa.as.a8c,wa.pv.ads.mcuoneclipse"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript>&lt;div style="display: none;"&gt;&lt;img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom%2Cposttag.codewarrior%2Cposttag.eclipse%2Cposttag.embedded-component%2Cposttag.freedom-board%2Cposttag.kl25z-freedom-board%2Cposttag.processor-expert%2Cposttag.tipstricks%2Cwa.as.a8c%2Cwa.pv.ads.mcuoneclipse" height="1" width="1" alt="" /&gt;&lt;/div&gt;</noscript>

<script type="text/javascript" src="./HC-SR04_application_2_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./HC-SR04_application_2_files/wpgroho.js"></script>
<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wp-admin-bar-my-account' ); });</script>	<div style="display:none">
	<div class="grofile-hash-map-df86c5e111adf04dd698ab61a69cbe7e">
	</div>
	<div class="grofile-hash-map-5835d6072b696e2e76b088d6159eedea">
	</div>
	<div class="grofile-hash-map-1ffc3fa71e702a0bbaa3b3ef6e379dbf">
	</div>
	<div class="grofile-hash-map-30301393b19ff916671004820c5d7025">
	</div>
	<div class="grofile-hash-map-6eae04df966bf7b704e5b02c893d3756">
	</div>
	<div class="grofile-hash-map-1a7bd3aeb1195b5e744422e2918ae9ab">
	</div>
	</div>
<script type="text/javascript">
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"http:\/\/mcuoneclipse.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"http:\/\/mcuoneclipse.wordpress.com\/wp-login.php?action=logout&_wpnonce=3c183fa208","homeURL":"http:\/\/mcuoneclipse.com\/","postID":"5920","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"0"};
/* ]]> */
</script>
<script type="text/javascript" src="./HC-SR04_application_2_files/saved_resource(2)"></script>
		<script type="text/javascript">
		//<![CDATA[
			var _stippleq = _stippleq || [];
			(function() {
				var s = document.createElement('script');
				s.type = 'text/javascript';
				s.async = true;
				s.src = '//stipple.cachefly.net/production/stipple.js';
				var x = document.getElementsByTagName('script')[0];
				x.parentNode.insertBefore(s, x);
			})();
		//]]>
		</script>
		<script type="text/javascript">
		//<![CDATA[
			_stippleq.push(['load', 'wp-32274278', {}]);
		//]]>
		</script><script type="text/javascript" charset="UTF-8" id="polldaddyRatings"><!--//--><![CDATA[//><!--
PDRTJS_settings_5506978_post_5920={"id":5506978,"unique_id":"wp-post-5920","title":"Tutorial%3A%20Ultrasonic%20Ranging%20with%20the%20Freedom%26nbsp%3BBoard","permalink":"http:\/\/mcuoneclipse.com\/2013\/01\/01\/tutorial-ultrasonic-ranging-with-the-freedom-board\/","item_id":"_post_5920"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_5506978_post_5920 == 'undefined' ){PDRTJS_5506978_post_5920 = new PDRTJS_RATING( PDRTJS_settings_5506978_post_5920 );}}
//--><!]]></script><script type="text/javascript" charset="UTF-8" src="./HC-SR04_application_2_files/rating.js"></script>
	<script type="text/javascript">
		WPCOM_sharing_counts = {"http:\/\/mcuoneclipse.com\/2013\/01\/01\/tutorial-ultrasonic-ranging-with-the-freedom-board\/":5920}	</script>
	<div id="sharing_email" style="display: none;">
		<form action="./HC-SR04_application_2_files/HC-SR04_application_2.htm" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="text" name="target_email" id="target_email" value="">

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="">

				<label for="source_email">Your Email Address</label>
				<input type="text" name="source_email" id="source_email" value="">

			
			<div class="recaptcha" id="sharing_recaptcha"></div><input type="hidden" name="recaptcha_public_key" id="recaptcha_public_key" value="6LcYW8MSAAAAADBAuEH9yaPcF7lWh11Iq62ZKtoo">
			<img style="float: right; display: none;" class="loading" src="./HC-SR04_application_2_files/loading.gif" alt="loading" width="16" height="16">
			<input type="submit" value="Send Email" class="sharing_send">
			<a href="http://mcuoneclipse.com/2013/01/01/tutorial-ultrasonic-ranging-with-the-freedom-board/#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
		<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-linkedin' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-tumblr' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtumblr', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
		});
		</script>
							<script type="text/javascript">
			jQuery(document).on('ready', function(){
				jQuery('body').on('click', 'a.share-pinterest', function(e){
					e.preventDefault();

					// Load Pinterest Bookmarklet code
					var s = document.createElement("script");
					s.type = "text/javascript";
					s.src = window.location.protocol + "//assets.pinterest.com/js/pinmarklet.js?r=" + ( Math.random() * 99999999 );
					var x = document.getElementsByTagName("script")[0];
					x.parentNode.insertBefore(s, x);

					// Trigger Stats
					var s = document.createElement("script");
					s.type = "text/javascript";
					s.src = this + ( this.toString().indexOf( '?' ) ? '&' : '?' ) + 'js_only=1';
					var x = document.getElementsByTagName("script")[0];
					x.parentNode.insertBefore(s, x);
				});
			});
			</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-google-plus-1' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=600,height=600' );
				return false;
			});
		});
		</script>
				<iframe src="./HC-SR04_application_2_files/master.htm" scrolling="no" id="likes-master" name="likes-master" style="display:none;"></iframe>
		<div id="likes-other-gravatars"><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		<script type="text/javascript">
		//<![CDATA[
			var jetpackLikesWidgetQueue = [];
			var jetpackLikesMasterReady = false;

			function JetpackLikespostMessage( message, target ) {
				if ( "string" === typeof message ){
					try{
						message = JSON.parse( message );
					}
					catch(e) {
						return;
					}
				}

				pm( {
					target: target,
					type: 'likesMessage',
					data: message,
					origin: '*'
				} );
			}

			function JetpackLikesMessageListener( event ) {
				if ( "undefined" == typeof event.event )
					return;

				if ( 'masterReady' == event.event ) {
					jQuery( document ).ready( function() {
						jetpackLikesMasterReady = true;

						var stylesData = {
								event: 'injectStyles'
						};

						if ( jQuery( 'iframe.admin-bar-likes-widget' ).length > 0 ) {
							JetpackLikespostMessage( { event: 'adminBarEnabled' }, window.frames[ 'likes-master' ] );

							stylesData.adminBarStyles = {
								background: jQuery( '#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a' ).css( 'background' )
							};
						}

						if ( !window.addEventListener )
							jQuery( '#wp-admin-bar-admin-bar-likes-widget' ).hide();

						stylesData.textStyles = {
							color: jQuery( '.sd-text-color').css( 'color' ),
							fontFamily: jQuery( '.sd-text-color' ).css( 'font-family' ),
							fontSize: jQuery( '.sd-text-color' ).css( 'font-size' ),
							direction: jQuery( '.sd-text-color' ).css( 'direction' ),
							fontWeight: jQuery( '.sd-text-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-text-color' ).css( 'font-style' ),
							textDecoration: jQuery( '.sd-text-color' ).css('text-decoration')
						};

						stylesData.linkStyles = {
							color: jQuery( '.sd-link-color' ).css('color'),
							fontFamily: jQuery( '.sd-link-color' ).css('font-family'),
							fontSize: jQuery( '.sd-link-color' ).css('font-size'),
							textDecoration: jQuery( '.sd-link-color' ).css('text-decoration'),
							fontWeight: jQuery( '.sd-link-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-link-color' ).css( 'font-style' )
						};

						JetpackLikespostMessage( stylesData, window.frames[ 'likes-master' ] );

						var requests = [];
						jQuery( '.jetpack-likes-widget-wrapper' ).each( function( i ) {
							var regex = /like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/;
							var match = regex.exec( this.id );
							if ( ! match || match.length != 5 )
								return;

							var info = {
								blog_id: match[2],
								width:   this.width
							};

							if ( 'post' == match[1] ) {
								info.post_id = match[3];
							} else if ( 'comment' == match[1] ) {
								info.comment_id = match[3];
							}

							info.obj_id = match[4];

							requests.push( info );
						});

						JetpackLikespostMessage( { event: 'initialBatch', requests: requests }, window.frames['likes-master'] );

						jQuery( document ).on( 'inview', 'div.jetpack-likes-widget-unloaded', function() {
							jetpackLikesWidgetQueue.push( this.id );
						});
					});
				}

				if ( 'showLikeWidget' == event.event ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 10 );
					jQuery( '#' + event.id + ' .post-likes-widget-placeholder'  ).fadeOut( 'fast', function() {
						jQuery( '#' + event.id + ' .post-likes-widget' ).fadeIn( 'fast', function() {
							JetpackLikespostMessage( { event: 'likeWidgetDisplayed', blog_id: event.blog_id, post_id: event.post_id, obj_id: event.obj_id }, window.frames['likes-master'] );
						});
					});
				}

				if ( 'showOtherGravatars' == event.event ) {
					var $container = jQuery( '#likes-other-gravatars' );
					var $list = $container.find( 'ul' );

					$container.hide();
					$list.html( '' );

					$container.find( '.likes-text span' ).text( event.total );

					jQuery.each( event.likers, function( i, liker ) {
						$list.append( '<li class="' + liker.css_class + '"><a href="' + liker.profile_URL + '" class="wpl-liker" rel="nofollow" target="_parent"><img src="' + liker.avatar_URL + '" alt="' + liker.name + '" width="30" height="30" style="padding-right: 3px;" /></a></li>');
					} );

					var offset = jQuery( "[name='" + event.parent + "']" ).offset();

					$container.css( 'left', offset.left + event.position.left - 10 + 'px' );
					$container.css( 'top', offset.top + event.position.top - 33 + 'px' );

					var rowLength = Math.floor( event.width / 37 );
					var height = ( Math.ceil( event.likers.length / rowLength ) * 37 ) + 13;
					if ( height > 204 ) {
						height = 204;
					}

					$container.css( 'height', height + 'px' );
					$container.css( 'width', rowLength * 37 - 7 + 'px' );

					$list.css( 'width', rowLength * 37 + 'px' );

					$container.fadeIn( 'slow' );

					var scrollbarWidth = $list[0].offsetWidth - $list[0].clientWidth;
					if ( scrollbarWidth > 0 ) {
						$container.width( $container.width() + scrollbarWidth );
						$list.width( $list.width() + scrollbarWidth );
					}
				}
			}

			pm.bind( 'likesMessage', function(e) { JetpackLikesMessageListener(e); } );

			jQuery( document ).click( function( e ) {
				var $container = jQuery( '#likes-other-gravatars' );

				if ( $container.has( e.target ).length === 0 ) {
					$container.fadeOut( 'slow' );
				}
			});

			function JetpackLikesWidgetQueueHandler() {
				var wrapperID;
				if ( ! jetpackLikesMasterReady ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				if ( jetpackLikesWidgetQueue.length > 0 ) {
					// We may have a widget that needs creating now
					var found = false;
					while( jetpackLikesWidgetQueue.length > 0 ) {
						// Grab the first member of the queue that isn't already loading.
						wrapperID = jetpackLikesWidgetQueue.splice( 0, 1 )[0];
						if ( jQuery( '#' + wrapperID ).hasClass( 'jetpack-likes-widget-unloaded' ) ) {
							found = true;
							break;
						}
					}
					if ( ! found ) {
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				} else if ( jQuery( 'div.jetpack-likes-widget-unloaded' ).length > 0 ) {
					// Get the next unloaded widget
					wrapperID = jQuery( 'div.jetpack-likes-widget-unloaded' ).first()[0].id;
					if ( ! wrapperID ) {
						// Everything is currently loaded
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				}

				var $wrapper = jQuery( '#' + wrapperID );
				$wrapper.find( 'iframe' ).remove();

				if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='22px' width='68px' frameBorder='0' scrolling='no' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				} else {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='55px' width='100%' frameBorder='0' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				}

				$wrapper.removeClass( 'jetpack-likes-widget-unloaded' ).addClass( 'jetpack-likes-widget-loading' );

				$wrapper.find( 'iframe' ).load( function( e ) {
					var $iframe = jQuery( e.target );
					$wrapper.removeClass( 'jetpack-likes-widget-loading' ).addClass( 'jetpack-likes-widget-loaded' );

					JetpackLikespostMessage( { event: 'loadLikeWidget', name: $iframe.attr( 'name' ), width: $iframe.width() }, window.frames[ 'likes-master' ] );

					if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
						$wrapper.find( 'iframe' ).Jetpack( 'resizeable' );
					}
				});
				setTimeout( JetpackLikesWidgetQueueHandler, 250 );
			}
			JetpackLikesWidgetQueueHandler();
		//]]>
		</script>
<script type="text/javascript" src="./HC-SR04_application_2_files/saved_resource(3)"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?m=1370811927g&amp;ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414g&amp;ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./HC-SR04_application_2_files/devicepx.js"></script>
<script type="text/javascript" src="./HC-SR04_application_2_files/getaffiliatorjs"></script>
<script type="text/javascript">
/* <![CDATA[ */
var recaptcha_options = {"lang":"en"};
/* ]]> */
</script>
<script type="text/javascript" src="./HC-SR04_application_2_files/sharing.js"></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="./HC-SR04_application_2_files/w.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'32274278','v':'wpcom','tz':'2','user_id':'0','post':'5920','subd':'mcuoneclipse'});
ex_go({'crypt':'UE5tW3cvZGQ/JUs1UEo3MlhbTHVDVTRvbmM3RjIzb05bfmZEclctdS5nJmY3Z09EQzEmQlRTbjlEaDclfDBhfGI4VmxfX2tmV0M1LC42fk9rTjhBRk8mZW4/QitXNjFDcjBCdjMuVERhNGlmXTNSbHlwS0toNThTT3RXUkEuY0Z+WW9sfDhrQnZxNlpERT1aMnQlSXxFP3k4cnJYcHdzLDBlbklXLDFRP0lTT002a09Nbkt8VXBON05O'});
addLoadEvent(function(){linktracker_init('32274278',5920);});
	</script><img id="wpstats" src="./HC-SR04_application_2_files/g.gif" alt=""><img id="wpstats2" src="./HC-SR04_application_2_files/g(1).gif" alt="" style="display: none;">
<noscript>&lt;img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /&gt;</noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//stats.wordpress.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>

<iframe src="./HC-SR04_application_2_files/saved_resource(5).htm" style="display: none;"></iframe></body></html>